const __vite__fileDeps=["assets/AboutView-L_MLAny4.js","assets/AboutView-BANUUOot.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ko(t,e){const n=new Set(t.split(","));return s=>n.has(s)}const ke={},es=[],mt=()=>{},Hh=()=>!1,ei=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Eo=t=>t.startsWith("onUpdate:"),je=Object.assign,Io=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zh=Object.prototype.hasOwnProperty,me=(t,e)=>zh.call(t,e),se=Array.isArray,ts=t=>ti(t)==="[object Map]",hl=t=>ti(t)==="[object Set]",ae=t=>typeof t=="function",Le=t=>typeof t=="string",Bn=t=>typeof t=="symbol",Ie=t=>t!==null&&typeof t=="object",fl=t=>(Ie(t)||ae(t))&&ae(t.then)&&ae(t.catch),dl=Object.prototype.toString,ti=t=>dl.call(t),Kh=t=>ti(t).slice(8,-1),pl=t=>ti(t)==="[object Object]",Oo=t=>Le(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Is=ko(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ni=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Zh=/-(\w)/g,Wt=ni(t=>t.replace(Zh,(e,n)=>n?n.toUpperCase():"")),Yh=/\B([A-Z])/g,_s=ni(t=>t.replace(Yh,"-$1").toLowerCase()),si=ni(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bi=ni(t=>t?`on${si(t)}`:""),gn=(t,e)=>!Object.is(t,e),Li=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ml=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Xh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ba;const gl=()=>Ba||(Ba=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function No(t){if(se(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Le(s)?tf(s):No(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Le(t)||Ie(t))return t}const Jh=/;(?![^(]*\))/g,Qh=/:([^]+)/,ef=/\/\*[^]*?\*\//g;function tf(t){const e={};return t.replace(ef,"").split(Jh).forEach(n=>{if(n){const s=n.split(Qh);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Bt(t){let e="";if(Le(t))e=t;else if(se(t))for(let n=0;n<t.length;n++){const s=Bt(t[n]);s&&(e+=s+" ")}else if(Ie(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const nf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sf=ko(nf);function _l(t){return!!t||t===""}const La=t=>Le(t)?t:t==null?"":se(t)||Ie(t)&&(t.toString===dl||!ae(t.toString))?JSON.stringify(t,yl,2):String(t),yl=(t,e)=>e&&e.__v_isRef?yl(t,e.value):ts(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Ui(s,i)+" =>"]=r,n),{})}:hl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ui(n))}:Bn(e)?Ui(e):Ie(e)&&!se(e)&&!pl(e)?String(e):e,Ui=(t,e="")=>{var n;return Bn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tt;class vl{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Tt,!e&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Tt;try{return Tt=this,e()}finally{Tt=n}}}on(){Tt=this}off(){Tt=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function rf(t){return new vl(t)}function of(t,e=Tt){e&&e.active&&e.effects.push(t)}function af(){return Tt}let In;class Mo{constructor(e,n,s,r){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,of(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,bn();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(cf(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wn()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=fn,n=In;try{return fn=!0,In=this,this._runnings++,Ua(this),this.fn()}finally{Wa(this),this._runnings--,In=n,fn=e}}stop(){this.active&&(Ua(this),Wa(this),this.onStop&&this.onStop(),this.active=!1)}}function cf(t){return t.value}function Ua(t){t._trackId++,t._depsLength=0}function Wa(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)bl(t.deps[e],t);t.deps.length=t._depsLength}}function bl(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let fn=!0,eo=0;const wl=[];function bn(){wl.push(fn),fn=!1}function wn(){const t=wl.pop();fn=t===void 0?!0:t}function Do(){eo++}function Fo(){for(eo--;!eo&&to.length;)to.shift()()}function Tl(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&bl(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const to=[];function Cl(t,e,n){Do();for(const s of t.keys()){let r;s._dirtyLevel<e&&(r??(r=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(r??(r=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&to.push(s.scheduler)))}Fo()}const Al=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},no=new WeakMap,On=Symbol(""),so=Symbol("");function at(t,e,n){if(fn&&In){let s=no.get(t);s||no.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Al(()=>s.delete(n))),Tl(In,r)}}function Yt(t,e,n,s,r,i){const o=no.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&se(t)){const c=Number(s);o.forEach((l,u)=>{(u==="length"||!Bn(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":se(t)?Oo(n)&&a.push(o.get("length")):(a.push(o.get(On)),ts(t)&&a.push(o.get(so)));break;case"delete":se(t)||(a.push(o.get(On)),ts(t)&&a.push(o.get(so)));break;case"set":ts(t)&&a.push(o.get(On));break}Do();for(const c of a)c&&Cl(c,4);Fo()}const lf=ko("__proto__,__v_isRef,__isVue"),Sl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bn)),$a=uf();function uf(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=_e(this);for(let i=0,o=this.length;i<o;i++)at(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(_e)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){bn(),Do();const s=_e(this)[e].apply(this,n);return Fo(),wn(),s}}),t}function hf(t){Bn(t)||(t=String(t));const e=_e(this);return at(e,"has",t),e.hasOwnProperty(t)}class xl{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Af:Ol:i?Il:El).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=se(e);if(!r){if(o&&me($a,n))return Reflect.get($a,n,s);if(n==="hasOwnProperty")return hf}const a=Reflect.get(e,n,s);return(Bn(n)?Sl.has(n):lf(n))||(r||at(e,"get",n),i)?a:ct(a)?o&&Oo(n)?a:a.value:Ie(a)?r?Ml(a):Js(a):a}}class kl extends xl{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const c=Ls(i);if(!Pr(s)&&!Ls(s)&&(i=_e(i),s=_e(s)),!se(e)&&ct(i)&&!ct(s))return c?!1:(i.value=s,!0)}const o=se(e)&&Oo(n)?Number(n)<e.length:me(e,n),a=Reflect.set(e,n,s,r);return e===_e(r)&&(o?gn(s,i)&&Yt(e,"set",n,s):Yt(e,"add",n,s)),a}deleteProperty(e,n){const s=me(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Yt(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Bn(n)||!Sl.has(n))&&at(e,"has",n),s}ownKeys(e){return at(e,"iterate",se(e)?"length":On),Reflect.ownKeys(e)}}class ff extends xl{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const df=new kl,pf=new ff,mf=new kl(!0);const Po=t=>t,ri=t=>Reflect.getPrototypeOf(t);function dr(t,e,n=!1,s=!1){t=t.__v_raw;const r=_e(t),i=_e(e);n||(gn(e,i)&&at(r,"get",e),at(r,"get",i));const{has:o}=ri(r),a=s?Po:n?Bo:Us;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function pr(t,e=!1){const n=this.__v_raw,s=_e(n),r=_e(t);return e||(gn(t,r)&&at(s,"has",t),at(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function mr(t,e=!1){return t=t.__v_raw,!e&&at(_e(t),"iterate",On),Reflect.get(t,"size",t)}function qa(t){t=_e(t);const e=_e(this);return ri(e).has.call(e,t)||(e.add(t),Yt(e,"add",t,t)),this}function ja(t,e){e=_e(e);const n=_e(this),{has:s,get:r}=ri(n);let i=s.call(n,t);i||(t=_e(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?gn(e,o)&&Yt(n,"set",t,e):Yt(n,"add",t,e),this}function Ga(t){const e=_e(this),{has:n,get:s}=ri(e);let r=n.call(e,t);r||(t=_e(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Yt(e,"delete",t,void 0),i}function Ha(){const t=_e(this),e=t.size!==0,n=t.clear();return e&&Yt(t,"clear",void 0,void 0),n}function gr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=_e(o),c=e?Po:t?Bo:Us;return!t&&at(a,"iterate",On),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function _r(t,e,n){return function(...s){const r=this.__v_raw,i=_e(r),o=ts(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),u=n?Po:e?Bo:Us;return!e&&at(i,"iterate",c?so:On),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function nn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function gf(){const t={get(i){return dr(this,i)},get size(){return mr(this)},has:pr,add:qa,set:ja,delete:Ga,clear:Ha,forEach:gr(!1,!1)},e={get(i){return dr(this,i,!1,!0)},get size(){return mr(this)},has:pr,add:qa,set:ja,delete:Ga,clear:Ha,forEach:gr(!1,!0)},n={get(i){return dr(this,i,!0)},get size(){return mr(this,!0)},has(i){return pr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:gr(!0,!1)},s={get(i){return dr(this,i,!0,!0)},get size(){return mr(this,!0)},has(i){return pr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:gr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=_r(i,!1,!1),n[i]=_r(i,!0,!1),e[i]=_r(i,!1,!0),s[i]=_r(i,!0,!0)}),[t,n,e,s]}const[_f,yf,vf,bf]=gf();function Ro(t,e){const n=e?t?bf:vf:t?yf:_f;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(me(n,r)&&r in s?n:s,r,i)}const wf={get:Ro(!1,!1)},Tf={get:Ro(!1,!0)},Cf={get:Ro(!0,!1)};const El=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Af=new WeakMap;function Sf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xf(t){return t.__v_skip||!Object.isExtensible(t)?0:Sf(Kh(t))}function Js(t){return Ls(t)?t:Vo(t,!1,df,wf,El)}function Nl(t){return Vo(t,!1,mf,Tf,Il)}function Ml(t){return Vo(t,!0,pf,Cf,Ol)}function Vo(t,e,n,s,r){if(!Ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=xf(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function Os(t){return Ls(t)?Os(t.__v_raw):!!(t&&t.__v_isReactive)}function Ls(t){return!!(t&&t.__v_isReadonly)}function Pr(t){return!!(t&&t.__v_isShallow)}function Dl(t){return t?!!t.__v_raw:!1}function _e(t){const e=t&&t.__v_raw;return e?_e(e):t}function Fl(t){return Object.isExtensible(t)&&ml(t,"__v_skip",!0),t}const Us=t=>Ie(t)?Js(t):t,Bo=t=>Ie(t)?Ml(t):t;class Pl{constructor(e,n,s,r){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Mo(()=>e(this._value),()=>Er(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=_e(this);return(!e._cacheable||e.effect.dirty)&&gn(e._value,e._value=e.effect.run())&&Er(e,4),Rl(e),e.effect._dirtyLevel>=2&&Er(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function kf(t,e,n=!1){let s,r;const i=ae(t);return i?(s=t,r=mt):(s=t.get,r=t.set),new Pl(s,r,i||!r,n)}function Rl(t){var e;fn&&In&&(t=_e(t),Tl(In,(e=t.dep)!=null?e:t.dep=Al(()=>t.dep=void 0,t instanceof Pl?t:void 0)))}function Er(t,e=4,n){t=_e(t);const s=t.dep;s&&Cl(s,e)}function ct(t){return!!(t&&t.__v_isRef===!0)}function Ws(t){return Vl(t,!1)}function Ef(t){return Vl(t,!0)}function Vl(t,e){return ct(t)?t:new If(t,e)}class If{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:_e(e),this._value=n?e:Us(e)}get value(){return Rl(this),this._value}set value(e){const n=this.__v_isShallow||Pr(e)||Ls(e);e=n?e:_e(e),gn(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Us(e),Er(this,4))}}function ns(t){return ct(t)?t.value:t}const Of={get:(t,e,n)=>ns(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return ct(r)&&!ct(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Bl(t){return Os(t)?t:new Proxy(t,Of)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dn(t,e,n,s){try{return s?t(...s):t()}catch(r){ii(r,e,n)}}function kt(t,e,n,s){if(ae(t)){const r=dn(t,e,n,s);return r&&fl(r)&&r.catch(i=>{ii(i,e,n)}),r}if(se(t)){const r=[];for(let i=0;i<t.length;i++)r.push(kt(t[i],e,n,s));return r}}function ii(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){bn(),dn(c,null,10,[t,o,a]),wn();return}}}let $s=!1,ro=!1;const Ke=[];let Vt=0;const ss=[];let an=null,kn=0;const Ll=Promise.resolve();let Lo=null;function Ul(t){const e=Lo||Ll;return t?e.then(this?t.bind(this):t):e}function Nf(t){let e=Vt+1,n=Ke.length;for(;e<n;){const s=e+n>>>1,r=Ke[s],i=qs(r);i<t||i===t&&r.pre?e=s+1:n=s}return e}function Uo(t){(!Ke.length||!Ke.includes(t,$s&&t.allowRecurse?Vt+1:Vt))&&(t.id==null?Ke.push(t):Ke.splice(Nf(t.id),0,t),Wl())}function Wl(){!$s&&!ro&&(ro=!0,Lo=Ll.then(ql))}function Mf(t){const e=Ke.indexOf(t);e>Vt&&Ke.splice(e,1)}function Df(t){se(t)?ss.push(...t):(!an||!an.includes(t,t.allowRecurse?kn+1:kn))&&ss.push(t),Wl()}function za(t,e,n=$s?Vt+1:0){for(;n<Ke.length;n++){const s=Ke[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;Ke.splice(n,1),n--,s()}}}function $l(t){if(ss.length){const e=[...new Set(ss)].sort((n,s)=>qs(n)-qs(s));if(ss.length=0,an){an.push(...e);return}for(an=e,kn=0;kn<an.length;kn++)an[kn]();an=null,kn=0}}const qs=t=>t.id==null?1/0:t.id,Ff=(t,e)=>{const n=qs(t)-qs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ql(t){ro=!1,$s=!0,Ke.sort(Ff);try{for(Vt=0;Vt<Ke.length;Vt++){const e=Ke[Vt];e&&e.active!==!1&&dn(e,null,14)}}finally{Vt=0,Ke.length=0,$l(),$s=!1,Lo=null,(Ke.length||ss.length)&&ql()}}function Pf(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ke;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=s[u]||ke;f&&(r=n.map(d=>Le(d)?d.trim():d)),h&&(r=n.map(Xh))}let a,c=s[a=Bi(e)]||s[a=Bi(Wt(e))];!c&&i&&(c=s[a=Bi(_s(e))]),c&&kt(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,kt(l,t,6,r)}}function jl(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ae(t)){const c=l=>{const u=jl(l,e,!0);u&&(a=!0,je(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ie(t)&&s.set(t,null),null):(se(i)?i.forEach(c=>o[c]=null):je(o,i),Ie(t)&&s.set(t,o),o)}function oi(t,e){return!t||!ei(e)?!1:(e=e.slice(2).replace(/Once$/,""),me(t,e[0].toLowerCase()+e.slice(1))||me(t,_s(e))||me(t,e))}let Ze=null,ai=null;function Rr(t){const e=Ze;return Ze=t,ai=t&&t.type.__scopeId||null,e}function Wo(t){ai=t}function $o(){ai=null}function Rf(t,e=Ze,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&rc(-1);const i=Rr(e);let o;try{o=t(...r)}finally{Rr(i),s._d&&rc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Wi(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:f,setupState:d,ctx:p,inheritAttrs:m}=t,g=Rr(t);let y,C;try{if(n.shapeFlag&4){const A=r||s,b=A;y=Rt(l.call(b,A,u,h,d,f,p)),C=a}else{const A=e;y=Rt(A.length>1?A(h,{attrs:a,slots:o,emit:c}):A(h,null)),C=e.props?a:Vf(a)}}catch(A){Fs.length=0,ii(A,t,1),y=pe(os)}let x=y;if(C&&m!==!1){const A=Object.keys(C),{shapeFlag:b}=x;A.length&&b&7&&(i&&A.some(Eo)&&(C=Bf(C,i)),x=as(x,C,!1,!0))}return n.dirs&&(x=as(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),y=x,Rr(g),y}const Vf=t=>{let e;for(const n in t)(n==="class"||n==="style"||ei(n))&&((e||(e={}))[n]=t[n]);return e},Bf=(t,e)=>{const n={};for(const s in t)(!Eo(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Lf(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Ka(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!oi(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ka(s,o,l):!0:!!o;return!1}function Ka(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!oi(n,i))return!0}return!1}function Uf({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Wf="components";function _n(t,e){return qf(Wf,t,!0,e)||t}const $f=Symbol.for("v-ndc");function qf(t,e,n=!0,s=!1){const r=Ze||He;if(r){const i=r.type;{const a=Bd(i,!1);if(a&&(a===e||a===Wt(e)||a===si(Wt(e))))return i}const o=Za(r[t]||i[t],e)||Za(r.appContext[t],e);return!o&&s?i:o}}function Za(t,e){return t&&(t[e]||t[Wt(e)]||t[si(Wt(e))])}const jf=t=>t.__isSuspense;function Gf(t,e){e&&e.pendingBranch?se(t)?e.effects.push(...t):e.effects.push(t):Df(t)}const Hf=Symbol.for("v-scx"),zf=()=>Lt(Hf),yr={};function Ir(t,e,n){return Gl(t,e,n)}function Gl(t,e,{immediate:n,deep:s,flush:r,once:i,onTrack:o,onTrigger:a}=ke){if(e&&i){const T=e;e=(...E)=>{T(...E),b()}}const c=He,l=T=>s===!0?T:Zn(T,s===!1?1:void 0);let u,h=!1,f=!1;if(ct(t)?(u=()=>t.value,h=Pr(t)):Os(t)?(u=()=>l(t),h=!0):se(t)?(f=!0,h=t.some(T=>Os(T)||Pr(T)),u=()=>t.map(T=>{if(ct(T))return T.value;if(Os(T))return l(T);if(ae(T))return dn(T,c,2)})):ae(t)?e?u=()=>dn(t,c,2):u=()=>(d&&d(),kt(t,c,3,[p])):u=mt,e&&s){const T=u;u=()=>Zn(T())}let d,p=T=>{d=x.onStop=()=>{dn(T,c,4),d=x.onStop=void 0}},m;if(ui)if(p=mt,e?n&&kt(e,c,3,[u(),f?[]:void 0,p]):u(),r==="sync"){const T=zf();m=T.__watcherHandles||(T.__watcherHandles=[])}else return mt;let g=f?new Array(t.length).fill(yr):yr;const y=()=>{if(!(!x.active||!x.dirty))if(e){const T=x.run();(s||h||(f?T.some((E,S)=>gn(E,g[S])):gn(T,g)))&&(d&&d(),kt(e,c,3,[T,g===yr?void 0:f&&g[0]===yr?[]:g,p]),g=T)}else x.run()};y.allowRecurse=!!e;let C;r==="sync"?C=y:r==="post"?C=()=>st(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),C=()=>Uo(y));const x=new Mo(u,mt,C),A=af(),b=()=>{x.stop(),A&&Io(A.effects,x)};return e?n?y():g=x.run():r==="post"?st(x.run.bind(x),c&&c.suspense):x.run(),m&&m.push(b),b}function Kf(t,e,n){const s=this.proxy,r=Le(t)?t.includes(".")?Hl(s,t):()=>s[t]:t.bind(s,s);let i;ae(e)?i=e:(i=e.handler,n=e);const o=Qs(this),a=Gl(r,i.bind(s),n);return o(),a}function Hl(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Zn(t,e=1/0,n){if(e<=0||!Ie(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ct(t))Zn(t.value,e,n);else if(se(t))for(let s=0;s<t.length;s++)Zn(t[s],e,n);else if(hl(t)||ts(t))t.forEach(s=>{Zn(s,e,n)});else if(pl(t))for(const s in t)Zn(t[s],e,n);return t}function Sn(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(bn(),kt(c,n,8,[t.el,a,t,e]),wn())}}/*! #__NO_SIDE_EFFECTS__ */function pt(t,e){return ae(t)?je({name:t.name},e,{setup:t}):t}const Ns=t=>!!t.type.__asyncLoader,zl=t=>t.type.__isKeepAlive;function Zf(t,e){Kl(t,"a",e)}function Yf(t,e){Kl(t,"da",e)}function Kl(t,e,n=He){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ci(e,s,n),n){let r=n.parent;for(;r&&r.parent;)zl(r.parent.vnode)&&Xf(s,e,n,r),r=r.parent}}function Xf(t,e,n,s){const r=ci(e,t,s,!0);Zl(()=>{Io(s[e],r)},n)}function ci(t,e,n=He,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;bn();const a=Qs(n),c=kt(e,n,t,o);return a(),wn(),c});return s?r.unshift(i):r.push(i),i}}const Jt=t=>(e,n=He)=>(!ui||t==="sp")&&ci(t,(...s)=>e(...s),n),Jf=Jt("bm"),Qf=Jt("m"),ed=Jt("bu"),td=Jt("u"),nd=Jt("bum"),Zl=Jt("um"),sd=Jt("sp"),rd=Jt("rtg"),id=Jt("rtc");function od(t,e=He){ci("ec",t,e)}function Yl(t,e,n,s){let r;const i=n;if(se(t)||Le(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i)}else if(Ie(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(t[l],l,a,i)}}else r=[];return r}function ad(t,e,n={},s,r){if(Ze.isCE||Ze.parent&&Ns(Ze.parent)&&Ze.parent.isCE)return pe("slot",n,s);let i=t[e];i&&i._c&&(i._d=!1),yt();const o=i&&Xl(i(n)),a=hu(ht,{key:n.key||o&&o.key||`_${e}`},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),a}function Xl(t){return t.some(e=>Br(e)?!(e.type===os||e.type===ht&&!Xl(e.children)):!0)?t:null}const io=t=>t?pu(t)?Ho(t)||t.proxy:io(t.parent):null,Ms=je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>io(t.parent),$root:t=>io(t.root),$emit:t=>t.emit,$options:t=>qo(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Uo(t.update)}),$nextTick:t=>t.n||(t.n=Ul.bind(t.proxy)),$watch:t=>Kf.bind(t)}),$i=(t,e)=>t!==ke&&!t.__isScriptSetup&&me(t,e),cd={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if($i(s,e))return o[e]=1,s[e];if(r!==ke&&me(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&me(l,e))return o[e]=3,i[e];if(n!==ke&&me(n,e))return o[e]=4,n[e];oo&&(o[e]=0)}}const u=Ms[e];let h,f;if(u)return e==="$attrs"&&at(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==ke&&me(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,me(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return $i(r,e)?(r[e]=n,!0):s!==ke&&me(s,e)?(s[e]=n,!0):me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ke&&me(t,o)||$i(e,o)||(a=i[0])&&me(a,o)||me(s,o)||me(Ms,o)||me(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ya(t){return se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let oo=!0;function ld(t){const e=qo(t),n=t.proxy,s=t.ctx;oo=!1,e.beforeCreate&&Xa(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:C,destroyed:x,unmounted:A,render:b,renderTracked:T,renderTriggered:E,errorCaptured:S,serverPrefetch:L,expose:P,inheritAttrs:V,components:M,directives:j,filters:G}=e;if(l&&ud(l,s,null),o)for(const W in o){const z=o[W];ae(z)&&(s[W]=z.bind(n))}if(r){const W=r.call(n,n);Ie(W)&&(t.data=Js(W))}if(oo=!0,i)for(const W in i){const z=i[W],Y=ae(z)?z.bind(n,n):ae(z.get)?z.get.bind(n,n):mt,te=!ae(z)&&ae(z.set)?z.set.bind(n):mt,Q=it({get:Y,set:te});Object.defineProperty(s,W,{enumerable:!0,configurable:!0,get:()=>Q.value,set:re=>Q.value=re})}if(a)for(const W in a)Jl(a[W],s,n,W);if(c){const W=ae(c)?c.call(n):c;Reflect.ownKeys(W).forEach(z=>{Or(z,W[z])})}u&&Xa(u,t,"c");function q(W,z){se(z)?z.forEach(Y=>W(Y.bind(n))):z&&W(z.bind(n))}if(q(Jf,h),q(Qf,f),q(ed,d),q(td,p),q(Zf,m),q(Yf,g),q(od,S),q(id,T),q(rd,E),q(nd,C),q(Zl,A),q(sd,L),se(P))if(P.length){const W=t.exposed||(t.exposed={});P.forEach(z=>{Object.defineProperty(W,z,{get:()=>n[z],set:Y=>n[z]=Y})})}else t.exposed||(t.exposed={});b&&t.render===mt&&(t.render=b),V!=null&&(t.inheritAttrs=V),M&&(t.components=M),j&&(t.directives=j)}function ud(t,e,n=mt){se(t)&&(t=ao(t));for(const s in t){const r=t[s];let i;Ie(r)?"default"in r?i=Lt(r.from||s,r.default,!0):i=Lt(r.from||s):i=Lt(r),ct(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Xa(t,e,n){kt(se(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Jl(t,e,n,s){const r=s.includes(".")?Hl(n,s):()=>n[s];if(Le(t)){const i=e[t];ae(i)&&Ir(r,i)}else if(ae(t))Ir(r,t.bind(n));else if(Ie(t))if(se(t))t.forEach(i=>Jl(i,e,n,s));else{const i=ae(t.handler)?t.handler.bind(n):e[t.handler];ae(i)&&Ir(r,i,t)}}function qo(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>Vr(c,l,o,!0)),Vr(c,e,o)),Ie(e)&&i.set(e,c),c}function Vr(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Vr(t,i,n,!0),r&&r.forEach(o=>Vr(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=hd[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hd={data:Ja,props:Qa,emits:Qa,methods:Es,computed:Es,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:Es,directives:Es,watch:dd,provide:Ja,inject:fd};function Ja(t,e){return e?t?function(){return je(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function fd(t,e){return Es(ao(t),ao(e))}function ao(t){if(se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Je(t,e){return t?[...new Set([].concat(t,e))]:e}function Es(t,e){return t?je(Object.create(null),t,e):e}function Qa(t,e){return t?se(t)&&se(e)?[...new Set([...t,...e])]:je(Object.create(null),Ya(t),Ya(e??{})):e}function dd(t,e){if(!t)return e;if(!e)return t;const n=je(Object.create(null),t);for(const s in e)n[s]=Je(t[s],e[s]);return n}function Ql(){return{app:null,config:{isNativeTag:Hh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pd=0;function md(t,e){return function(s,r=null){ae(s)||(s=je({},s)),r!=null&&!Ie(r)&&(r=null);const i=Ql(),o=new WeakSet;let a=!1;const c=i.app={_uid:pd++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Ud,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&ae(l.install)?(o.add(l),l.install(c,...u)):ae(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=pe(s,r);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(f,l):t(f,l,h),a=!0,c._container=l,l.__vue_app__=c,Ho(f.component)||f.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){const u=Ds;Ds=c;try{return l()}finally{Ds=u}}};return c}}let Ds=null;function Or(t,e){if(He){let n=He.provides;const s=He.parent&&He.parent.provides;s===n&&(n=He.provides=Object.create(s)),n[t]=e}}function Lt(t,e,n=!1){const s=He||Ze;if(s||Ds){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ds._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ae(e)?e.call(s&&s.proxy):e}}const eu={},tu=()=>Object.create(eu),nu=t=>Object.getPrototypeOf(t)===eu;function gd(t,e,n,s=!1){const r={},i=tu();t.propsDefaults=Object.create(null),su(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Nl(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function _d(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=_e(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(oi(t.emitsOptions,f))continue;const d=e[f];if(c)if(me(i,f))d!==i[f]&&(i[f]=d,l=!0);else{const p=Wt(f);r[p]=co(c,a,p,d,t,!1)}else d!==i[f]&&(i[f]=d,l=!0)}}}else{su(t,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!me(e,h)&&((u=_s(h))===h||!me(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=co(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!me(e,h))&&(delete i[h],l=!0)}l&&Yt(t.attrs,"set","")}function su(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Is(c))continue;const l=e[c];let u;r&&me(r,u=Wt(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:oi(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=_e(n),l=a||ke;for(let u=0;u<i.length;u++){const h=i[u];n[h]=co(r,c,h,l[h],t,!me(l,h))}}return o}function co(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=me(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ae(c)){const{propsDefaults:l}=r;if(n in l)s=l[n];else{const u=Qs(r);s=l[n]=c.call(null,e),u()}}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===_s(n))&&(s=!0))}return s}function ru(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!ae(t)){const u=h=>{c=!0;const[f,d]=ru(h,e,!0);je(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return Ie(t)&&s.set(t,es),es;if(se(i))for(let u=0;u<i.length;u++){const h=Wt(i[u]);ec(h)&&(o[h]=ke)}else if(i)for(const u in i){const h=Wt(u);if(ec(h)){const f=i[u],d=o[h]=se(f)||ae(f)?{type:f}:je({},f);if(d){const p=sc(Boolean,d.type),m=sc(String,d.type);d[0]=p>-1,d[1]=m<0||p<m,(p>-1||me(d,"default"))&&a.push(h)}}}const l=[o,a];return Ie(t)&&s.set(t,l),l}function ec(t){return t[0]!=="$"&&!Is(t)}function tc(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function nc(t,e){return tc(t)===tc(e)}function sc(t,e){return se(e)?e.findIndex(n=>nc(n,t)):ae(e)&&nc(e,t)?0:-1}const iu=t=>t[0]==="_"||t==="$stable",jo=t=>se(t)?t.map(Rt):[Rt(t)],yd=(t,e,n)=>{if(e._n)return e;const s=Rf((...r)=>jo(e(...r)),n);return s._c=!1,s},ou=(t,e,n)=>{const s=t._ctx;for(const r in t){if(iu(r))continue;const i=t[r];if(ae(i))e[r]=yd(r,i,s);else if(i!=null){const o=jo(i);e[r]=()=>o}}},au=(t,e)=>{const n=jo(e);t.slots.default=()=>n},vd=(t,e)=>{const n=t.slots=tu();if(t.vnode.shapeFlag&32){const s=e._;s?(je(n,e),ml(n,"_",s,!0)):ou(e,n)}else e&&au(t,e)},bd=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ke;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(je(r,e),!n&&a===1&&delete r._):(i=!e.$stable,ou(e,r)),o=e}else e&&(au(t,e),o={default:1});if(i)for(const a in r)!iu(a)&&o[a]==null&&delete r[a]};function lo(t,e,n,s,r=!1){if(se(t)){t.forEach((f,d)=>lo(f,e&&(se(e)?e[d]:e),n,s,r));return}if(Ns(s)&&!r)return;const i=s.shapeFlag&4?Ho(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===ke?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Le(l)?(u[l]=null,me(h,l)&&(h[l]=null)):ct(l)&&(l.value=null)),ae(c))dn(c,a,12,[o,u]);else{const f=Le(c),d=ct(c);if(f||d){const p=()=>{if(t.f){const m=f?me(h,c)?h[c]:u[c]:c.value;r?se(m)&&Io(m,i):se(m)?m.includes(i)||m.push(i):f?(u[c]=[i],me(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else f?(u[c]=o,me(h,c)&&(h[c]=o)):d&&(c.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,st(p,n)):p()}}}const st=Gf;function wd(t){return Td(t)}function Td(t,e){const n=gl();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=mt,insertStaticContent:p}=t,m=(_,v,w,k=null,I=null,F=null,R=void 0,D=null,U=!!v.dynamicChildren)=>{if(_===v)return;_&&!xs(_,v)&&(k=O(_),re(_,I,F,!0),_=null),v.patchFlag===-2&&(U=!1,v.dynamicChildren=null);const{type:B,ref:H,shapeFlag:ee}=v;switch(B){case li:g(_,v,w,k);break;case os:y(_,v,w,k);break;case ji:_==null&&C(v,w,k,R);break;case ht:M(_,v,w,k,I,F,R,D,U);break;default:ee&1?b(_,v,w,k,I,F,R,D,U):ee&6?j(_,v,w,k,I,F,R,D,U):(ee&64||ee&128)&&B.process(_,v,w,k,I,F,R,D,U,K)}H!=null&&I&&lo(H,_&&_.ref,F,v||_,!v)},g=(_,v,w,k)=>{if(_==null)s(v.el=a(v.children),w,k);else{const I=v.el=_.el;v.children!==_.children&&l(I,v.children)}},y=(_,v,w,k)=>{_==null?s(v.el=c(v.children||""),w,k):v.el=_.el},C=(_,v,w,k)=>{[_.el,_.anchor]=p(_.children,v,w,k,_.el,_.anchor)},x=({el:_,anchor:v},w,k)=>{let I;for(;_&&_!==v;)I=f(_),s(_,w,k),_=I;s(v,w,k)},A=({el:_,anchor:v})=>{let w;for(;_&&_!==v;)w=f(_),r(_),_=w;r(v)},b=(_,v,w,k,I,F,R,D,U)=>{v.type==="svg"?R="svg":v.type==="math"&&(R="mathml"),_==null?T(v,w,k,I,F,R,D,U):L(_,v,I,F,R,D,U)},T=(_,v,w,k,I,F,R,D)=>{let U,B;const{props:H,shapeFlag:ee,transition:J,dirs:ne}=_;if(U=_.el=o(_.type,F,H&&H.is,H),ee&8?u(U,_.children):ee&16&&S(_.children,U,null,k,I,qi(_,F),R,D),ne&&Sn(_,null,k,"created"),E(U,_,_.scopeId,R,k),H){for(const be in H)be!=="value"&&!Is(be)&&i(U,be,null,H[be],F,_.children,k,I,oe);"value"in H&&i(U,"value",null,H.value,F),(B=H.onVnodeBeforeMount)&&Pt(B,k,_)}ne&&Sn(_,null,k,"beforeMount");const fe=Cd(I,J);fe&&J.beforeEnter(U),s(U,v,w),((B=H&&H.onVnodeMounted)||fe||ne)&&st(()=>{B&&Pt(B,k,_),fe&&J.enter(U),ne&&Sn(_,null,k,"mounted")},I)},E=(_,v,w,k,I)=>{if(w&&d(_,w),k)for(let F=0;F<k.length;F++)d(_,k[F]);if(I){let F=I.subTree;if(v===F){const R=I.vnode;E(_,R,R.scopeId,R.slotScopeIds,I.parent)}}},S=(_,v,w,k,I,F,R,D,U=0)=>{for(let B=U;B<_.length;B++){const H=_[B]=D?cn(_[B]):Rt(_[B]);m(null,H,v,w,k,I,F,R,D)}},L=(_,v,w,k,I,F,R)=>{const D=v.el=_.el;let{patchFlag:U,dynamicChildren:B,dirs:H}=v;U|=_.patchFlag&16;const ee=_.props||ke,J=v.props||ke;let ne;if(w&&xn(w,!1),(ne=J.onVnodeBeforeUpdate)&&Pt(ne,w,v,_),H&&Sn(v,_,w,"beforeUpdate"),w&&xn(w,!0),B?P(_.dynamicChildren,B,D,w,k,qi(v,I),F):R||z(_,v,D,null,w,k,qi(v,I),F,!1),U>0){if(U&16)V(D,v,ee,J,w,k,I);else if(U&2&&ee.class!==J.class&&i(D,"class",null,J.class,I),U&4&&i(D,"style",ee.style,J.style,I),U&8){const fe=v.dynamicProps;for(let be=0;be<fe.length;be++){const xe=fe[be],$e=ee[xe],wt=J[xe];(wt!==$e||xe==="value")&&i(D,xe,$e,wt,I,_.children,w,k,oe)}}U&1&&_.children!==v.children&&u(D,v.children)}else!R&&B==null&&V(D,v,ee,J,w,k,I);((ne=J.onVnodeUpdated)||H)&&st(()=>{ne&&Pt(ne,w,v,_),H&&Sn(v,_,w,"updated")},k)},P=(_,v,w,k,I,F,R)=>{for(let D=0;D<v.length;D++){const U=_[D],B=v[D],H=U.el&&(U.type===ht||!xs(U,B)||U.shapeFlag&70)?h(U.el):w;m(U,B,H,null,k,I,F,R,!0)}},V=(_,v,w,k,I,F,R)=>{if(w!==k){if(w!==ke)for(const D in w)!Is(D)&&!(D in k)&&i(_,D,w[D],null,R,v.children,I,F,oe);for(const D in k){if(Is(D))continue;const U=k[D],B=w[D];U!==B&&D!=="value"&&i(_,D,B,U,R,v.children,I,F,oe)}"value"in k&&i(_,"value",w.value,k.value,R)}},M=(_,v,w,k,I,F,R,D,U)=>{const B=v.el=_?_.el:a(""),H=v.anchor=_?_.anchor:a("");let{patchFlag:ee,dynamicChildren:J,slotScopeIds:ne}=v;ne&&(D=D?D.concat(ne):ne),_==null?(s(B,w,k),s(H,w,k),S(v.children||[],w,H,I,F,R,D,U)):ee>0&&ee&64&&J&&_.dynamicChildren?(P(_.dynamicChildren,J,w,I,F,R,D),(v.key!=null||I&&v===I.subTree)&&cu(_,v,!0)):z(_,v,w,H,I,F,R,D,U)},j=(_,v,w,k,I,F,R,D,U)=>{v.slotScopeIds=D,_==null?v.shapeFlag&512?I.ctx.activate(v,w,k,R,U):G(v,w,k,I,F,R,U):X(_,v,U)},G=(_,v,w,k,I,F,R)=>{const D=_.component=Md(_,k,I);if(zl(_)&&(D.ctx.renderer=K),Fd(D),D.asyncDep){if(I&&I.registerDep(D,q),!_.el){const U=D.subTree=pe(os);y(null,U,v,w)}}else q(D,_,v,w,I,F,R)},X=(_,v,w)=>{const k=v.component=_.component;if(Lf(_,v,w))if(k.asyncDep&&!k.asyncResolved){W(k,v,w);return}else k.next=v,Mf(k.update),k.effect.dirty=!0,k.update();else v.el=_.el,k.vnode=v},q=(_,v,w,k,I,F,R)=>{const D=()=>{if(_.isMounted){let{next:H,bu:ee,u:J,parent:ne,vnode:fe}=_;{const qn=lu(_);if(qn){H&&(H.el=fe.el,W(_,H,R)),qn.asyncDep.then(()=>{_.isUnmounted||D()});return}}let be=H,xe;xn(_,!1),H?(H.el=fe.el,W(_,H,R)):H=fe,ee&&Li(ee),(xe=H.props&&H.props.onVnodeBeforeUpdate)&&Pt(xe,ne,H,fe),xn(_,!0);const $e=Wi(_),wt=_.subTree;_.subTree=$e,m(wt,$e,h(wt.el),O(wt),_,I,F),H.el=$e.el,be===null&&Uf(_,$e.el),J&&st(J,I),(xe=H.props&&H.props.onVnodeUpdated)&&st(()=>Pt(xe,ne,H,fe),I)}else{let H;const{el:ee,props:J}=v,{bm:ne,m:fe,parent:be}=_,xe=Ns(v);if(xn(_,!1),ne&&Li(ne),!xe&&(H=J&&J.onVnodeBeforeMount)&&Pt(H,be,v),xn(_,!0),ee&&ge){const $e=()=>{_.subTree=Wi(_),ge(ee,_.subTree,_,I,null)};xe?v.type.__asyncLoader().then(()=>!_.isUnmounted&&$e()):$e()}else{const $e=_.subTree=Wi(_);m(null,$e,w,k,_,I,F),v.el=$e.el}if(fe&&st(fe,I),!xe&&(H=J&&J.onVnodeMounted)){const $e=v;st(()=>Pt(H,be,$e),I)}(v.shapeFlag&256||be&&Ns(be.vnode)&&be.vnode.shapeFlag&256)&&_.a&&st(_.a,I),_.isMounted=!0,v=w=k=null}},U=_.effect=new Mo(D,mt,()=>Uo(B),_.scope),B=_.update=()=>{U.dirty&&U.run()};B.id=_.uid,xn(_,!0),B()},W=(_,v,w)=>{v.component=_;const k=_.vnode.props;_.vnode=v,_.next=null,_d(_,v.props,k,w),bd(_,v.children,w),bn(),za(_),wn()},z=(_,v,w,k,I,F,R,D,U=!1)=>{const B=_&&_.children,H=_?_.shapeFlag:0,ee=v.children,{patchFlag:J,shapeFlag:ne}=v;if(J>0){if(J&128){te(B,ee,w,k,I,F,R,D,U);return}else if(J&256){Y(B,ee,w,k,I,F,R,D,U);return}}ne&8?(H&16&&oe(B,I,F),ee!==B&&u(w,ee)):H&16?ne&16?te(B,ee,w,k,I,F,R,D,U):oe(B,I,F,!0):(H&8&&u(w,""),ne&16&&S(ee,w,k,I,F,R,D,U))},Y=(_,v,w,k,I,F,R,D,U)=>{_=_||es,v=v||es;const B=_.length,H=v.length,ee=Math.min(B,H);let J;for(J=0;J<ee;J++){const ne=v[J]=U?cn(v[J]):Rt(v[J]);m(_[J],ne,w,null,I,F,R,D,U)}B>H?oe(_,I,F,!0,!1,ee):S(v,w,k,I,F,R,D,U,ee)},te=(_,v,w,k,I,F,R,D,U)=>{let B=0;const H=v.length;let ee=_.length-1,J=H-1;for(;B<=ee&&B<=J;){const ne=_[B],fe=v[B]=U?cn(v[B]):Rt(v[B]);if(xs(ne,fe))m(ne,fe,w,null,I,F,R,D,U);else break;B++}for(;B<=ee&&B<=J;){const ne=_[ee],fe=v[J]=U?cn(v[J]):Rt(v[J]);if(xs(ne,fe))m(ne,fe,w,null,I,F,R,D,U);else break;ee--,J--}if(B>ee){if(B<=J){const ne=J+1,fe=ne<H?v[ne].el:k;for(;B<=J;)m(null,v[B]=U?cn(v[B]):Rt(v[B]),w,fe,I,F,R,D,U),B++}}else if(B>J)for(;B<=ee;)re(_[B],I,F,!0),B++;else{const ne=B,fe=B,be=new Map;for(B=fe;B<=J;B++){const ut=v[B]=U?cn(v[B]):Rt(v[B]);ut.key!=null&&be.set(ut.key,B)}let xe,$e=0;const wt=J-fe+1;let qn=!1,Pa=0;const Ss=new Array(wt);for(B=0;B<wt;B++)Ss[B]=0;for(B=ne;B<=ee;B++){const ut=_[B];if($e>=wt){re(ut,I,F,!0);continue}let Ft;if(ut.key!=null)Ft=be.get(ut.key);else for(xe=fe;xe<=J;xe++)if(Ss[xe-fe]===0&&xs(ut,v[xe])){Ft=xe;break}Ft===void 0?re(ut,I,F,!0):(Ss[Ft-fe]=B+1,Ft>=Pa?Pa=Ft:qn=!0,m(ut,v[Ft],w,null,I,F,R,D,U),$e++)}const Ra=qn?Ad(Ss):es;for(xe=Ra.length-1,B=wt-1;B>=0;B--){const ut=fe+B,Ft=v[ut],Va=ut+1<H?v[ut+1].el:k;Ss[B]===0?m(null,Ft,w,Va,I,F,R,D,U):qn&&(xe<0||B!==Ra[xe]?Q(Ft,w,Va,2):xe--)}}},Q=(_,v,w,k,I=null)=>{const{el:F,type:R,transition:D,children:U,shapeFlag:B}=_;if(B&6){Q(_.component.subTree,v,w,k);return}if(B&128){_.suspense.move(v,w,k);return}if(B&64){R.move(_,v,w,K);return}if(R===ht){s(F,v,w);for(let ee=0;ee<U.length;ee++)Q(U[ee],v,w,k);s(_.anchor,v,w);return}if(R===ji){x(_,v,w);return}if(k!==2&&B&1&&D)if(k===0)D.beforeEnter(F),s(F,v,w),st(()=>D.enter(F),I);else{const{leave:ee,delayLeave:J,afterLeave:ne}=D,fe=()=>s(F,v,w),be=()=>{ee(F,()=>{fe(),ne&&ne()})};J?J(F,fe,be):be()}else s(F,v,w)},re=(_,v,w,k=!1,I=!1)=>{const{type:F,props:R,ref:D,children:U,dynamicChildren:B,shapeFlag:H,patchFlag:ee,dirs:J}=_;if(D!=null&&lo(D,null,w,_,!0),H&256){v.ctx.deactivate(_);return}const ne=H&1&&J,fe=!Ns(_);let be;if(fe&&(be=R&&R.onVnodeBeforeUnmount)&&Pt(be,v,_),H&6)ie(_.component,w,k);else{if(H&128){_.suspense.unmount(w,k);return}ne&&Sn(_,null,v,"beforeUnmount"),H&64?_.type.remove(_,v,w,I,K,k):B&&(F!==ht||ee>0&&ee&64)?oe(B,v,w,!1,!0):(F===ht&&ee&384||!I&&H&16)&&oe(U,v,w),k&&Fe(_)}(fe&&(be=R&&R.onVnodeUnmounted)||ne)&&st(()=>{be&&Pt(be,v,_),ne&&Sn(_,null,v,"unmounted")},w)},Fe=_=>{const{type:v,el:w,anchor:k,transition:I}=_;if(v===ht){Pe(w,k);return}if(v===ji){A(_);return}const F=()=>{r(w),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(_.shapeFlag&1&&I&&!I.persisted){const{leave:R,delayLeave:D}=I,U=()=>R(w,F);D?D(_.el,F,U):U()}else F()},Pe=(_,v)=>{let w;for(;_!==v;)w=f(_),r(_),_=w;r(v)},ie=(_,v,w)=>{const{bum:k,scope:I,update:F,subTree:R,um:D}=_;k&&Li(k),I.stop(),F&&(F.active=!1,re(R,_,v,w)),D&&st(D,v),st(()=>{_.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},oe=(_,v,w,k=!1,I=!1,F=0)=>{for(let R=F;R<_.length;R++)re(_[R],v,w,k,I)},O=_=>_.shapeFlag&6?O(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el);let N=!1;const $=(_,v,w)=>{_==null?v._vnode&&re(v._vnode,null,null,!0):m(v._vnode||null,_,v,null,null,null,w),N||(N=!0,za(),$l(),N=!1),v._vnode=_},K={p:m,um:re,m:Q,r:Fe,mt:G,mc:S,pc:z,pbc:P,n:O,o:t};let he,ge;return{render:$,hydrate:he,createApp:md($,he)}}function qi({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function xn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Cd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function cu(t,e,n=!1){const s=t.children,r=e.children;if(se(s)&&se(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cn(r[i]),a.el=o.el),n||cu(o,a)),a.type===li&&(a.el=o.el)}}function Ad(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function lu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:lu(e)}const Sd=t=>t.__isTeleport,ht=Symbol.for("v-fgt"),li=Symbol.for("v-txt"),os=Symbol.for("v-cmt"),ji=Symbol.for("v-stc"),Fs=[];let St=null;function yt(t=!1){Fs.push(St=t?null:[])}function xd(){Fs.pop(),St=Fs[Fs.length-1]||null}let js=1;function rc(t){js+=t}function uu(t){return t.dynamicChildren=js>0?St||es:null,xd(),js>0&&St&&St.push(t),t}function Ut(t,e,n,s,r,i){return uu(ve(t,e,n,s,r,i,!0))}function hu(t,e,n,s,r){return uu(pe(t,e,n,s,r,!0))}function Br(t){return t?t.__v_isVNode===!0:!1}function xs(t,e){return t.type===e.type&&t.key===e.key}const fu=({key:t})=>t??null,Nr=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Le(t)||ct(t)||ae(t)?{i:Ze,r:t,k:e,f:!!n}:t:null);function ve(t,e=null,n=null,s=0,r=null,i=t===ht?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fu(e),ref:e&&Nr(e),scopeId:ai,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ze};return a?(Go(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Le(n)?8:16),js>0&&!o&&St&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&St.push(c),c}const pe=kd;function kd(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===$f)&&(t=os),Br(t)){const a=as(t,e,!0);return n&&Go(a,n),js>0&&!i&&St&&(a.shapeFlag&6?St[St.indexOf(t)]=a:St.push(a)),a.patchFlag|=-2,a}if(Ld(t)&&(t=t.__vccOpts),e){e=Ed(e);let{class:a,style:c}=e;a&&!Le(a)&&(e.class=Bt(a)),Ie(c)&&(Dl(c)&&!se(c)&&(c=je({},c)),e.style=No(c))}const o=Le(t)?1:jf(t)?128:Sd(t)?64:Ie(t)?4:ae(t)?2:0;return ve(t,e,n,s,r,o,i,!0)}function Ed(t){return t?Dl(t)||nu(t)?je({},t):t:null}function as(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?du(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&fu(l),ref:e&&e.ref?n&&i?se(i)?i.concat(Nr(e)):[i,Nr(e)]:Nr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ht?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&as(t.ssContent),ssFallback:t.ssFallback&&as(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&(u.transition=c.clone(u)),u}function Id(t=" ",e=0){return pe(li,null,t,e)}function Rt(t){return t==null||typeof t=="boolean"?pe(os):se(t)?pe(ht,null,t.slice()):typeof t=="object"?cn(t):pe(li,null,String(t))}function cn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:as(t)}function Go(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(se(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Go(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!nu(e)?e._ctx=Ze:r===3&&Ze&&(Ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:Ze},n=32):(e=String(e),s&64?(n=16,e=[Id(e)]):n=8);t.children=e,t.shapeFlag|=n}function du(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Bt([e.class,s.class]));else if(r==="style")e.style=No([e.style,s.style]);else if(ei(r)){const i=e[r],o=s[r];o&&i!==o&&!(se(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Pt(t,e,n,s=null){kt(t,e,7,[n,s])}const Od=Ql();let Nd=0;function Md(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Od,i={uid:Nd++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new vl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ru(s,r),emitsOptions:jl(s,r),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:s.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Pf.bind(null,i),t.ce&&t.ce(i),i}let He=null;const Dd=()=>He||Ze;let Lr,uo;{const t=gl(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Lr=e("__VUE_INSTANCE_SETTERS__",n=>He=n),uo=e("__VUE_SSR_SETTERS__",n=>ui=n)}const Qs=t=>{const e=He;return Lr(t),t.scope.on(),()=>{t.scope.off(),Lr(e)}},ic=()=>{He&&He.scope.off(),Lr(null)};function pu(t){return t.vnode.shapeFlag&4}let ui=!1;function Fd(t,e=!1){e&&uo(e);const{props:n,children:s}=t.vnode,r=pu(t);gd(t,n,r,e),vd(t,s);const i=r?Pd(t,e):void 0;return e&&uo(!1),i}function Pd(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cd);const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?Vd(t):null,i=Qs(t);bn();const o=dn(s,t,0,[t.props,r]);if(wn(),i(),fl(o)){if(o.then(ic,ic),e)return o.then(a=>{oc(t,a,e)}).catch(a=>{ii(a,t,0)});t.asyncDep=o}else oc(t,o,e)}else mu(t,e)}function oc(t,e,n){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ie(e)&&(t.setupState=Bl(e)),mu(t,n)}let ac;function mu(t,e,n){const s=t.type;if(!t.render){if(!e&&ac&&!s.render){const r=s.template||qo(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=je(je({isCustomElement:i,delimiters:a},o),c);s.render=ac(r,l)}}t.render=s.render||mt}{const r=Qs(t);bn();try{ld(t)}finally{wn(),r()}}}const Rd={get(t,e){return at(t,"get",""),t[e]}};function Vd(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Rd),slots:t.slots,emit:t.emit,expose:e}}function Ho(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Bl(Fl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ms)return Ms[n](t)},has(e,n){return n in e||n in Ms}}))}function Bd(t,e=!0){return ae(t)?t.displayName||t.name:t.name||e&&t.__name}function Ld(t){return ae(t)&&"__vccOpts"in t}const it=(t,e)=>kf(t,e,ui);function gu(t,e,n){const s=arguments.length;return s===2?Ie(e)&&!se(e)?Br(e)?pe(t,null,[e]):pe(t,e):pe(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Br(n)&&(n=[n]),pe(t,e,n))}const Ud="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Wd="http://www.w3.org/2000/svg",$d="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,cc=ln&&ln.createElement("template"),qd={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?ln.createElementNS(Wd,t):e==="mathml"?ln.createElementNS($d,t):ln.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>ln.createTextNode(t),createComment:t=>ln.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ln.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{cc.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=cc.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},jd=Symbol("_vtc");function Gd(t,e,n){const s=t[jd];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const lc=Symbol("_vod"),Hd=Symbol("_vsh"),zd=Symbol(""),Kd=/(^|;)\s*display\s*:/;function Zd(t,e,n){const s=t.style,r=Le(n);let i=!1;if(n&&!r){if(e)if(Le(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Mr(s,a,"")}else for(const o in e)n[o]==null&&Mr(s,o,"");for(const o in n)o==="display"&&(i=!0),Mr(s,o,n[o])}else if(r){if(e!==n){const o=s[zd];o&&(n+=";"+o),s.cssText=n,i=Kd.test(n)}}else e&&t.removeAttribute("style");lc in t&&(t[lc]=i?s.display:"",t[Hd]&&(s.display="none"))}const uc=/\s*!important$/;function Mr(t,e,n){if(se(n))n.forEach(s=>Mr(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Yd(t,e);uc.test(n)?t.setProperty(_s(s),n.replace(uc,""),"important"):t[s]=n}}const hc=["Webkit","Moz","ms"],Gi={};function Yd(t,e){const n=Gi[e];if(n)return n;let s=Wt(e);if(s!=="filter"&&s in t)return Gi[e]=s;s=si(s);for(let r=0;r<hc.length;r++){const i=hc[r]+s;if(i in t)return Gi[e]=i}return e}const fc="http://www.w3.org/1999/xlink";function Xd(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(fc,e.slice(6,e.length)):t.setAttributeNS(fc,e,n);else{const i=sf(e);n==null||i&&!_l(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Jd(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=_l(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Qd(t,e,n,s){t.addEventListener(e,n,s)}function ep(t,e,n,s){t.removeEventListener(e,n,s)}const dc=Symbol("_vei");function tp(t,e,n,s,r=null){const i=t[dc]||(t[dc]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=np(e);if(s){const l=i[e]=ip(s,r);Qd(t,a,l,c)}else o&&(ep(t,a,o,c),i[e]=void 0)}}const pc=/(?:Once|Passive|Capture)$/;function np(t){let e;if(pc.test(t)){e={};let s;for(;s=t.match(pc);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_s(t.slice(2)),e]}let Hi=0;const sp=Promise.resolve(),rp=()=>Hi||(sp.then(()=>Hi=0),Hi=Date.now());function ip(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;kt(op(s,n.value),e,5,[s])};return n.value=t,n.attached=rp(),n}function op(t,e){if(se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const mc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ap=(t,e,n,s,r,i,o,a,c)=>{const l=r==="svg";e==="class"?Gd(t,s,l):e==="style"?Zd(t,n,s):ei(e)?Eo(e)||tp(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cp(t,e,s,l))?Jd(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Xd(t,e,s,l))};function cp(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&mc(e)&&ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return mc(e)&&Le(n)?!1:e in t}const lp=["ctrl","shift","alt","meta"],up={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>lp.some(n=>t[`${n}Key`]&&!e.includes(n))},hp=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=up[e[o]];if(a&&a(r,e))return}return t(r,...i)})},fp=je({patchProp:ap},qd);let gc;function dp(){return gc||(gc=wd(fp))}const pp=(...t)=>{const e=dp().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=gp(s);if(!r)return;const i=e._component;!ae(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,mp(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function mp(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gp(t){return Le(t)?document.querySelector(t):t}var _p=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const yp=Symbol();var _c;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(_c||(_c={}));function vp(){const t=rf(!0),e=t.run(()=>Ws({}));let n=[],s=[];const r=Fl({install(i){r._a=i,i.provide(yp,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return!this._a&&!_p?s.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const bp=pt({}),Ln=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n};function wp(t,e,n,s,r,i){const o=_n("RouterView");return yt(),hu(o)}const Tp=Ln(bp,[["render",wp]]),Cp="modulepreload",Ap=function(t){return"/ai-music/dist/"+t},yc={},Sp=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Ap(a),a in yc)return;yc[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Cp,c||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Hn=typeof document<"u";function xp(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ye=Object.assign;function zi(t,e){const n={};for(const s in e){const r=e[s];n[s]=It(r)?r.map(t):t(r)}return n}const Ps=()=>{},It=Array.isArray,_u=/#/g,kp=/&/g,Ep=/\//g,Ip=/=/g,Op=/\?/g,yu=/\+/g,Np=/%5B/g,Mp=/%5D/g,vu=/%5E/g,Dp=/%60/g,bu=/%7B/g,Fp=/%7C/g,wu=/%7D/g,Pp=/%20/g;function zo(t){return encodeURI(""+t).replace(Fp,"|").replace(Np,"[").replace(Mp,"]")}function Rp(t){return zo(t).replace(bu,"{").replace(wu,"}").replace(vu,"^")}function ho(t){return zo(t).replace(yu,"%2B").replace(Pp,"+").replace(_u,"%23").replace(kp,"%26").replace(Dp,"`").replace(bu,"{").replace(wu,"}").replace(vu,"^")}function Vp(t){return ho(t).replace(Ip,"%3D")}function Bp(t){return zo(t).replace(_u,"%23").replace(Op,"%3F")}function Lp(t){return t==null?"":Bp(t).replace(Ep,"%2F")}function Gs(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Up=/\/$/,Wp=t=>t.replace(Up,"");function Ki(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Gp(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Gs(o)}}function $p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function vc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function qp(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&cs(e.matched[s],n.matched[r])&&Tu(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function cs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tu(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!jp(t[n],e[n]))return!1;return!0}function jp(t,e){return It(t)?bc(t,e):It(e)?bc(e,t):t===e}function bc(t,e){return It(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Gp(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}var Hs;(function(t){t.pop="pop",t.push="push"})(Hs||(Hs={}));var Rs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Rs||(Rs={}));function Hp(t){if(!t)if(Hn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Wp(t)}const zp=/^[^#]+#/;function Kp(t,e){return t.replace(zp,"#")+e}function Zp(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const hi=()=>({left:window.scrollX,top:window.scrollY});function Yp(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Zp(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function wc(t,e){return(history.state?history.state.position-e:-1)+t}const fo=new Map;function Xp(t,e){fo.set(t,e)}function Jp(t){const e=fo.get(t);return fo.delete(t),e}let Qp=()=>location.protocol+"//"+location.host;function Cu(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),vc(c,"")}return vc(n,t)+s+r}function em(t,e,n,s){let r=[],i=[],o=null;const a=({state:f})=>{const d=Cu(t,location),p=n.value,m=e.value;let g=0;if(f){if(n.value=d,e.value=f,o&&o===p){o=null;return}g=m?f.position-m.position:0}else s(d);r.forEach(y=>{y(n.value,p,{delta:g,type:Hs.pop,direction:g?g>0?Rs.forward:Rs.back:Rs.unknown})})};function c(){o=n.value}function l(f){r.push(f);const d=()=>{const p=r.indexOf(f);p>-1&&r.splice(p,1)};return i.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(ye({},f.state,{scroll:hi()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Tc(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?hi():null}}function tm(t){const{history:e,location:n}=window,s={value:Cu(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:Qp()+t+c;try{e[u?"replaceState":"pushState"](l,"",f),r.value=l}catch{n[u?"replace":"assign"](f)}}function o(c,l){const u=ye({},e.state,Tc(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=ye({},r.value,e.state,{forward:c,scroll:hi()});i(u.current,u,!0);const h=ye({},Tc(s.value,c,null),{position:u.position+1},l);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function nm(t){t=Hp(t);const e=tm(t),n=em(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ye({location:"",base:t,go:s,createHref:Kp.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function sm(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),nm(t)}function rm(t){return typeof t=="string"||t&&typeof t=="object"}function Au(t){return typeof t=="string"||typeof t=="symbol"}const sn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Su=Symbol("");var Cc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Cc||(Cc={}));function ls(t,e){return ye(new Error,{type:t,[Su]:!0},e)}function zt(t,e){return t instanceof Error&&Su in t&&(e==null||!!(t.type&e))}const Ac="[^/]+?",im={sensitive:!1,strict:!1,start:!0,end:!0},om=/[.+*?^${}()[\]/\\]/g;function am(t,e){const n=ye({},im,e),s=[];let r=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let h=0;h<l.length;h++){const f=l[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(om,"\\$&"),d+=40;else if(f.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=f;i.push({name:p,repeatable:m,optional:g});const C=y||Ac;if(C!==Ac){d+=10;try{new RegExp(`(${C})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${p}" (${C}): `+A.message)}}let x=m?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;h||(x=g&&l.length<2?`(?:/${x})`:"/"+x),g&&(x+="?"),r+=x,d+=20,g&&(d+=-8),m&&(d+=-20),C===".*"&&(d+=-50)}u.push(d)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",p=i[f-1];h[p.name]=d&&p.repeatable?d.split("/"):d}return h}function c(l){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:p,repeatable:m,optional:g}=d,y=p in l?l[p]:"";if(It(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const C=It(y)?y.join("/"):y;if(!C)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function cm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function xu(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=cm(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Sc(s))return 1;if(Sc(r))return-1}return r.length-s.length}function Sc(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const lm={type:0,value:""},um=/[a-zA-Z0-9_]/;function hm(t){if(!t)return[[]];if(t==="/")return[[lm]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${l}": ${d}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=s;break;case 1:c==="("?n=2:um.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),r}function fm(t,e,n){const s=am(hm(t.path),n),r=ye(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function dm(t,e){const n=[],s=new Map;e=Ec({strict:!1,end:!0,sensitive:!1},e);function r(u){return s.get(u)}function i(u,h,f){const d=!f,p=pm(u);p.aliasOf=f&&f.record;const m=Ec(e,u),g=[p];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const A of x)g.push(ye({},p,{components:f?f.record.components:p.components,path:A,aliasOf:f?f.record:p}))}let y,C;for(const x of g){const{path:A}=x;if(h&&A[0]!=="/"){const b=h.record.path,T=b[b.length-1]==="/"?"":"/";x.path=h.record.path+(A&&T+A)}if(y=fm(x,h,m),f?f.alias.push(y):(C=C||y,C!==y&&C.alias.push(y),d&&u.name&&!kc(y)&&o(u.name)),ku(y)&&c(y),p.children){const b=p.children;for(let T=0;T<b.length;T++)i(b[T],y,f&&f.children[T])}f=f||y}return C?()=>{o(C)}:Ps}function o(u){if(Au(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){const h=_m(u,n);n.splice(h,0,u),u.record.name&&!kc(u)&&s.set(u.record.name,u)}function l(u,h){let f,d={},p,m;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw ls(1,{location:u});m=f.record.name,d=ye(xc(h.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&xc(u.params,f.keys.map(C=>C.name))),p=f.stringify(d)}else if(u.path!=null)p=u.path,f=n.find(C=>C.re.test(p)),f&&(d=f.parse(p),m=f.record.name);else{if(f=h.name?s.get(h.name):n.find(C=>C.re.test(h.path)),!f)throw ls(1,{location:u,currentLocation:h});m=f.record.name,d=ye({},h.params,u.params),p=f.stringify(d)}const g=[];let y=f;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:d,matched:g,meta:gm(g)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function xc(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function pm(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:mm(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function mm(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function kc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function gm(t){return t.reduce((e,n)=>ye(e,n.meta),{})}function Ec(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function _m(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;xu(t,e[i])<0?s=i:n=i+1}const r=ym(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function ym(t){let e=t;for(;e=e.parent;)if(ku(e)&&xu(t,e)===0)return e}function ku({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function vm(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(yu," "),o=i.indexOf("="),a=Gs(o<0?i:i.slice(0,o)),c=o<0?null:Gs(i.slice(o+1));if(a in e){let l=e[a];It(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Ic(t){let e="";for(let n in t){const s=t[n];if(n=Vp(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(It(s)?s.map(i=>i&&ho(i)):[s&&ho(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function bm(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=It(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const wm=Symbol(""),Oc=Symbol(""),Ko=Symbol(""),Eu=Symbol(""),po=Symbol("");function ks(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function un(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(ls(4,{from:n,to:e})):f instanceof Error?c(f):rm(f)?c(ls(2,{from:e,to:f})):(o&&s.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(s&&s.instances[r],e,n,l));let h=Promise.resolve(u);t.length<3&&(h=h.then(l)),h.catch(f=>c(f))})}function Zi(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Tm(c)){const u=(c.__vccOpts||c)[e];u&&i.push(un(u,n,s,o,a,r))}else{let l=c();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=xp(u)?u.default:u;o.components[a]=h;const d=(h.__vccOpts||h)[e];return d&&un(d,n,s,o,a,r)()}))}}return i}function Tm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Nc(t){const e=Lt(Ko),n=Lt(Eu),s=it(()=>{const c=ns(t.to);return e.resolve(c)}),r=it(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(cs.bind(null,u));if(f>-1)return f;const d=Mc(c[l-2]);return l>1&&Mc(u)===d&&h[h.length-1].path!==d?h.findIndex(cs.bind(null,c[l-2])):f}),i=it(()=>r.value>-1&&xm(n.params,s.value.params)),o=it(()=>r.value>-1&&r.value===n.matched.length-1&&Tu(n.params,s.value.params));function a(c={}){return Sm(c)?e[ns(t.replace)?"replace":"push"](ns(t.to)).catch(Ps):Promise.resolve()}return{route:s,href:it(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const Cm=pt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Nc,setup(t,{slots:e}){const n=Js(Nc(t)),{options:s}=Lt(Ko),r=it(()=>({[Dc(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Dc(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:gu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Am=Cm;function Sm(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function xm(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!It(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Mc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dc=(t,e,n)=>t??e??n,km=pt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Lt(po),r=it(()=>t.route||s.value),i=Lt(Oc,0),o=it(()=>{let l=ns(i);const{matched:u}=r.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=it(()=>r.value.matched[o.value]);Or(Oc,it(()=>o.value+1)),Or(wm,a),Or(po,r);const c=Ws();return Ir(()=>[c.value,a.value,t.name],([l,u,h],[f,d,p])=>{u&&(u.instances[h]=l,d&&d!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!cs(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=r.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return Fc(n.default,{Component:f,route:l});const d=h.props[u],p=d?d===!0?l.params:typeof d=="function"?d(l):d:null,g=gu(f,ye({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Fc(n.default,{Component:g,route:l})||g}}});function Fc(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Em=km;function Im(t){const e=dm(t.routes,t),n=t.parseQuery||vm,s=t.stringifyQuery||Ic,r=t.history,i=ks(),o=ks(),a=ks(),c=Ef(sn);let l=sn;Hn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=zi.bind(null,O=>""+O),h=zi.bind(null,Lp),f=zi.bind(null,Gs);function d(O,N){let $,K;return Au(O)?($=e.getRecordMatcher(O),K=N):K=O,e.addRoute(K,$)}function p(O){const N=e.getRecordMatcher(O);N&&e.removeRoute(N)}function m(){return e.getRoutes().map(O=>O.record)}function g(O){return!!e.getRecordMatcher(O)}function y(O,N){if(N=ye({},N||c.value),typeof O=="string"){const v=Ki(n,O,N.path),w=e.resolve({path:v.path},N),k=r.createHref(v.fullPath);return ye(v,w,{params:f(w.params),hash:Gs(v.hash),redirectedFrom:void 0,href:k})}let $;if(O.path!=null)$=ye({},O,{path:Ki(n,O.path,N.path).path});else{const v=ye({},O.params);for(const w in v)v[w]==null&&delete v[w];$=ye({},O,{params:h(v)}),N.params=h(N.params)}const K=e.resolve($,N),he=O.hash||"";K.params=u(f(K.params));const ge=$p(s,ye({},O,{hash:Rp(he),path:K.path})),_=r.createHref(ge);return ye({fullPath:ge,hash:he,query:s===Ic?bm(O.query):O.query||{}},K,{redirectedFrom:void 0,href:_})}function C(O){return typeof O=="string"?Ki(n,O,c.value.path):ye({},O)}function x(O,N){if(l!==O)return ls(8,{from:N,to:O})}function A(O){return E(O)}function b(O){return A(ye(C(O),{replace:!0}))}function T(O){const N=O.matched[O.matched.length-1];if(N&&N.redirect){const{redirect:$}=N;let K=typeof $=="function"?$(O):$;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=C(K):{path:K},K.params={}),ye({query:O.query,hash:O.hash,params:K.path!=null?{}:O.params},K)}}function E(O,N){const $=l=y(O),K=c.value,he=O.state,ge=O.force,_=O.replace===!0,v=T($);if(v)return E(ye(C(v),{state:typeof v=="object"?ye({},he,v.state):he,force:ge,replace:_}),N||$);const w=$;w.redirectedFrom=N;let k;return!ge&&qp(s,K,$)&&(k=ls(16,{to:w,from:K}),Q(K,K,!0,!1)),(k?Promise.resolve(k):P(w,K)).catch(I=>zt(I)?zt(I,2)?I:te(I):z(I,w,K)).then(I=>{if(I){if(zt(I,2))return E(ye({replace:_},C(I.to),{state:typeof I.to=="object"?ye({},he,I.to.state):he,force:ge}),N||w)}else I=M(w,K,!0,_,he);return V(w,K,I),I})}function S(O,N){const $=x(O,N);return $?Promise.reject($):Promise.resolve()}function L(O){const N=Pe.values().next().value;return N&&typeof N.runWithContext=="function"?N.runWithContext(O):O()}function P(O,N){let $;const[K,he,ge]=Om(O,N);$=Zi(K.reverse(),"beforeRouteLeave",O,N);for(const v of K)v.leaveGuards.forEach(w=>{$.push(un(w,O,N))});const _=S.bind(null,O,N);return $.push(_),oe($).then(()=>{$=[];for(const v of i.list())$.push(un(v,O,N));return $.push(_),oe($)}).then(()=>{$=Zi(he,"beforeRouteUpdate",O,N);for(const v of he)v.updateGuards.forEach(w=>{$.push(un(w,O,N))});return $.push(_),oe($)}).then(()=>{$=[];for(const v of ge)if(v.beforeEnter)if(It(v.beforeEnter))for(const w of v.beforeEnter)$.push(un(w,O,N));else $.push(un(v.beforeEnter,O,N));return $.push(_),oe($)}).then(()=>(O.matched.forEach(v=>v.enterCallbacks={}),$=Zi(ge,"beforeRouteEnter",O,N,L),$.push(_),oe($))).then(()=>{$=[];for(const v of o.list())$.push(un(v,O,N));return $.push(_),oe($)}).catch(v=>zt(v,8)?v:Promise.reject(v))}function V(O,N,$){a.list().forEach(K=>L(()=>K(O,N,$)))}function M(O,N,$,K,he){const ge=x(O,N);if(ge)return ge;const _=N===sn,v=Hn?history.state:{};$&&(K||_?r.replace(O.fullPath,ye({scroll:_&&v&&v.scroll},he)):r.push(O.fullPath,he)),c.value=O,Q(O,N,$,_),te()}let j;function G(){j||(j=r.listen((O,N,$)=>{if(!ie.listening)return;const K=y(O),he=T(K);if(he){E(ye(he,{replace:!0}),K).catch(Ps);return}l=K;const ge=c.value;Hn&&Xp(wc(ge.fullPath,$.delta),hi()),P(K,ge).catch(_=>zt(_,12)?_:zt(_,2)?(E(_.to,K).then(v=>{zt(v,20)&&!$.delta&&$.type===Hs.pop&&r.go(-1,!1)}).catch(Ps),Promise.reject()):($.delta&&r.go(-$.delta,!1),z(_,K,ge))).then(_=>{_=_||M(K,ge,!1),_&&($.delta&&!zt(_,8)?r.go(-$.delta,!1):$.type===Hs.pop&&zt(_,20)&&r.go(-1,!1)),V(K,ge,_)}).catch(Ps)}))}let X=ks(),q=ks(),W;function z(O,N,$){te(O);const K=q.list();return K.length&&K.forEach(he=>he(O,N,$)),Promise.reject(O)}function Y(){return W&&c.value!==sn?Promise.resolve():new Promise((O,N)=>{X.add([O,N])})}function te(O){return W||(W=!O,G(),X.list().forEach(([N,$])=>O?$(O):N()),X.reset()),O}function Q(O,N,$,K){const{scrollBehavior:he}=t;if(!Hn||!he)return Promise.resolve();const ge=!$&&Jp(wc(O.fullPath,0))||(K||!$)&&history.state&&history.state.scroll||null;return Ul().then(()=>he(O,N,ge)).then(_=>_&&Yp(_)).catch(_=>z(_,O,N))}const re=O=>r.go(O);let Fe;const Pe=new Set,ie={currentRoute:c,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:A,replace:b,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:q.add,isReady:Y,install(O){const N=this;O.component("RouterLink",Am),O.component("RouterView",Em),O.config.globalProperties.$router=N,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ns(c)}),Hn&&!Fe&&c.value===sn&&(Fe=!0,A(r.location).catch(he=>{}));const $={};for(const he in sn)Object.defineProperty($,he,{get:()=>c.value[he],enumerable:!0});O.provide(Ko,N),O.provide(Eu,Nl($)),O.provide(po,c);const K=O.unmount;Pe.add(O),O.unmount=function(){Pe.delete(O),Pe.size<1&&(l=sn,j&&j(),j=null,c.value=sn,Fe=!1,W=!1),K()}}};function oe(O){return O.reduce((N,$)=>N.then(()=>L($)),Promise.resolve())}return ie}function Om(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>cs(l,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>cs(l,c))||r.push(c))}return[n,s,r]}function Nm(t,e,n){let s=document.elementFromPoint(t,e);for(;s;){const r=n(s);if(r)return r;s=s.parentNode}}function Mm(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}let zn=!1,vr=!1;window.addEventListener("mouseup",()=>zn=!1);const Dm=pt({props:["tid"],data(){return{touches:[],pressMap:{}}},mounted(){},methods:{press(t){this.$emit("tapdown",t)},release(t){this.$emit("tapup",t)},mouseDown(t){if(vr)return;const e=this.tid;this.pressMap[e]||(this.press(e),zn=!0,this.pressMap[e]="M")},mouseUp(t){if(vr)return;const e=this.tid;zn&&this.pressMap[e]=="M"&&(this.release(e),delete this.pressMap[e],zn=!1)},mouseOver(t){const e=this.tid;zn&&!this.pressMap[e]&&(this.press(e),this.pressMap[e]="M")},mouseOut(t){const e=this.tid;zn&&this.pressMap[e]=="M"&&!Mm(t.relatedTarget,this.$el)&&(this.release(e),delete this.pressMap[e])},touchHandle(t){vr?t.preventDefault():t.type==="touchend"&&(vr=!0);const e=this.getTouchTargets(t.touches);return this.releaseTouches(e),this.touches=this.markTouches(e),!0},markTouches(t){const e=n=>this.touches.indexOf(n)>-1;return t.map(n=>{if(e(n))return n;if(!this.pressMap[n])return this.press(n),this.pressMap[n]="T",n}).filter(Boolean)},releaseTouches(t){const e=n=>t.indexOf(n)>-1;this.touches.forEach(n=>{e(n)||(this.release(n),delete this.pressMap[n])})},getTouchTargets(t){const e=n=>n.dataset&&n.dataset.tapitem;return[...t].map(n=>Nm(n.clientX,n.clientY,e)).filter(Boolean)},click(){}}}),Fm=["data-tapitem"];function Pm(t,e,n,s,r,i){return yt(),Ut("div",{class:"tap","data-tapitem":t.tid,onMousedown:e[0]||(e[0]=(...o)=>t.mouseDown&&t.mouseDown(...o)),onMouseover:e[1]||(e[1]=(...o)=>t.mouseOver&&t.mouseOver(...o)),onMouseout:e[2]||(e[2]=(...o)=>t.mouseOut&&t.mouseOut(...o)),onMouseup:e[3]||(e[3]=(...o)=>t.mouseUp&&t.mouseUp(...o)),onTouchstart:e[4]||(e[4]=(...o)=>t.touchHandle&&t.touchHandle(...o)),onTouchmove:e[5]||(e[5]=hp((...o)=>t.touchHandle&&t.touchHandle(...o),["prevent"])),onTouchend:e[6]||(e[6]=(...o)=>t.touchHandle&&t.touchHandle(...o))},[ad(t.$slots,"default",{},void 0)],40,Fm)}const Rm=Ln(Dm,[["render",Pm],["__scopeId","data-v-d1f3e89f"]]),Iu="15.1.2",Pc=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Rc=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),mo=(t,e)=>({startTime:e,type:"setValue",value:t}),Ou=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),Nu=(t,e,{startTime:n,target:s,timeConstant:r})=>s+(e-s)*Math.exp((n-t)/r),Yn=t=>t.type==="exponentialRampToValue",Ur=t=>t.type==="linearRampToValue",hn=t=>Yn(t)||Ur(t),Zo=t=>t.type==="setValue",Kt=t=>t.type==="setValueCurve",Wr=(t,e,n,s)=>{const r=t[e];return r===void 0?s:hn(r)||Zo(r)?r.value:Kt(r)?r.values[r.values.length-1]:Nu(n,Wr(t,e-1,r.startTime,s),r)},Vc=(t,e,n,s,r)=>n===void 0?[s.insertTime,r]:hn(n)?[n.endTime,n.value]:Zo(n)?[n.startTime,n.value]:Kt(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Wr(t,e-1,n.startTime,r)],go=t=>t.type==="cancelAndHold",_o=t=>t.type==="cancelScheduledValues",rn=t=>go(t)||_o(t)?t.cancelTime:Yn(t)||Ur(t)?t.endTime:t.startTime,Bc=(t,e,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((t-e)/(s-e)):0,Lc=(t,e,n,{endTime:s,value:r})=>n+(t-e)/(s-e)*(r-n),Vm=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},Bm=(t,{duration:e,startTime:n,values:s})=>{const r=(t-n)/e*(s.length-1);return Vm(s,r)},br=t=>t.type==="setTarget";class Lm{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=rn(e);if(go(e)||_o(e)){const s=this._automationEvents.findIndex(i=>_o(e)&&Kt(i)?i.startTime+i.duration>=n:rn(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),go(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&hn(r)){if(i!==void 0&&br(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Kt(i)?i.startTime+i.duration:rn(i),a=i===void 0?this._defaultValue:Kt(i)?i.values[i.values.length-1]:i.value,c=Yn(r)?Bc(n,o,a,r):Lc(n,o,a,r),l=Yn(r)?Pc(c,n,this._currenTime):Rc(c,n,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&br(i)&&this._automationEvents.push(mo(this.getValue(n),n)),i!==void 0&&Kt(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const f=l*h%1;u[h]=i.values[h-1]*(1-f)+i.values[h]*f}this._automationEvents[this._automationEvents.length-1]=Ou(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>rn(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Kt(r)&&rn(r)+r.duration>n)return!1;const i=Yn(e)?Pc(e.value,e.endTime,this._currenTime):Ur(e)?Rc(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(Kt(e)&&n+e.duration>rn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>rn(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];br(r)&&s.unshift(mo(Wr(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>rn(o)>e),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&br(i)&&(s===void 0||!hn(s)||s.insertTime>e))return Nu(e,Wr(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Zo(i)&&(s===void 0||!hn(s)))return i.value;if(i!==void 0&&Kt(i)&&(s===void 0||!hn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Bm(e,i):i.values[i.values.length-1];if(i!==void 0&&hn(i)&&(s===void 0||!hn(s)))return i.value;if(s!==void 0&&Yn(s)){const[o,a]=Vc(this._automationEvents,r,i,s,this._defaultValue);return Bc(e,o,a,s)}if(s!==void 0&&Ur(s)){const[o,a]=Vc(this._automationEvents,r,i,s,this._defaultValue);return Lc(e,o,a,s)}return this._defaultValue}}const Um=t=>({cancelTime:t,type:"cancelAndHold"}),Wm=t=>({cancelTime:t,type:"cancelScheduledValues"}),$m=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),qm=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),jm=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),Gm=()=>new DOMException("","AbortError"),Hm=t=>(e,n,[s,r,i],o)=>{t(e[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},zm=t=>(e,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Km=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},us=new WeakSet,Mu=new WeakMap,Yo=new WeakMap,Du=new WeakMap,Xo=new WeakMap,fi=new WeakMap,Fu=new WeakMap,yo=new WeakMap,vo=new WeakMap,bo=new WeakMap,Pu={construct(){return Pu}},Zm=t=>{try{const e=new Proxy(t,Pu);new e}catch{return!1}return!0},Uc=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Wc=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),r=s.match(Uc);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Uc)}return[n.join(";"),s]},$c=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qc=t=>{if(!Zm(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Ym=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>{let d=0;return(p,m,g={credentials:"omit"})=>{const y=u.get(p);if(y!==void 0&&y.has(m))return Promise.resolve();const C=l.get(p);if(C!==void 0){const b=C.get(m);if(b!==void 0)return b}const x=i(p),A=x.audioWorklet===void 0?r(m).then(([b,T])=>{const[E,S]=Wc(b,T),L=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return n(L)}).then(()=>{const b=f._AWGS.pop();if(b===void 0)throw new SyntaxError;s(x.currentTime,x.sampleRate,()=>b(class{},void 0,(T,E)=>{if(T.trim()==="")throw e();const S=vo.get(x);if(S!==void 0){if(S.has(T))throw e();qc(E),$c(E.parameterDescriptors),S.set(T,E)}else qc(E),$c(E.parameterDescriptors),vo.set(x,new Map([[T,E]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(t(h,h))]).then(([[b,T],E])=>{const S=d+1;d=S;const[L,P]=Wc(b,T),G=`${L};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,X=new Blob([G],{type:"application/javascript; charset=utf-8"}),q=URL.createObjectURL(X);return x.audioWorklet.addModule(q,g).then(()=>{if(a(x))return x;const W=o(x);return W.audioWorklet.addModule(q,g).then(()=>W)}).then(W=>{if(c===null)throw new SyntaxError;try{new c(W,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(q))});return C===void 0?l.set(p,new Map([[m,A]])):C.set(m,A),A.then(()=>{const b=u.get(p);b===void 0?u.set(p,new Set([m])):b.add(m)}).finally(()=>{const b=l.get(p);b!==void 0&&b.delete(m)}),A}},Ot=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},di=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},Ru=(t,e,n,s)=>{const r=Ot(t,e),i=di(r,o=>o[0]===n&&o[1]===s);return r.size===0&&t.delete(e),i},er=t=>Ot(Fu,t),hs=t=>{if(us.has(t))throw new Error("The AudioNode is already stored.");us.add(t),er(t).forEach(e=>e(!0))},Vu=t=>"port"in t,tr=t=>{if(!us.has(t))throw new Error("The AudioNode is not stored.");us.delete(t),er(t).forEach(e=>e(!1))},wo=(t,e)=>{!Vu(t)&&e.every(n=>n.size===0)&&tr(t)},Xm=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>{const d=new WeakMap;return(p,m,g,y,C)=>{const{activeInputs:x,passiveInputs:A}=i(m),{outputs:b}=i(p),T=a(p),E=S=>{const L=c(m),P=c(p);if(S){const V=Ru(A,p,g,y);t(x,p,V,!1),!C&&!h(p)&&n(P,L,g,y),f(m)&&hs(m)}else{const V=s(x,p,g,y);e(A,y,V,!1),!C&&!h(p)&&r(P,L,g,y);const M=o(m);if(M===0)u(m)&&wo(m,x);else{const j=d.get(m);j!==void 0&&clearTimeout(j),d.set(m,setTimeout(()=>{u(m)&&wo(m,x)},M*1e3))}}};return l(b,[m,g,y],S=>S[0]===m&&S[1]===g&&S[2]===y,!0)?(T.add(E),u(p)?t(x,p,[g,y,E],!0):e(A,y,[p,g,E],!0),!0):!1}},Jm=t=>(e,n,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,n,i]])):t(a,[r,n,i],c=>c[0]===r&&c[1]===n,o)},Qm=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},eg=t=>(e,n)=>{t(e).add(n)},tg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ng=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={...tg,...c},h=s(l,u),f=i(l)?e():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Xe=(t,e)=>t.context===e,sg=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},$r=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},jt=()=>new DOMException("","IndexSizeError"),Jo=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?jt():s}})(t.getChannelData)},rg={numberOfChannels:1},ig=(t,e,n,s,r,i,o,a)=>{let c=null;return class Bu{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...rg,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),Jo(p)):e($r,()=>$r(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===Bu.prototype||t.has(u)}}},rt=-34028234663852886e22,Qe=-rt,Xt=t=>us.has(t),og={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ag=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...og,...u},d=r(h,f),p=o(h),m=p?e():null;super(l,!1,d,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,Qe,rt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){hs(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Xt(this)&&tr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},cg=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Xe(h,u);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},lg=t=>"playbackRate"in t,ug=t=>"frequency"in t&&"gain"in t,hg=t=>"offset"in t,fg=t=>!("frequency"in t)&&"gain"in t,dg=t=>"detune"in t&&"frequency"in t,pg=t=>"pan"in t,et=t=>Ot(Mu,t),nr=t=>Ot(Du,t),To=(t,e)=>{const{activeInputs:n}=et(t);n.forEach(r=>r.forEach(([i])=>{e.includes(t)||To(i,[...e,t])}));const s=lg(t)?[t.playbackRate]:Vu(t)?Array.from(t.parameters.values()):ug(t)?[t.Q,t.detune,t.frequency,t.gain]:hg(t)?[t.offset]:fg(t)?[t.gain]:dg(t)?[t.detune,t.frequency]:pg(t)?[t.pan]:[];for(const r of s){const i=nr(r);i!==void 0&&i.activeInputs.forEach(([o])=>To(o,e))}Xt(t)&&tr(t)},Lu=t=>{To(t.destination,[])},mg=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),gg=(t,e,n,s,r,i,o,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw s();if(!mg(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:f}=u,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Lu(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},_g=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f=o(h),d=r(h,u,f),p=f?e(a):null;super(l,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},yg=t=>{const e=new WeakMap,n=async(s,r)=>{const i=r.destination;return e.set(r,i),await t(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},vg=(t,e,n,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const b=new Float32Array(1),T=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(l);let S=!1,L=[0,0,-1,0,1,0],P=[0,0,0];const V=()=>{if(S)return;S=!0;const X=s(l,256,9,0);X.onaudioprocess=({inputBuffer:q})=>{const W=[i(q,b,0),i(q,b,1),i(q,b,2),i(q,b,3),i(q,b,4),i(q,b,5)];W.some((Y,te)=>Y!==L[te])&&(u.setOrientation(...W),L=W);const z=[i(q,b,6),i(q,b,7),i(q,b,8)];z.some((Y,te)=>Y!==P[te])&&(u.setPosition(...z),P=z)},T.connect(X)},M=X=>q=>{q!==L[X]&&(L[X]=q,u.setOrientation(...L))},j=X=>q=>{q!==P[X]&&(P[X]=q,u.setPosition(...P))},G=(X,q,W)=>{const z=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q});z.connect(T,0,X),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return q}});const Y=t({context:c},E,z.offset,Qe,rt);return a(Y,"value",te=>()=>te.call(Y),te=>Q=>{try{te.call(Y,Q)}catch(re){if(re.code!==9)throw re}V(),E&&W(Q)}),Y.cancelAndHoldAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.cancelAndHoldAtTime),Y.cancelScheduledValues=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.cancelScheduledValues),Y.exponentialRampToValueAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.exponentialRampToValueAtTime),Y.linearRampToValueAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.linearRampToValueAtTime),Y.setTargetAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.setTargetAtTime),Y.setValueAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.setValueAtTime),Y.setValueCurveAtTime=(te=>E?()=>{throw r()}:(...Q)=>{const re=te.apply(Y,Q);return V(),re})(Y.setValueCurveAtTime),Y};return{forwardX:G(0,0,M(0)),forwardY:G(1,0,M(1)),forwardZ:G(2,-1,M(2)),positionX:G(6,0,j(0)),positionY:G(7,0,j(1)),positionZ:G(8,0,j(2)),upX:G(3,0,M(3)),upY:G(4,1,M(4)),upZ:G(5,0,M(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:m,positionY:g,positionZ:y,upX:C,upY:x,upZ:A}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return y},get upX(){return C},get upY(){return x},get upZ(){return A}}},qr=t=>"context"in t,sr=t=>qr(t[0]),Un=(t,e,n,s)=>{for(const r of t)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},jc=(t,e,[n,s],r)=>{Un(t,[e,n,s],i=>i[0]===e&&i[1]===n,r)},Gc=(t,[e,n,s],r)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,s]])):Un(i,[n,s],o=>o[0]===n,r)},ys=t=>"inputs"in t,jr=(t,e,n,s)=>{if(ys(e)){const r=e.inputs[s];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,s),[e,n,s]},Uu=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},bg=(t,e,n)=>di(t,s=>s[0]===e&&s[1]===n),Wu=(t,e)=>{if(!er(t).delete(e))throw new Error("Missing the expected event listener.")},$u=(t,e,n)=>{const s=Ot(t,e),r=di(s,i=>i[0]===n);return s.size===0&&t.delete(e),r},Gr=(t,e,n,s)=>{ys(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},Se=t=>Ot(Yo,t),zs=t=>Ot(Xo,t),Mn=t=>yo.has(t),Dr=t=>!us.has(t),Hc=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(t.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(t.destination)},a.start()}}),Yi=(t,e)=>{const n=new Map;for(const s of t)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>e(r,s))},Hr=t=>"context"in t,wg=t=>{const e=new Map;t.connect=(n=>(s,r=0,i=0)=>{const o=Hr(s)?n(s,r,i):n(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,r,i)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{Hr(o)?t.connect(o,c.output,c.input):t.connect(o,c.output)})})(t.disconnect)},Tg=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=nr(e),{outputs:o}=et(t),a=er(t),c=l=>{const u=Se(t),h=zs(e);if(l){const f=$u(i,t,n);jc(r,t,f,!1),!s&&!Mn(t)&&u.connect(h,n)}else{const f=bg(r,t,n);Gc(i,f,!1),!s&&!Mn(t)&&u.disconnect(h,n)}};return Un(o,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Xt(t)?jc(r,t,[n,c],!0):Gc(i,[t,n,c],!0),!0):!1},Cg=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=et(e),o=Uu(r[s],t,n);return o===null?[Ru(i,t,n,s)[2],!1]:[o[2],!0]},Ag=(t,e,n)=>{const{activeInputs:s,passiveInputs:r}=nr(e),i=Uu(s,t,n);return i===null?[$u(r,t,n)[1],!1]:[i[2],!0]},Qo=(t,e,n,s,r)=>{const[i,o]=Cg(t,n,s,r);if(i!==null&&(Wu(t,i),o&&!e&&!Mn(t)&&Gr(Se(t),Se(n),s,r)),Xt(n)){const{activeInputs:a}=et(n);wo(n,a)}},ea=(t,e,n,s)=>{const[r,i]=Ag(t,n,s);r!==null&&(Wu(t,r),i&&!e&&!Mn(t)&&Se(t).disconnect(zs(n),s))},Sg=(t,e)=>{const n=et(t),s=[];for(const r of n.outputs)sr(r)?Qo(t,e,...r):ea(t,e,...r),s.push(r[0]);return n.outputs.clear(),s},xg=(t,e,n)=>{const s=et(t),r=[];for(const i of s.outputs)i[1]===n&&(sr(i)?Qo(t,e,...i):ea(t,e,...i),r.push(i[0]),s.outputs.delete(i));return r},kg=(t,e,n,s,r)=>{const i=et(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(sr(o)?Qo(t,e,...o):ea(t,e,...o),i.outputs.delete(o),o[0]))},Eg=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>class extends l{constructor(y,C,x,A){super(x),this._context=y,this._nativeAudioNode=x;const b=u(y);h(b)&&n(Hc,()=>Hc(b,m))!==!0&&wg(x),Yo.set(this,x),Fu.set(this,new Set),y.state!=="closed"&&C&&hs(this),t(this,A,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,C=0,x=0){if(C<0||C>=this._nativeAudioNode.numberOfOutputs)throw r();const A=u(this._context),b=p(A);if(f(y)||d(y))throw i();if(qr(y)){const S=Se(y);try{const P=jr(this._nativeAudioNode,S,C,x),V=Dr(this);(b||V)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!V&&Dr(y)&&hs(y)}catch(P){throw P.code===12?i():P}if(e(this,y,C,x,b)){const P=c([this],y);Yi(P,s(b))}return y}const T=zs(y);if(T.name==="playbackRate"&&T.maxValue===1024)throw o();try{this._nativeAudioNode.connect(T,C),(b||Dr(this))&&this._nativeAudioNode.disconnect(T,C)}catch(S){throw S.code===12?i():S}if(Tg(this,y,C,b)){const S=c([this],y);Yi(S,s(b))}}disconnect(y,C,x){let A;const b=u(this._context),T=p(b);if(y===void 0)A=Sg(this,T);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw r();A=xg(this,T,y)}else{if(C!==void 0&&(C<0||C>=this.numberOfOutputs)||qr(y)&&x!==void 0&&(x<0||x>=y.numberOfInputs))throw r();if(A=kg(this,T,y,C,x),A.length===0)throw i()}for(const E of A){const S=c([this],E);Yi(S,a)}}},Ig=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g=null,y=null)=>{const C=m.value,x=new Lm(C),A=p?s(x):null,b={get defaultValue(){return C},get maxValue(){return g===null?m.maxValue:g},get minValue(){return y===null?m.minValue:y},get value(){return m.value},set value(T){m.value=T,b.setValueAtTime(T,d.context.currentTime)},cancelAndHoldAtTime(T){if(typeof m.cancelAndHoldAtTime=="function")A===null&&x.flush(d.context.currentTime),x.add(r(T)),m.cancelAndHoldAtTime(T);else{const E=Array.from(x).pop();A===null&&x.flush(d.context.currentTime),x.add(r(T));const S=Array.from(x).pop();m.cancelScheduledValues(T),E!==S&&S!==void 0&&(S.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(S.value,S.endTime):S.type==="linearRampToValue"?m.linearRampToValueAtTime(S.value,S.endTime):S.type==="setValue"?m.setValueAtTime(S.value,S.startTime):S.type==="setValueCurve"&&m.setValueCurveAtTime(S.values,S.startTime,S.duration))}return b},cancelScheduledValues(T){return A===null&&x.flush(d.context.currentTime),x.add(i(T)),m.cancelScheduledValues(T),b},exponentialRampToValueAtTime(T,E){if(T===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const S=d.context.currentTime;return A===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(C,S)),m.setValueAtTime(C,S)),x.add(o(T,E)),m.exponentialRampToValueAtTime(T,E),b},linearRampToValueAtTime(T,E){const S=d.context.currentTime;return A===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(C,S)),m.setValueAtTime(C,S)),x.add(a(T,E)),m.linearRampToValueAtTime(T,E),b},setTargetAtTime(T,E,S){return A===null&&x.flush(d.context.currentTime),x.add(c(T,E,S)),m.setTargetAtTime(T,E,S),b},setValueAtTime(T,E){return A===null&&x.flush(d.context.currentTime),x.add(l(T,E)),m.setValueAtTime(T,E),b},setValueCurveAtTime(T,E,S){const L=T instanceof Float32Array?T:new Float32Array(T);if(h!==null&&h.name==="webkitAudioContext"){const P=E+S,V=d.context.sampleRate,M=Math.ceil(E*V),j=Math.floor(P*V),G=j-M,X=new Float32Array(G);for(let W=0;W<G;W+=1){const z=(L.length-1)/S*((M+W)/V-E),Y=Math.floor(z),te=Math.ceil(z);X[W]=Y===te?L[Y]:(1-(z-Y))*L[Y]+(1-(te-z))*L[te]}A===null&&x.flush(d.context.currentTime),x.add(u(X,E,S)),m.setValueCurveAtTime(X,E,S);const q=j/V;q<P&&f(b,X[X.length-1],q),f(b,L[L.length-1],P)}else A===null&&x.flush(d.context.currentTime),x.add(u(L,E,S)),m.setValueCurveAtTime(L,E,S);return b}};return n.set(b,m),e.set(b,d),t(b,A),b},Og=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;e.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;e.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;e.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;e.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class qu{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,r)=>e.call(n,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ng={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Mg=(t,e,n,s,r,i,o,a,c,l,u,h,f,d)=>class extends e{constructor(m,g,y){var C;const x=a(m),A=c(x),b=u({...Ng,...y});f(b);const T=vo.get(x),E=T==null?void 0:T.get(g),S=A||x.state!=="closed"?x:(C=o(x))!==null&&C!==void 0?C:x,L=r(S,A?null:m.baseLatency,l,g,E,b),P=A?s(g,b,E):null;super(m,!0,L,P);const V=[];L.parameters.forEach((j,G)=>{const X=n(this,A,j);V.push([G,X])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new qu(V),A&&t(x,this);const{activeInputs:M}=i(this);h(L,M)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===g?m:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function zr(t,e,n,s,r){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,r);else{const i=t.getChannelData(s);if(e[n].byteLength===0)e[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const ju=(t,e,n,s,r)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,r):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],r)},Kr=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},Dg=(t,e)=>{const n=Ot(bo,t),s=Se(e);return Ot(n,s)},Fg=async(t,e,n,s,r,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,y)=>g+y,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=et(t),f=await Dg(n,t),d=Kr(s.numberOfInputs,s.channelCount),p=Kr(s.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce((g,y)=>({...g,[y]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&e!==null)for(let y=0;y<s.numberOfInputs;y+=1)for(let C=0;C<s.channelCount;C+=1)zr(e,d[y],C,C,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:y},C)=>{zr(e,m,y,c+C,g)});for(let y=0;y<s.numberOfInputs;y+=1)for(let C=0;C<r[y];C+=1)p[y][C].byteLength===0&&(p[y][C]=new Float32Array(128));try{const y=d.map((x,A)=>h.activeInputs[A].size===0?[]:x),C=o(g/n.sampleRate,n.sampleRate,()=>f.process(y,p,m));if(u!==null)for(let x=0,A=0;x<s.numberOfOutputs;x+=1){for(let b=0;b<r[x];b+=1)ju(u,p[x],b,A+b,g);A+=r[x]}if(!C)break}catch(y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},Pg=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>(g,y,C)=>{const x=new WeakMap;let A=null;const b=async(T,E)=>{let S=u(T),L=null;const P=Xe(S,E),V=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const M=V.reduce((q,W)=>q+W,0),j=r(E,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),G=[];for(let q=0;q<T.numberOfOutputs;q+=1)G.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[q]}));const X=o(E,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});X.connect=e.bind(null,G),X.disconnect=c.bind(null,G),L=[j,G,X]}else P||(S=new h(E,g));if(x.set(E,L===null?S:L[2]),L!==null){if(A===null){if(C===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=T.channelCount*T.numberOfInputs,z=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length,Y=W+z;A=Fg(T,Y===0?null:await(async()=>{const Q=new f(Y,Math.ceil(T.context.length/128)*128,E.sampleRate),re=[],Fe=[];for(let oe=0;oe<y.numberOfInputs;oe+=1)re.push(o(Q,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),Fe.push(r(Q,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const Pe=await Promise.all(Array.from(T.parameters.values()).map(async oe=>{const O=i(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await d(Q,oe,O.offset),O})),ie=s(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+z)});for(let oe=0;oe<y.numberOfInputs;oe+=1){re[oe].connect(Fe[oe]);for(let O=0;O<y.channelCount;O+=1)Fe[oe].connect(ie,O,oe*y.channelCount+O)}for(const[oe,O]of Pe.entries())O.connect(ie,0,W+oe),O.start(0);return ie.connect(Q.destination),await Promise.all(re.map(oe=>p(T,Q,oe))),m(Q)})(),E,y,V,C,l)}const M=await A,j=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,X,q]=L;M!==null&&(j.buffer=M,j.start(0)),j.connect(G);for(let W=0,z=0;W<T.numberOfOutputs;W+=1){const Y=X[W];for(let te=0;te<V[W];te+=1)G.connect(Y,z+te,te);z+=V[W]}return q}if(P)for(const[M,j]of T.parameters.entries())await t(E,j,S.parameters.get(M));else for(const[M,j]of T.parameters.entries())await d(E,j,S.parameters.get(M));return await p(T,E,S),S};return{render(T,E){a(E,T);const S=x.get(E);return S!==void 0?Promise.resolve(S):b(T,E)}}},Rg=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,m,g,y,C,x)=>class extends p{constructor(b,T){super(b,T),this._nativeContext=b,this._audioWorklet=t===void 0?void 0:{addModule:(E,S)=>t(this,E,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(b,T,E){return new n({length:T,numberOfChannels:b,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(b=6){return new i(this,{numberOfInputs:b})}createChannelSplitter(b=6){return new o(this,{numberOfOutputs:b})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(b=1){return new u(this,{maxDelayTime:b})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(b,T){return new d(this,{feedback:T,feedforward:b})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(b,T,E={disableNormalization:!1}){return new y(this,{...E,imag:T,real:b})}createStereoPanner(){return new C(this)}createWaveShaper(){return new x(this)}decodeAudioData(b,T,E){return l(this._nativeContext,b).then(S=>(typeof T=="function"&&T(S),S),S=>{throw typeof E=="function"&&E(S),S})}},Vg={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Bg=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...Vg,...u},d=r(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._Q=e(this,p,d.Q,Qe,rt),this._detune=e(this,p,d.detune,1200*Math.log2(Qe),-1200*Math.log2(Qe)),this._frequency=e(this,p,d.frequency,l.sampleRate/2,0),this._gain=e(this,p,d.gain,40*Math.log10(Qe),rt),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?s():f}if(l.length!==u.length||u.length!==h.length)throw s()}},Lg=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Xe(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Ug=(t,e)=>(n,s)=>{const r=e.get(n);if(r!==void 0)return r;const i=t.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},Wg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},$g=(t,e,n,s,r)=>class extends t{constructor(o,a){const c=s(o),l={...Wg,...a},u=n(c,l),h=r(c)?e():null;super(o,!1,u,h)}},qg=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},jg={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Gg=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u=i({...jg,...c}),h=n(l,u),f=r(l)?e():null;super(a,!1,h,f)}},Hg=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zg=t=>(e,n,s)=>t(n,e,s),Kg=t=>(e,n,s=0,r=0)=>{const i=e[s];if(i===void 0)throw t();return Hr(n)?i.connect(n,0,r):i.connect(n,0)},Zg=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},Yg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Xg=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...Yg,...l},f=s(u,h),d=i(u),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,d,f.offset,Qe,rt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){hs(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Xt(this)&&tr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},Jg=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Xe(h,u);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Qg=t=>e=>(t[0]=e,t[0]),e_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},t_=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u={...e_,...c},h=n(l,u),d=r(l)?e():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},n_=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,l)}return s.set(o,a),ys(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},s_=(t,e)=>(n,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,r)}catch(i){throw i.name==="SyntaxError"?t():i}},r_=()=>new DOMException("","DataCloneError"),zc=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},i_=(t,e,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=o(h)?h:i(h);if(r.has(f)){const p=n();return Promise.reject(p)}try{r.add(f)}catch{}return e(c,()=>c(d))?d.decodeAudioData(f).then(p=>(zc(f).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await zc(f)}catch{}},y=C=>{m(C),g()};try{d.decodeAudioData(f,C=>{typeof C.copyFromChannel!="function"&&(l(C),Jo(C)),t.add(C),g().then(()=>p(C))},C=>{y(C===null?s():C)})}catch(C){y(C)}})},o_=(t,e,n,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(e.delete(c),!f&&o(c)){const d=s(c),{outputs:p}=n(c);for(const m of p)if(sr(m)){const g=s(m[0]);t(d,g,m[1],m[2])}else{const g=r(m[0]);d.connect(g,m[1])}}}else e.set(c,u-l)},a_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},c_=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...a_,...l},f=s(u,h),d=i(u),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},l_=(t,e,n,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const h=Xe(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return o.set(l,u),h?await t(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},u_=t=>(e,n,s,r)=>t(e[r],i=>i[0]===n&&i[1]===s),h_=t=>(e,n)=>{t(e).delete(n)},f_=t=>"delayTime"in t,d_=(t,e,n)=>function s(r,i){const o=qr(i)?i:n(t,i);if(f_(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},wr=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},p_=t=>(e,n=void 0,s=void 0,r=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?wr(t,e,n).disconnect():Hr(n)?s===void 0?e.forEach(i=>i.disconnect(n)):r===void 0?wr(t,e,s).disconnect(n,0):wr(t,e,s).disconnect(n,0,r):s===void 0?e.forEach(i=>i.disconnect(n)):wr(t,e,s).disconnect(n,0),m_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},g_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...m_,...u},d=s(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._attack=e(this,p,d.attack),this._knee=e(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=e(this,p,d.ratio),this._release=e(this,p,d.release),this._threshold=e(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},__=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Xe(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},y_=()=>new DOMException("","EncodingError"),v_=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const r=t.document.head;if(r===null)s(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,h,f,d,p)=>{if(h===a||h===t.location.href&&f===1&&d===1)return l(),s(p),!1;if(c!==null)return c(u,h,f,d,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",r.appendChild(i)}}),b_=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=t(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},w_=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},T_=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},C_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},A_=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={...C_,...c},h=s(l,u),f=i(l),d=f?n():null;super(a,!1,h,d),this._gain=e(this,f,h.gain,Qe,rt)}get gain(){return this._gain}},S_=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Xe(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},x_=(t,e)=>n=>e(t,n),k_=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},E_=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},I_=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},O_=t=>e=>t.get(e),qe=()=>new DOMException("","InvalidStateError"),N_=t=>e=>{const n=t.get(e);if(n===void 0)throw qe();return n},M_=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},D_=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},pi=()=>new DOMException("","InvalidAccessError"),F_=t=>{t.getFrequencyResponse=(e=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw pi();return e.call(t,n,s,r)})(t.getFrequencyResponse)},P_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},R_=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u=r(l),h={...P_,...c},f=e(l,u?null:a.baseLatency,h),d=u?n(h.feedback,h.feedforward):null;super(a,!1,f,d),F_(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Gu=(t,e,n,s,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*l[d];for(let m=1;m<r;m+=1){const g=f-m&c-1;p+=n[m]*i[g],p-=t[m]*o[g]}for(let m=r;m<s;m+=1)p+=n[m]*i[f-m&c-1];for(let m=r;m<e;m+=1)p-=t[m]*o[f-m&c-1];i[f]=l[d],o[f]=p,f=f+1&c-1,u[d]=p}return f},V_=(t,e,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let p=0;p<d;p+=1){const m=t.getChannelData(p),g=f.getChannelData(p);u.fill(0),h.fill(0),Gu(r,o,i,a,c,u,h,0,l,m,g)}return f},B_=(t,e,n,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,d=e(u);const p=Xe(d,h);if(h.createIIRFilter===void 0?f=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const y=await r(g);return V_(y,h,i,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await s(u,h,d),d};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},L_=(t,e,n,s,r,i)=>o=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=n(a);for(const f of h)if(sr(f)){const d=s(f[0]);e(u,d,f[1],f[2])}else{const d=r(f[0]);u.disconnect(d,f[1])}}t.set(a,c)}else t.set(a,l+c)},U_=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},W_=(t,e)=>n=>t.has(n)||e(n),$_=(t,e)=>n=>t.has(n)||e(n),q_=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},j_=t=>e=>t!==null&&e instanceof t,G_=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,H_=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,z_=(t,e)=>n=>t(n)||e(n),K_=t=>e=>t!==null&&e instanceof t,Z_=t=>t!==null&&t.isSecureContext,Y_=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},X_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},J_=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const c={...X_,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Q_=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ey=(t,e,n)=>class extends t{constructor(r,i){const o=n(r),a=e(o,i);super(r,!0,a,null)}},ty=(t,e,n,s,r,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,fi.set(this,a),s(a)&&r.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ks=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},ny=(t,e)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,c,l),t(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(n,a,c),t(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(n.disconnect),n},Ee=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},Ue=(t,e)=>{Ee(t,e,"channelCount"),Ee(t,e,"channelCountMode"),Ee(t,e,"channelInterpretation")},Kc=t=>typeof t.getFloatTimeDomainData=="function",sy=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let r=0;r<s;r+=1)e[r]=(n[r]-128)*.0078125;return e}},ry=(t,e)=>(n,s)=>{const r=n.createAnalyser();if(Ue(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Ee(r,s,"fftSize"),Ee(r,s,"maxDecibels"),Ee(r,s,"minDecibels"),Ee(r,s,"smoothingTimeConstant"),t(Kc,()=>Kc(r))||sy(r),r},iy=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Ne=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},oy=t=>{t.start=(e=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw qe();e.call(t,s,r,i),n=!0}})(t.start)},ta=t=>{t.start=(e=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,r)})(t.start)},na=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},ay=(t,e,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=h.createBufferSource();return Ue(d,f),Ne(d,f,"playbackRate"),Ee(d,f,"buffer"),Ee(d,f,"loop"),Ee(d,f,"loopEnd"),Ee(d,f,"loopStart"),e(n,()=>n(h))||oy(d),e(s,()=>s(h))||c(d),e(r,()=>r(h))||l(d,h),e(i,()=>i(h))||ta(d),e(o,()=>o(h))||u(d,h),e(a,()=>a(h))||na(d),t(h,d),d},cy=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,ly=(t,e)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},uy=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,hy=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},fy=(t,e,n,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const y=f.get(m[1]);y!==void 0?m[1]=y:(m[1]=C=>{C.type==="error"?(Object.defineProperties(C,{type:{value:"processorerror"}}),g(C)):g(new ErrorEvent(m[0],{...C}))},f.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return hy(u),e(i,o,l,u)},Hu=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),dy=t=>new Promise((e,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(t)}),py=async(t,e)=>{const n=await dy(e);return new t(n)},my=(t,e,n,s)=>{let r=bo.get(t);r===void 0&&(r=new WeakMap,bo.set(t,r));const i=py(n,s);return r.set(e,i),i},gy=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some(w=>w<1))throw c();if(y.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const C=g.channelCount*g.numberOfInputs,x=y.reduce((w,k)=>w+k,0),A=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(C+A>6||x>6)throw c();const b=new MessageChannel,T=[],E=[];for(let w=0;w<g.numberOfInputs;w+=1)T.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),E.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:w,maxValue:k,minValue:I,name:F}of m.parameterDescriptors){const R=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[F]!==void 0?g.parameterData[F]:w===void 0?0:w});Object.defineProperties(R.offset,{defaultValue:{get:()=>w===void 0?0:w},maxValue:{get:()=>k===void 0?Qe:k},minValue:{get:()=>I===void 0?rt:I}}),S.push(R)}const L=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,C+A)}),P=Hu(p,d.sampleRate),V=a(d,P,C+A,Math.max(1,x)),M=r(d,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),j=[];for(let w=0;w<g.numberOfOutputs;w+=1)j.push(s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[w]}));for(let w=0;w<g.numberOfInputs;w+=1){T[w].connect(E[w]);for(let k=0;k<g.channelCount;k+=1)E[w].connect(L,k,w*g.channelCount+k)}const G=new qu(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:w},k)=>{const I=S[k];return I.connect(L,0,C+k),I.start(0),[w,I.offset]}));L.connect(V);let X=g.channelInterpretation,q=null;const W=g.numberOfOutputs===0?[V]:j,z={get bufferSize(){return P},get channelCount(){return g.channelCount},set channelCount(w){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(w){throw n()},get channelInterpretation(){return X},set channelInterpretation(w){for(const k of T)k.channelInterpretation=w;X=w},get context(){return V.context},get inputs(){return T},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(w){typeof q=="function"&&z.removeEventListener("processorerror",q),q=typeof w=="function"?w:null,typeof q=="function"&&z.addEventListener("processorerror",q)},get parameters(){return G},get port(){return b.port2},addEventListener(...w){return V.addEventListener(w[0],w[1],w[2])},connect:t.bind(null,W),disconnect:l.bind(null,W),dispatchEvent(...w){return V.dispatchEvent(w[0])},removeEventListener(...w){return V.removeEventListener(w[0],w[1],w[2])}},Y=new Map;b.port1.addEventListener=(w=>(...k)=>{if(k[0]==="message"){const I=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(I!==null){const F=Y.get(k[1]);F!==void 0?k[1]=F:(k[1]=R=>{u(d.currentTime,d.sampleRate,()=>I(R))},Y.set(I,k[1]))}}return w.call(b.port1,k[0],k[1],k[2])})(b.port1.addEventListener),b.port1.removeEventListener=(w=>(...k)=>{if(k[0]==="message"){const I=Y.get(k[1]);I!==void 0&&(Y.delete(k[1]),k[1]=I)}return w.call(b.port1,k[0],k[1],k[2])})(b.port1.removeEventListener);let te=null;Object.defineProperty(b.port1,"onmessage",{get:()=>te,set:w=>{typeof te=="function"&&b.port1.removeEventListener("message",te),te=typeof w=="function"?w:null,typeof te=="function"&&(b.port1.addEventListener("message",te),b.port1.start())}}),m.prototype.port=b.port1;let Q=null;my(d,z,m,g).then(w=>Q=w);const Fe=Kr(g.numberOfInputs,g.channelCount),Pe=Kr(g.numberOfOutputs,y),ie=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((w,{name:k})=>({...w,[k]:new Float32Array(128)}),{});let oe=!0;const O=()=>{g.numberOfOutputs>0&&V.disconnect(M);for(let w=0,k=0;w<g.numberOfOutputs;w+=1){const I=j[w];for(let F=0;F<y[w];F+=1)M.disconnect(I,k+F,F);k+=y[w]}},N=new Map;V.onaudioprocess=({inputBuffer:w,outputBuffer:k})=>{if(Q!==null){const I=h(z);for(let F=0;F<P;F+=128){for(let R=0;R<g.numberOfInputs;R+=1)for(let D=0;D<g.channelCount;D+=1)zr(w,Fe[R],D,D,F);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:R},D)=>{zr(w,ie,R,C+D,F)});for(let R=0;R<g.numberOfInputs;R+=1)for(let D=0;D<y[R];D+=1)Pe[R][D].byteLength===0&&(Pe[R][D]=new Float32Array(128));try{const R=Fe.map((U,B)=>{if(I[B].size>0)return N.set(B,P/128),U;const ee=N.get(B);return ee===void 0?[]:(U.every(J=>J.every(ne=>ne===0))&&(ee===1?N.delete(B):N.set(B,ee-1)),U)});oe=u(d.currentTime+F/d.sampleRate,d.sampleRate,()=>Q.process(R,Pe,ie));for(let U=0,B=0;U<g.numberOfOutputs;U+=1){for(let H=0;H<y[U];H+=1)ju(k,Pe[U],H,B+H,F);B+=y[U]}}catch(R){oe=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:R.colno,filename:R.filename,lineno:R.lineno,message:R.message}))}if(!oe){for(let R=0;R<g.numberOfInputs;R+=1){T[R].disconnect(E[R]);for(let D=0;D<g.channelCount;D+=1)E[F].disconnect(L,D,R*g.channelCount+D)}if(m.parameterDescriptors!==void 0){const R=m.parameterDescriptors.length;for(let D=0;D<R;D+=1){const U=S[D];U.disconnect(L,0,C+D),U.stop()}}L.disconnect(V),V.onaudioprocess=null,$?O():ge();break}}}};let $=!1;const K=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>V.connect(K).connect(d.destination),ge=()=>{V.disconnect(K),K.disconnect()},_=()=>{if(oe){ge(),g.numberOfOutputs>0&&V.connect(M);for(let w=0,k=0;w<g.numberOfOutputs;w+=1){const I=j[w];for(let F=0;F<y[w];F+=1)M.connect(I,k+F,F);k+=y[w]}}$=!0},v=()=>{oe&&(he(),O()),$=!1};return he(),f(z,_,v)},zu=(t,e)=>{const n=t.createBiquadFilter();return Ue(n,e),Ne(n,e,"Q"),Ne(n,e,"detune"),Ne(n,e,"frequency"),Ne(n,e,"gain"),Ee(n,e,"type"),n},_y=(t,e)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,r),Ue(r,s),r},yy=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw qe()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw qe()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw qe()}})},rr=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Ue(n,e),yy(n),n},vy=(t,e,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Ue(a,o),Ne(a,o,"offset"),e(s,()=>s(i))||ta(a),e(r,()=>r(i))||na(a),t(i,a),a},vs=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),by=(t,e,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),d=()=>c.disconnect(l);return t(r,c),s(vs(h,l),f,d)},wy=(t,e)=>(n,s)=>{const r=n.createConvolver();if(Ue(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Ee(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw t();return i.call(r,o)}),s.channelCountMode==="max"))throw t();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw t();return i.call(r,o)}),r},Ku=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Ue(n,e),Ne(n,e,"delayTime"),n},Ty=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Ue(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ne(s,n,"attack"),Ne(s,n,"knee"),Ne(s,n,"ratio"),Ne(s,n,"release"),Ne(s,n,"threshold"),s},lt=(t,e)=>{const n=t.createGain();return Ue(n,e),Ne(n,e,"gain"),n},Cy=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return Ue(r,s),r};function Ay(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Sy(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Zc(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Sy(n,e),n[0]+=t[s];return n}const xy=(t,e,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Hu(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=d.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(f[0]===0)throw e();if(m===0||m>20)throw s();if(d[0]===0)throw e();if(f[0]!==1){for(let S=0;S<m;S+=1)d[S]/=f[0];for(let S=1;S<p;S+=1)f[S]/=f[0]}const y=n(r,h,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=c;const C=32,x=[],A=[],b=[];for(let S=0;S<o;S+=1){x.push(0);const L=new Float32Array(C),P=new Float32Array(C);L.fill(0),P.fill(0),A.push(L),b.push(P)}y.onaudioprocess=S=>{const L=S.inputBuffer,P=S.outputBuffer,V=L.numberOfChannels;for(let M=0;M<V;M+=1){const j=L.getChannelData(M),G=P.getChannelData(M);x[M]=Gu(f,p,d,m,g,A[M],b[M],x[M],C,j,G)}};const T=r.sampleRate/2;return vs({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(S){y.channelCount=S},get channelCountMode(){return y.channelCountMode},set channelCountMode(S){y.channelCountMode=S},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(S){y.channelInterpretation=S},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...S){return y.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return y.dispatchEvent(S[0])},getFrequencyResponse(S,L,P){if(S.length!==L.length||L.length!==P.length)throw t();const V=S.length;for(let M=0;M<V;M+=1){const j=-Math.PI*(S[M]/T),G=[Math.cos(j),Math.sin(j)],X=Zc(d,G),q=Zc(f,G),W=Ay(X,q);L[M]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),P[M]=Math.atan2(W[1],W[0])}},removeEventListener(...S){return y.removeEventListener(S[0],S[1],S[2])}},y)},ky=(t,e)=>t.createMediaElementSource(e.mediaElement),Ey=(t,e)=>{const n=t.createMediaStreamDestination();return Ue(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Iy=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},Oy=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},Ny=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,My=(t,e,n,s,r,i)=>(o,a)=>{const c=o.createOscillator();return Ue(c,a),Ne(c,a,"detune"),Ne(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ee(c,a,"type"),e(n,()=>n(o))||ta(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||na(c),t(o,c),c},Dy=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(Ue(s,n),Ne(s,n,"orientationX"),Ne(s,n,"orientationY"),Ne(s,n,"orientationZ"),Ne(s,n,"positionX"),Ne(s,n,"positionY"),Ne(s,n,"positionZ"),Ee(s,n,"coneInnerAngle"),Ee(s,n,"coneOuterAngle"),Ee(s,n,"coneOuterGain"),Ee(s,n,"distanceModel"),Ee(s,n,"maxDistance"),Ee(s,n,"panningModel"),Ee(s,n,"refDistance"),Ee(s,n,"rolloffFactor"),s)},Fy=(t,e,n,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:m,orientationX:g,orientationY:y,orientationZ:C,panningModel:x,positionX:A,positionY:b,positionZ:T,refDistance:E,rolloffFactor:S,...L})=>{const P=u.createPanner();if(L.channelCount>2||L.channelCountMode==="max")throw o();Ue(P,L);const V={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=n(u,{...V,channelInterpretation:"speakers",numberOfInputs:6}),j=s(u,{...L,gain:1}),G=s(u,{...V,gain:1}),X=s(u,{...V,gain:0}),q=s(u,{...V,gain:0}),W=s(u,{...V,gain:0}),z=s(u,{...V,gain:0}),Y=s(u,{...V,gain:0}),te=r(u,256,6,1),Q=i(u,{...V,curve:new Float32Array([1,1]),oversample:"none"});let re=[g,y,C],Fe=[A,b,T];const Pe=new Float32Array(1);te.onaudioprocess=({inputBuffer:N})=>{const $=[c(N,Pe,0),c(N,Pe,1),c(N,Pe,2)];$.some((he,ge)=>he!==re[ge])&&(P.setOrientation(...$),re=$);const K=[c(N,Pe,3),c(N,Pe,4),c(N,Pe,5)];K.some((he,ge)=>he!==Fe[ge])&&(P.setPosition(...K),Fe=K)},Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const ie={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(N){if(N>2)throw o();j.channelCount=N,P.channelCount=N},get channelCountMode(){return P.channelCountMode},set channelCountMode(N){if(N==="max")throw o();j.channelCountMode=N,P.channelCountMode=N},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(N){j.channelInterpretation=N,P.channelInterpretation=N},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(N){P.coneInnerAngle=N},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(N){P.coneOuterAngle=N},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(N){if(N<0||N>1)throw e();P.coneOuterGain=N},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(N){P.distanceModel=N},get inputs(){return[j]},get maxDistance(){return P.maxDistance},set maxDistance(N){if(N<0)throw new RangeError;P.maxDistance=N},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return G.gain},get orientationY(){return X.gain},get orientationZ(){return q.gain},get panningModel(){return P.panningModel},set panningModel(N){P.panningModel=N},get positionX(){return W.gain},get positionY(){return z.gain},get positionZ(){return Y.gain},get refDistance(){return P.refDistance},set refDistance(N){if(N<0)throw new RangeError;P.refDistance=N},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(N){if(N<0)throw new RangeError;P.rolloffFactor=N},addEventListener(...N){return j.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return j.dispatchEvent(N[0])},removeEventListener(...N){return j.removeEventListener(N[0],N[1],N[2])}};h!==ie.coneInnerAngle&&(ie.coneInnerAngle=h),f!==ie.coneOuterAngle&&(ie.coneOuterAngle=f),d!==ie.coneOuterGain&&(ie.coneOuterGain=d),p!==ie.distanceModel&&(ie.distanceModel=p),m!==ie.maxDistance&&(ie.maxDistance=m),g!==ie.orientationX.value&&(ie.orientationX.value=g),y!==ie.orientationY.value&&(ie.orientationY.value=y),C!==ie.orientationZ.value&&(ie.orientationZ.value=C),x!==ie.panningModel&&(ie.panningModel=x),A!==ie.positionX.value&&(ie.positionX.value=A),b!==ie.positionY.value&&(ie.positionY.value=b),T!==ie.positionZ.value&&(ie.positionZ.value=T),E!==ie.refDistance&&(ie.refDistance=E),S!==ie.rolloffFactor&&(ie.rolloffFactor=S),(re[0]!==1||re[1]!==0||re[2]!==0)&&P.setOrientation(...re),(Fe[0]!==0||Fe[1]!==0||Fe[2]!==0)&&P.setPosition(...Fe);const oe=()=>{j.connect(P),t(j,Q,0,0),Q.connect(G).connect(M,0,0),Q.connect(X).connect(M,0,1),Q.connect(q).connect(M,0,2),Q.connect(W).connect(M,0,3),Q.connect(z).connect(M,0,4),Q.connect(Y).connect(M,0,5),M.connect(te).connect(u.destination)},O=()=>{j.disconnect(P),a(j,Q,0,0),Q.disconnect(G),G.disconnect(M),Q.disconnect(X),X.disconnect(M),Q.disconnect(q),q.disconnect(M),Q.disconnect(W),W.disconnect(M),Q.disconnect(z),z.disconnect(M),Q.disconnect(Y),Y.disconnect(M),M.disconnect(te),te.disconnect(u.destination)};return l(vs(ie,P),oe,O)},Py=t=>(e,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},ir=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Ry=(t,e)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const i=n.createStereoPanner();return Ue(i,s),Ne(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Vy=(t,e,n,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,y)=>{const C=new Float32Array(16385),x=new Float32Array(16385);for(let L=0;L<16385;L+=1){const P=L/16384*c;C[L]=Math.cos(P),x[L]=Math.sin(P)}const A=n(p,{...l,gain:0}),b=s(p,{...u,curve:C}),T=s(p,{...u,curve:a}),E=n(p,{...l,gain:0}),S=s(p,{...u,curve:x});return{connectGraph(){m.connect(A),m.connect(T.inputs===void 0?T:T.inputs[0]),m.connect(E),T.connect(g),g.connect(b.inputs===void 0?b:b.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),b.connect(A.gain),S.connect(E.gain),A.connect(y,0,0),E.connect(y,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(T.inputs===void 0?T:T.inputs[0]),m.disconnect(E),T.disconnect(g),g.disconnect(b.inputs===void 0?b:b.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),b.disconnect(A.gain),S.disconnect(E.gain),A.disconnect(y,0,0),E.disconnect(y,0,1)}}},f=(p,m,g,y)=>{const C=new Float32Array(16385),x=new Float32Array(16385),A=new Float32Array(16385),b=new Float32Array(16385),T=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>T){const z=(W-T)/(16384-T)*c;C[W]=Math.cos(z),x[W]=Math.sin(z),A[W]=0,b[W]=1}else{const z=W/(16384-T)*c;C[W]=1,x[W]=0,A[W]=Math.cos(z),b[W]=Math.sin(z)}const E=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=n(p,{...l,gain:0}),L=s(p,{...u,curve:C}),P=n(p,{...l,gain:0}),V=s(p,{...u,curve:x}),M=s(p,{...u,curve:a}),j=n(p,{...l,gain:0}),G=s(p,{...u,curve:A}),X=n(p,{...l,gain:0}),q=s(p,{...u,curve:b});return{connectGraph(){m.connect(E),m.connect(M.inputs===void 0?M:M.inputs[0]),E.connect(S,0),E.connect(P,0),E.connect(j,1),E.connect(X,1),M.connect(g),g.connect(L.inputs===void 0?L:L.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),g.connect(G.inputs===void 0?G:G.inputs[0]),g.connect(q.inputs===void 0?q:q.inputs[0]),L.connect(S.gain),V.connect(P.gain),G.connect(j.gain),q.connect(X.gain),S.connect(y,0,0),j.connect(y,0,0),P.connect(y,0,1),X.connect(y,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(M.inputs===void 0?M:M.inputs[0]),E.disconnect(S,0),E.disconnect(P,0),E.disconnect(j,1),E.disconnect(X,1),M.disconnect(g),g.disconnect(L.inputs===void 0?L:L.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),g.disconnect(G.inputs===void 0?G:G.inputs[0]),g.disconnect(q.inputs===void 0?q:q.inputs[0]),L.disconnect(S.gain),V.disconnect(P.gain),G.disconnect(j.gain),q.disconnect(X.gain),S.disconnect(y,0,0),j.disconnect(y,0,0),P.disconnect(y,0,1),X.disconnect(y,0,1)}}},d=(p,m,g,y,C)=>{if(m===1)return h(p,g,y,C);if(m===2)return f(p,g,y,C);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:y,...C})=>{if(g==="max")throw r();const x=t(p,{...C,channelCount:1,channelCountMode:g,numberOfInputs:2}),A=n(p,{...C,channelCount:m,channelCountMode:g,gain:1}),b=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:T,disconnectGraph:E}=d(p,m,A,b,x);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(M){A.channelCount!==M&&(L&&E(),{connectGraph:T,disconnectGraph:E}=d(p,M,A,b,x),L&&T()),A.channelCount=M},get channelCountMode(){return A.channelCountMode},set channelCountMode(M){if(M==="clamped-max"||M==="max")throw r();A.channelCountMode=M},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(M){A.channelInterpretation=M},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return b.gain},addEventListener(...M){return A.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return A.dispatchEvent(M[0])},removeEventListener(...M){return A.removeEventListener(M[0],M[1],M[2])}};let L=!1;const P=()=>{T(),L=!0},V=()=>{E(),L=!1};return i(vs(S,x),P,V)}},By=(t,e,n,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Ue(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Ee(l,{curve:u},"curve"),Ee(l,c,"oversample");let h=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(s(g)&&h===null?h=t(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{f=!0,s(l.curve)&&(h=t(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},Ly=(t,e,n,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();Ue(l,c),Ue(u,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let m=null,g=!1,y=null;const C={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(b){h.channelCount=b,f.channelCount=b,l.channelCount=b,d.channelCount=b,u.channelCount=b,p.channelCount=b},get channelCountMode(){return l.channelCountMode},set channelCountMode(b){h.channelCountMode=b,f.channelCountMode=b,l.channelCountMode=b,d.channelCountMode=b,u.channelCountMode=b,p.channelCountMode=b},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(b){h.channelInterpretation=b,f.channelInterpretation=b,l.channelInterpretation=b,d.channelInterpretation=b,u.channelInterpretation=b,p.channelInterpretation=b},get context(){return l.context},get curve(){return y},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)l.curve=b,u.curve=b;else{const T=b.length,E=new Float32Array(T+2-T%2),S=new Float32Array(T+2-T%2);E[0]=b[0],S[0]=-b[T-1];const L=Math.ceil((T+1)/2),P=(T+1)/2-1;for(let V=1;V<L;V+=1){const M=V/L*P,j=Math.floor(M),G=Math.ceil(M);E[V]=j===G?b[j]:(1-(M-j))*b[j]+(1-(G-M))*b[G],S[V]=j===G?-b[T-1-j]:-((1-(M-j))*b[T-1-j])-(1-(G-M))*b[T-1-G]}E[L]=T%2===1?b[L-1]:(b[L-2]+b[L-1])/2,l.curve=E,u.curve=S}y=b,g&&(s(y)&&m===null?m=t(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(b){l.oversample=b,u.oversample=b},addEventListener(...b){return h.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return h.dispatchEvent(b[0])},removeEventListener(...b){return h.removeEventListener(b[0],b[1],b[2])}};o!==null&&(C.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==C.oversample&&(C.oversample=a);const x=()=>{h.connect(l).connect(d),h.connect(f).connect(u).connect(p).connect(d),g=!0,s(y)&&(m=t(i,h))},A=()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(d),g=!1,m!==null&&(m(),m=null)};return r(vs(C,d),x,A)},tt=()=>new DOMException("","NotSupportedError"),Uy={numberOfChannels:1},Wy=(t,e,n,s,r)=>class extends t{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...Uy,...l},d=s(h,u,f);e(Ks,()=>Ks(d))||d.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(d,h),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Lu(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},$y={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},qy=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...$y,...l},f=n(u,h),d=i(u),p=d?s():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,d,f.detune,153600,-153600),this._frequency=e(this,d,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){hs(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Xt(this)&&tr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},jy=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=n(u);const d=Xe(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await t(h,u.detune,f.detune),await t(h,u.frequency,f.frequency)):(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},Gy={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Hy=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...Gy,...l},f=n(u,h),d=i(u),p=d?s():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,d,f.orientationX,Qe,rt),this._orientationY=e(this,d,f.orientationY,Qe,rt),this._orientationZ=e(this,d,f.orientationZ,Qe,rt),this._positionX=e(this,d,f.positionX,Qe,rt),this._positionY=e(this,d,f.positionY,Qe,rt),this._positionZ=e(this,d,f.positionZ,Qe,rt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},zy=(t,e,n,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(d,p)=>{let m=null,g=i(d);const y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},C={...y,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},x=Xe(g,p);if("bufferSize"in g)m=s(p,{...y,gain:1});else if(!x){const A={...C,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,A)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new o(6,d.context.length,p.sampleRate),M=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});M.connect(V.destination),h=(async()=>{const j=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(G,X)=>{const q=n(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X===0?1:0});return await a(V,G,q.offset),q}));for(let G=0;G<6;G+=1)j[G].connect(M,0,G),j[G].start(0);return l(V)})()}const A=await h,b=s(p,{...y,gain:1});await c(d,p,b);const T=[];for(let V=0;V<A.numberOfChannels;V+=1)T.push(A.getChannelData(V));let E=[T[0][0],T[1][0],T[2][0]],S=[T[3][0],T[4][0],T[5][0]],L=s(p,{...y,gain:1}),P=r(p,{...C,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:S[0],positionY:S[1],positionZ:S[2]});b.connect(L).connect(P.inputs[0]),P.connect(m);for(let V=128;V<A.length;V+=128){const M=[T[0][V],T[1][V],T[2][V]],j=[T[3][V],T[4][V],T[5][V]];if(M.some((G,X)=>G!==E[X])||j.some((G,X)=>G!==S[X])){E=M,S=j;const G=V/p.sampleRate;L.gain.setValueAtTime(0,G),L=s(p,{...y,gain:0}),P=r(p,{...C,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),L.gain.setValueAtTime(1,G),b.connect(L).connect(P.inputs[0]),P.connect(m)}}return m}return x?(await t(p,d.orientationX,g.orientationX),await t(p,d.orientationY,g.orientationY),await t(p,d.orientationZ,g.orientationZ),await t(p,d.positionX,g.positionX),await t(p,d.positionY,g.positionY),await t(p,d.positionZ,g.positionZ)):(await a(p,d.orientationX,g.orientationX),await a(p,d.orientationY,g.orientationY),await a(p,d.orientationZ,g.orientationZ),await a(p,d.positionX,g.positionX),await a(p,d.positionY,g.positionY),await a(p,d.positionZ,g.positionZ)),ys(g)?await c(d,p,g.inputs[0]):await c(d,p,g),g};return{render(d,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):f(d,p)}}},Ky={disableNormalization:!1},Zy=(t,e,n,s)=>class Zu{constructor(i,o){const a=e(i),c=s({...Ky,...o}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Zu.prototype||n.has(i)}},Yy=(t,e)=>(n,s,r)=>(t(s).replay(r),e(s,n,r)),Xy=(t,e,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,r),d=s.context.destination;!n(l)&&(s!==d||!n(s))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},Jy=(t,e,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,r);n(a)||u.connect(i,c)}))},Qy=(t,e,n,s)=>r=>t(Ks,()=>Ks(r))?Promise.resolve(t(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),ev=t=>(e,n)=>{t.set(e,n)},tv=t=>(e,n)=>t.set(e,n),nv=(t,e,n,s,r,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>n(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Jo(u)):e(i,()=>i(u))||a(u),t.add(u),u)),sv={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},rv=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={...sv,...c},h=n(l,u),f=i(l),d=f?s():null;super(a,!1,h,d),this._pan=e(this,f,h.pan)}get pan(){return this._pan}},iv=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Xe(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.pan,l.pan):await s(c,a.pan,l.pan),ys(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ov=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},av=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new t(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},cv=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},lv=()=>new DOMException("","UnknownError"),uv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},hv=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...uv,...l},f=n(u,h),p=i(u)?s():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},fv=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,l)}return s.set(o,a),ys(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},dv=()=>typeof window>"u"?null:window,pv=(t,e)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},mv=t=>e=>{e.copyFromChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},gv=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},_v=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Yu=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Xu=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},or=(t,e,n,s)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(i),set:s(o)})},yv=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),vv=t=>({...t,channelCount:t.numberOfOutputs}),bv=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Ju=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;Ju(t,e,n+1e-7)}},wv=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Tv=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},Cv=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},sa=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Qu=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},ra=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Av=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},Sv=t=>{t.start=(e=>(n=0,s=0,r)=>{const i=t.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},eh=(t,e)=>{const n=e.createGain();t.connect(n);const s=(r=>()=>{r.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),vs(t,n),t.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(t,o),i=!0}})(t.stop)},bs=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},xv=Hm(Un),kv=Jm(Un),Ev=u_(di),th=new WeakMap,Iv=E_(th),Nt=Ug(new Map,new WeakMap),$t=dv(),nh=ry(Nt,jt),ia=k_(et),ze=Xy(et,ia,Mn),Ov=sg(nh,Se,ze),Ce=N_(fi),Qt=Ny($t),Te=K_(Qt),sh=new WeakMap,rh=b_(bs),ar=cy($t),oa=j_(ar),aa=G_($t),ih=H_($t),Zs=uy($t),De=Eg(zm(Mu),Xm(xv,kv,jr,Ev,Gr,et,Iv,er,Se,Un,Xt,Mn,Dr),Nt,L_(yo,Gr,et,Se,zs,Xt),jt,pi,tt,o_(jr,yo,et,Se,zs,Ce,Xt,Te),d_(sh,et,Ot),rh,Ce,oa,aa,ih,Te,Zs),Nv=ng(De,Ov,jt,nh,Ce,Te),ca=new WeakSet,Yc=iy($t),oh=Qg(new Uint32Array(1)),la=pv(oh,jt),ua=mv(oh),ah=ig(ca,Nt,tt,Yc,Qt,ov(Yc),la,ua),mi=Qm(lt),ch=Jy(ia,nr,Mn),Gt=zg(ch),ws=ay(mi,Nt,wv,Tv,Cv,sa,Qu,ra,Sv,gv(or),eh),Ht=Yy(I_(nr),ch),Mv=cg(Gt,ws,Se,Ht,ze),Mt=Ig(Km(Du),sh,Xo,Og,Um,Wm,$m,qm,jm,mo,Ou,ar,Ju),Dv=ag(De,Mv,Mt,qe,ws,Ce,Te,bs),Fv=_g(De,yg,jt,qe,ly(lt,or),Ce,Te,ze),Pv=Lg(Gt,zu,Se,Ht,ze),Wn=tv(th),Rv=Bg(De,Mt,Pv,pi,zu,Ce,Te,Wn),Tn=ny(Un,aa),Vv=_v(qe,Tn),Cn=_y(ar,Vv),Bv=qg(Cn,Se,ze),Lv=$g(De,Bv,Cn,Ce,Te),Uv=Hg(rr,Se,ze),Wv=Gg(De,Uv,rr,Ce,Te,vv),$v=by(mi,ws,lt,Tn),Ts=vy(mi,Nt,$v,sa,ra),qv=Jg(Gt,Ts,Se,Ht,ze),jv=Xg(De,Mt,qv,Ts,Ce,Te,bs),lh=wy(tt,or),Gv=n_(lh,Se,ze),Hv=t_(De,Gv,lh,Ce,Te,Wn),zv=l_(Gt,Ku,Se,Ht,ze),Kv=c_(De,Mt,zv,Ku,Ce,Te,Wn),uh=Ty(tt),Zv=__(Gt,uh,Se,Ht,ze),Yv=g_(De,Mt,Zv,uh,tt,Ce,Te,Wn),Xv=S_(Gt,lt,Se,Ht,ze),Jv=A_(De,Mt,Xv,lt,Ce,Te),Qv=xy(pi,qe,ir,tt),gi=Qy(Nt,lt,ir,cv(lt,Qt)),e0=B_(ws,Se,Qt,ze,gi),t0=Cy(Qv),n0=R_(De,t0,e0,Ce,Te,Wn),s0=vg(Mt,Cn,Ts,ir,tt,Yu,Te,or),hh=new WeakMap,r0=ty(Fv,s0,rh,Te,hh,bs),fh=My(mi,Nt,sa,Qu,ra,eh),i0=jy(Gt,fh,Se,Ht,ze),o0=qy(De,Mt,fh,i0,Ce,Te,bs),dh=Zg(ws),a0=Ly(dh,qe,lt,Xu,Tn),_i=By(dh,qe,a0,Xu,Tn,ar,or),c0=Fy(jr,qe,Cn,lt,ir,_i,tt,Gr,Yu,Tn),ph=Dy(c0),l0=zy(Gt,Cn,Ts,lt,ph,Se,Qt,Ht,ze,gi),u0=Hy(De,Mt,ph,l0,Ce,Te,Wn),h0=Py(jt),f0=Zy(h0,Ce,new WeakSet,bv),d0=Vy(Cn,rr,lt,_i,tt,Tn),mh=Ry(d0,tt),p0=iv(Gt,mh,Se,Ht,ze),m0=rv(De,Mt,mh,p0,Ce,Te),g0=fv(_i,Se,ze),_0=hv(De,qe,_i,g0,Ce,Te,Wn),gh=Z_($t),ha=w_($t),_h=new WeakMap,y0=M_(_h,Qt),v0=gh?Ym(Nt,tt,v_($t),ha,T_(Gm),Ce,y0,Te,Zs,new WeakMap,new WeakMap,av(Zs,Qt),$t):void 0,b0=z_(oa,Te),w0=i_(ca,Nt,r_,y_,new WeakSet,Ce,b0,$r,Ks,la,ua),yh=Rg(v0,Nv,ah,Dv,Rv,Lv,Wv,jv,Hv,w0,Kv,Yv,Jv,n0,r0,o0,u0,f0,m0,_0),T0=Y_(De,ky,Ce,Te),C0=J_(De,Ey,Ce,Te),A0=Q_(De,Iy,Ce,Te),S0=Oy(qe,Te),x0=ey(De,S0,Ce),k0=gg(yh,qe,tt,lv,T0,C0,A0,x0,ar),fa=D_(hh),E0=eg(fa),vh=Kg(jt),I0=h_(fa),bh=p_(jt),wh=new WeakMap,O0=x_(wh,Ot),N0=gy(vh,jt,qe,Cn,rr,Ts,lt,ir,tt,bh,ha,O0,Tn),M0=fy(qe,N0,lt,tt,Tn),D0=Pg(Gt,vh,ws,Cn,rr,Ts,lt,I0,bh,ha,Se,Zs,Qt,Ht,ze,gi),F0=O_(_h),P0=ev(wh),Xc=gh?Mg(E0,De,Mt,D0,M0,et,F0,Ce,Te,Zs,yv,P0,Av,bs):void 0,R0=s_(tt,Qt),V0=nv(ca,Nt,ia,fa,gi,$r,la,ua),B0=Wy(yh,Nt,qe,R0,V0),L0=U_(fi,oa),U0=W_(Yo,aa),W0=$_(Xo,ih),$0=q_(fi,Te);function vt(t){return t===void 0}function de(t){return t!==void 0}function q0(t){return typeof t=="function"}function Dn(t){return typeof t=="number"}function Nn(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function j0(t){return typeof t=="boolean"}function Et(t){return Array.isArray(t)}function qt(t){return typeof t=="string"}function Tr(t){return qt(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function le(t,e){if(!t)throw new Error(e)}function yn(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Th(t){!t.isOffline&&t.state!=="running"&&da('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ch=!1,Jc=!1;function Qc(t){Ch=t}function G0(t){vt(t)&&Ch&&!Jc&&(Jc=!0,da("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Ah=console;function H0(...t){Ah.log(...t)}function da(...t){Ah.warn(...t)}function z0(t){return new k0(t)}function K0(t,e,n){return new B0(t,e,n)}const ft=typeof self=="object"?self:null,Z0=ft&&(ft.hasOwnProperty("AudioContext")||ft.hasOwnProperty("webkitAudioContext"));function Y0(t,e,n){return le(de(Xc),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(ft==null?void 0:ft.BaseAudioContext)?ft==null?void 0:ft.AudioWorkletNode:Xc)(t,e,n)}function Dt(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function Be(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(t,e||[])).next())})}class X0{constructor(e,n,s,r){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Fn(t){return W0(t)}function pn(t){return U0(t)}function Fr(t){return $0(t)}function Kn(t){return L0(t)}function J0(t){return t instanceof ah}function Q0(t,e){return t==="value"||Fn(e)||pn(e)||J0(e)}function rs(t,...e){if(!e.length)return t;const n=e.shift();if(Nn(t)&&Nn(n))for(const s in n)Q0(s,n[s])?t[s]=n[s]:Nn(n[s])?(t[s]||Object.assign(t,{[s]:{}}),rs(t[s],n[s])):Object.assign(t,{[s]:n[s]});return rs(t,...e)}function eb(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function ce(t,e,n=[],s){const r={},i=Array.from(e);if(Nn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(rs(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&Nn(i[0]))rs(r,i[0]);else for(let o=0;o<n.length;o++)de(i[o])&&(r[n[o]]=i[o]);return rs(t,r)}function tb(t){return t.constructor.getDefaults()}function is(t,e){return vt(t)?e:t}function el(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class en{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ft&&this.toString()===ft.TONE_DEBUG_CLASS)&&H0(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}en.version=Iu;const pa=1e-6;function fs(t,e){return t>e+pa}function Co(t,e){return fs(t,e)||Ct(t,e)}function Zr(t,e){return t+pa<e}function Ct(t,e){return Math.abs(t-e)<pa}function nb(t,e,n){return Math.max(Math.min(t,n),e)}class bt extends en{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ce(bt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(le(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];le(Co(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Ct(this._timeline[n].time,e)){for(let s=n;s>=0&&Ct(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Co(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Ct(a[n],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Ct(u[n],e))o=l;else break}return o}else{if(Zr(a[n],e)&&fs(c[n],e))return o;fs(a[n],e)?i=o:s=o+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let r=this._search(e),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&Ct(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Ct(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Sh=[];function yi(t){Sh.push(t)}function sb(t){Sh.forEach(e=>e(t))}const xh=[];function vi(t){xh.push(t)}function rb(t){xh.forEach(e=>e(t))}class cr extends en{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{vt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const s=(...r)=>{n(...r),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(vt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(vt(n))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(cr.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class kh extends cr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class lr extends kh{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new bt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=ce(lr.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=z0({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new X0(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(sb(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return le(Kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return le(Kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return le(Kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){le(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){le(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){le(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){le(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return Y0(this.rawContext,e,n)}addAudioWorkletModule(e){return Be(this,void 0,void 0,function*(){le(de(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Be(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Kn(this._context)?this._context.resume():Promise.resolve()}close(){return Be(this,void 0,void 0,function*(){Kn(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&rb(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+n})};return r(),s}}class ib extends kh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Be(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Me(t,e){Et(e)?e.forEach(n=>Me(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Eh(t,e){Et(e)?e.forEach(n=>Eh(t,n)):Object.defineProperty(t,e,{writable:!0})}const we=()=>{};class Ae extends en{constructor(){super(),this.name="ToneAudioBuffer",this.onload=we;const e=ce(Ae.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,qt(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:we,onload:we,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:gt().sampleRate}set(e){return e instanceof Ae?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Be(this,void 0,void 0,function*(){const n=Ae.load(e).then(s=>{this.set(s),this.onload(this)});Ae.downloads.push(n);try{yield n}finally{const s=Ae.downloads.indexOf(n);Ae.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Et(e)&&e[0].length>0,s=n?e.length:1,r=n?e[0].length:e.length,i=gt(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(Dn(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(e){if(Dn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){le(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);le(s<r,"The start time must be less than the end time");const i=r-s,o=gt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Ae(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ae().fromArray(e)}static fromUrl(e){return Be(this,void 0,void 0,function*(){return yield new Ae().load(e)})}static load(e){return Be(this,void 0,void 0,function*(){const n=Ae.baseUrl===""||Ae.baseUrl.endsWith("/")?Ae.baseUrl:Ae.baseUrl+"/",s=yield fetch(n+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const r=yield s.arrayBuffer();return yield gt().decodeAudioData(r)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Be(this,void 0,void 0,function*(){for(yield Promise.resolve();Ae.downloads.length;)yield Ae.downloads[0]})}}Ae.baseUrl="";Ae.downloads=[];class ma extends lr{constructor(){super({clockSource:"offline",context:Fr(arguments[0])?arguments[0]:K0(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Fr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Fr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Be(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return Be(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Ae(n)})}close(){return Promise.resolve()}}const Ih=new ib;let En=Ih;function gt(){return En===Ih&&Z0&&ob(new lr),En}function ob(t,e=!1){e&&En.dispose(),Kn(t)?En=new lr(t):Fr(t)?En=new ma(t):En=t}function Oh(){return En.resume()}if(ft&&!ft.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Iu} * `}function ab(t){return Math.pow(10,t/20)}function cb(t){return 20*(Math.log(t)/Math.LN10)}function Nh(t){return Math.pow(2,t/12)}let bi=440;function lb(){return bi}function ub(t){bi=t}function Ao(t){return Math.round(Mh(t))}function Mh(t){return 69+12*Math.log2(t/bi)}function hb(t){return bi*Math.pow(2,(t-69)/12)}class ga extends en{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ga&&this.fromType(this._val),vt(this._val))return this._noArg();if(qt(this._val)&&vt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Nn(this._val)){let e=0;for(const n in this._val)if(de(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;e+=r}return e}if(de(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return qt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class xt extends ga{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new xt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new xt(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new xt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ao(this.toFrequency())}_now(){return this.context.now()}}class _t extends xt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return lb()}static set A4(e){ub(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:_t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const r=fb[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:_t.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new _t(this.context,this.valueOf()*Nh(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Ao(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/_t.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),db[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return hb(e)}static ftom(e){return Ao(e)}}const fb={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},db=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Vs extends xt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ot extends en{constructor(){super();const e=ce(ot.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:gt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return G0(e),new xt(this.context,e).toSeconds()}toFrequency(e){return new _t(this.context,e).toFrequency()}toTicks(e){return new Vs(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{vt(e[s])&&delete n[s]}),n}get(){const e=tb(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];de(s)&&de(s.value)&&de(s.setValueAtTime)?e[n]=s.value:s instanceof ot?e[n]=s._getPartialProperties(e[n]):Et(s)||Dn(s)||qt(s)||j0(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&de(this[n])&&(this[n]&&de(this[n].value)&&de(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof ot?this[n].set(e[n]):this[n]=e[n])}),this}}class _a extends bt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return yn(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Oe extends ot{constructor(){const e=ce(Oe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,le(de(e.param)&&(Fn(e.param)||e.param instanceof Oe),"param must be an AudioParam");!Fn(e.param);)e.param=e.param._param;this._swappable=de(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new bt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,de(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ot.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return de(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return de(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return de(this.maxValue)&&de(this.minValue)&&yn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ab(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?cb(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),r=this._fromType(e);return le(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),r=this.toSeconds(n);return le(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=Ct(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return le(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const r=this._fromType(e);le(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),le(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return le(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));le(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&Ct(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){le(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,r,i){return s+(n-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,n,s,r,i){return n+(r-n)*((i-e)/(s-e))}_exponentialInterpolate(e,n,s,r,i){return n*Math.pow(r/n,(i-e)/(s-e))}}class ue extends ot{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return de(this.input)?Fn(this.input)||this.input instanceof Oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return de(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return de(e)&&(e instanceof ue||pn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();le(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return Cs(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return da("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return pb(this,e,n,s),this}chain(...e){return So(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),de(this.input)&&(this.input instanceof ue?this.input.dispose():pn(this.input)&&this.input.disconnect()),de(this.output)&&(this.output instanceof ue?this.output.dispose():pn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function So(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof ue?n.connect(s):pn(n)&&Cs(n,s),s),e)}function Cs(t,e,n=0,s=0){for(le(de(t),"Cannot connect from undefined node"),le(de(e),"Cannot connect to undefined node"),(e instanceof ue||pn(e))&&le(e.numberOfInputs>0,"Cannot connect to node with no inputs"),le(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ue||e instanceof Oe;)de(e.input)&&(e=e.input);for(;t instanceof ue;)de(t.output)&&(t=t.output);Fn(e)?t.connect(e,n):t.connect(e,n,s)}function pb(t,e,n=0,s=0){if(de(e))for(;e instanceof ue;)e=e.input;for(;!pn(t);)de(t.output)&&(t=t.output);Fn(e)?t.disconnect(e,n):pn(e)?t.disconnect(e,n,s):t.disconnect()}class Ye extends ue{constructor(){const e=ce(Ye.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Oe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Me(this,"gain")}static getDefaults(){return Object.assign(ue.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ds extends ue{constructor(e){super(e),this.onended=we,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ye({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ue.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:we})}_startGain(e,n=1){le(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){le(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==we&&(this.onended(this),this.onended=we,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),le(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=we,this}}class ya extends ds{constructor(){const e=ce(ya.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Cs(this._source,this._gainNode),this.offset=new Oe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(ds.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ge extends ue{constructor(){const e=ce(Ge.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new ya({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ue.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return va(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,r){return this._param.setValueCurveAtTime(e,n,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function va(t,e,n,s){(e instanceof Oe||Fn(e)||e instanceof Ge&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ge&&(e.overridden=!0)),Cs(t,e,n,s)}class ba extends Oe{constructor(){const e=ce(ba.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new bt(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+n,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,n,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(vt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class wa extends Ge{constructor(){const e=ce(wa.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new ba({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ge.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ta extends ot{constructor(){const e=ce(Ta.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new _a,this._tickOffset=new bt,this._ticksAtTime=new bt,this._secondsAtTime=new bt,this.frequency=new wa({context:this.context,units:e.units,value:e.frequency}),Me(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ot.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),de(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,n+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||n,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,s){let r=this._state.get(e);this._state.forEachBetween(e,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Ct(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class wi extends ot{constructor(){const e=ce(wi.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=we,this._lastUpdate=0,this._state=new _a("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Ta({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Me(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ot.getDefaults(),{callback:we,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Th(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}cr.mixin(wi);class As extends ue{constructor(){const e=ce(As.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ye({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Me(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ca extends ue{constructor(){const e=ce(Ca.getDefaults(),arguments);super(e),this.name="Destination",this.input=new As({context:this.context}),this.output=new Ye({context:this.context}),this.volume=this.input.volume,So(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),So(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}yi(t=>{t.destination=new Ca({context:t})});vi(t=>{t.destination.dispose()});class mb extends ue{constructor(){super(...arguments),this.name="Listener",this.positionX=new Oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ue.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}yi(t=>{t.listener=new mb({context:t})});vi(t=>{t.listener.dispose()});class Aa extends en{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ce(Aa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:we,onload:we,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return le(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=we,r=we){return qt(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ae(this.baseUrl+n,s,r))):this._buffers.set(e.toString(),new Ae(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Xn extends Vs{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class gb extends ot{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new bt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}yi(t=>{t.draw=new gb({context:t})});vi(t=>{t.draw.dispose()});class _b extends en{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){le(de(e.time),"Events must have a time property"),le(de(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new yb(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,r=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class yb{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class vb extends en{constructor(e){super(),this.name="TimelineValue",this._timeline=new bt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class ps extends ue{constructor(){super(ce(ps.getDefaults(),arguments,["context"]))}connect(e,n=0,s=0){return va(this,e,n,s),this}}class ur extends ps{constructor(){const e=ce(ur.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Et(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):q0(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ge.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));le(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Sa extends ps{constructor(){const e=ce(Sa.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new ur({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(ps.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class vn{constructor(e,n){this.id=vn._eventId++,this._remainderTime=0;const s=Object.assign(vn.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:we,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}vn._eventId=0;class xa extends vn{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(xa.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},vn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Zr(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Xn(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Zr(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Xn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);fs(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ti extends ot{constructor(){const e=ce(Ti.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new vb(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new bt,this._repeatedEvents=new _b,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new wi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Me(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ot.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Xn(this.context,this._swingTicks*2/3).toSeconds()*r}Qc(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),Qc(!1)}schedule(e,n){const s=new vn(this,{callback:e,time:new Vs(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,r=1/0){const i=new xa(this,{callback:e,duration:new xt(this.context,r).toTicks(),interval:new xt(this.context,n).toTicks(),time:new Vs(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const s=new vn(this,{callback:e,once:!0,time:new Vs(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Xn(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return de(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Et(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new xt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new xt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Xn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Xn(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=e-s%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,l=new Ye(c),u=new Sa(-1),h=new Ye(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/i:n=0);const a=new Ye(n);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Eh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}cr.mixin(Ti);yi(t=>{t.transport=new Ti({context:t})});vi(t=>{t.transport.dispose()});class dt extends ue{constructor(e){super(e),this.input=void 0,this._state=new _a("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=we,this._syncedStop=we,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new As({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Me(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,onstop:we,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let r=vt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")le(fs(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(is(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Th(this.context),this._start(r,n,s);return this}stop(e){let n=vt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||de(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(fs(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=we,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ci extends ds{constructor(){const e=ce(Ci.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Cs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Oe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ae(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ds.getDefaults(),{url:new Ae,loop:!1,loopEnd:0,loopStart:0,onload:we,onerror:we,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,r=1){le(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?n=is(n,this.loopStart):n=is(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Co(o,a)&&(o=(o-c)%l+c),Ct(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Zr(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),de(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function $n(t,e){return Be(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new ma(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class ka extends ds{constructor(){const e=ce(ka.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Cs(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Oe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Me(this,["frequency","detune"])}static getDefaults(){return Object.assign(ds.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ve extends dt{constructor(){const e=ce(Ve.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),Me(this,"frequency"),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),Me(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(dt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new ka({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ve._periodicWaveCache.find(n=>n.phase===this._phase&&eb(n.partials,this._partials));{const e=Ve._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(de(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ve._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ve._periodicWaveCache.length>100&&Ve._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){yn(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(n*c),o[c]=u*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,n,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,n,o/i*r),s);return nb(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ve._periodicWaveCache=[];class bb extends ps{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ur({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ms extends Ge{constructor(){const e=ce(ms.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ye({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ge.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ai extends dt{constructor(){const e=ce(Ai.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new bb({context:this.context}),this._modulationNode=new Ye({context:this.context}),this._carrier=new Ve({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ve({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ms({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Me(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ve.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Si extends dt{constructor(){const e=ce(Si.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ye({context:this.context,gain:0}),this._carrier=new Ve({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ve({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ms({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ms({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Me(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ve.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class hr extends dt{constructor(){const e=ce(hr.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ye({context:this.context,gain:0}),this._thresh=new ur({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new Ge({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ve({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Me(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(dt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class xi extends dt{constructor(){const e=ce(xi.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Me(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ve.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(e){if(yn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new Ve({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):we});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ki extends dt{constructor(){const e=ce(ki.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ms({context:this.context,value:2}),this._pulse=new hr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ve({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Me(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(dt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const tl={am:Ai,fat:xi,fm:Si,oscillator:Ve,pulse:hr,pwm:ki};class Yr extends dt{constructor(){const e=ce(Yr.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),Me(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ve.getDefaults(),Si.getDefaults(),Ai.getDefaults(),xi.getDefaults(),hr.getDefaults(),ki.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=tl[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof tl[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Dn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Dn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&qt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Be(this,arguments,void 0,function*(e=1024){return $n(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Dh(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){yn(i,t,e),n.set(this,i)}})}}function tn(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){yn(this.toSeconds(i),t,e),n.set(this,i)}})}}class Ei extends dt{constructor(){const e=ce(Ei.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ae({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(dt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:we,onerror:we,playbackRate:1,reverse:!1})}load(e){return Be(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=we){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=is(n,this._loopStart):n=is(n,0);const r=this.toSeconds(n),i=s;s=is(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Ci({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&vt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&yn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&yn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Dt([tn(0)],Ei.prototype,"fadeIn",void 0);Dt([tn(0)],Ei.prototype,"fadeOut",void 0);class An extends ue{constructor(){const e=ce(An.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Ge({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ue.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(qt(e))return e;{let s;for(s in Cr)if(Cr[s][n]===e)return s;return e}}_setCurve(e,n,s){if(qt(s)&&Reflect.has(Cr,s)){const r=Cr[s];Nn(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(Et(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(le(Et(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return va(this,e,n,s),this}asArray(){return Be(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,s=new ma(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Dt([tn(0)],An.prototype,"attack",void 0);Dt([tn(0)],An.prototype,"decay",void 0);Dt([Dh(0,1)],An.prototype,"sustain",void 0);Dt([tn(0)],An.prototype,"release",void 0);const Cr=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){n=e/127;const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[e]=f/10+n*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const c=[];for(e=0;e<128;e++)n=e/127,c[e]=.5*(1-Math.cos(Math.PI*n));const l=[];for(e=0;e<128;e++){n=e/127;const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);l[e]=Math.abs(d*(1-n))}function u(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();let Xr=class Fh extends ue{constructor(){const e=ce(Fh.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new As({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Me(this,"volume")}static getDefaults(){return Object.assign(ue.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class gs extends Xr{constructor(){const e=ce(gs.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Xr.getDefaults(),{detune:0,onsilence:we,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),r=e instanceof _t?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Dt([tn(0)],gs.prototype,"portamento",void 0);class Ea extends An{constructor(){super(ce(Ea.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ye({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Jr extends gs{constructor(){const e=ce(Jr.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Yr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ea(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Me(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(gs.getDefaults(),{envelope:Object.assign(el(An.getDefaults(),Object.keys(ue.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(el(Yr.getDefaults(),[...Object.keys(dt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ii extends Jr{constructor(){const e=ce(Ii.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Me(this,["oscillator","envelope"])}static getDefaults(){return rs(gs.getDefaults(),Jr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),r=this.toFrequency(e instanceof _t?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Dt([Dh(0)],Ii.prototype,"octaves",void 0);Dt([tn(0)],Ii.prototype,"pitchDecay",void 0);const Ph=new Set;function Ia(t){Ph.add(t)}function Rh(t,e){const n=`registerProcessor("${t}", ${e})`;Ph.add(n)}const wb=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Ia(wb);const Tb=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Ia(Tb);const Cb=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Ia(Cb);const Ab="feedback-comb-filter",Sb=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Rh(Ab,Sb);class Pn extends Xr{constructor(){const e=ce(Pn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(le(Tr(s)||Dn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Tr(s)){const i=new _t(this.context,s).toMidi();n[i]=e.urls[s]}else Dn(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new Aa({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Xr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:we,onerror:we,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=Mh(new _t(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=Nh(c+a),f=new Ci({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,u.duration/h,s),Et(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new _t(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Et(n)?(le(Et(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,s){if(le(Tr(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Tr(e)){const r=new _t(this.context,e).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Dt([tn(0)],Pn.prototype,"attack",void 0);Dt([tn(0)],Pn.prototype,"release",void 0);class Oa extends ue{constructor(){const e=ce(Oa.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Oe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Me(this,"pan")}static getDefaults(){return Object.assign(ue.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const xb="bit-crusher",kb=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Rh(xb,kb);class Re extends ue{constructor(){const e=ce(Re.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ye({context:this.context}),Re._allSolos.has(this.context)||Re._allSolos.set(this.context,new Set),Re._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ue.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Re._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Re._soloed.has(this.context)||Re._soloed.set(this.context,new Set),Re._soloed.get(this.context).add(this)}_removeSolo(){Re._soloed.has(this.context)&&Re._soloed.get(this.context).delete(this)}_isSoloed(){return Re._soloed.has(this.context)&&Re._soloed.get(this.context).has(this)}_noSolos(){return!Re._soloed.has(this.context)||Re._soloed.has(this.context)&&Re._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Re._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Re._allSolos=new Map;Re._soloed=new Map;class Na extends ue{constructor(){const e=ce(Na.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Oa({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new As({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Me(this,["pan","volume"])}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Jn extends ue{constructor(){const e=ce(Jn.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Re({solo:e.solo,context:this.context}),this._panVol=this.output=new Na({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Me(this,["pan","volume"])}static getDefaults(){return Object.assign(ue.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Jn.buses.has(e)||Jn.buses.set(e,new Ye({context:this.context})),Jn.buses.get(e)}send(e,n=0){const s=this._getBus(e),r=new Ye({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Jn.buses=new Map;function Eb(){return gt().now()}const gC=gt().transport;gt().destination;gt().destination;gt().listener;gt().draw;gt();function _C(){return Ae.loaded()}document.querySelector("body").addEventListener("click",()=>{Oh()},!1);const Z={C2:"a49.mp3",D2:"a50.mp3",E2:"a51.mp3",F2:"a52.mp3",G2:"a53.mp3",A2:"a54.mp3",B2:"a55.mp3",C3:"a56.mp3",D3:"a57.mp3",E3:"a48.mp3",F3:"a81.mp3",G3:"a87.mp3",A3:"a69.mp3",B3:"a82.mp3",C4:"a84.mp3",D4:"a89.mp3",E4:"a85.mp3",F4:"a73.mp3",G4:"a79.mp3",A4:"a80.mp3",B4:"a65.mp3",C5:"a83.mp3",D5:"a68.mp3",E5:"a70.mp3",F5:"a71.mp3",G5:"a72.mp3",A5:"a74.mp3",B5:"a75.mp3",C6:"a76.mp3",D6:"a90.mp3",E6:"a88.mp3",F6:"a67.mp3",G6:"a86.mp3",A6:"a66.mp3",B6:"a78.mp3",C7:"a77.mp3"},Ib={minify:!1,ext:".[mp3|ogg]",baseUrl:"/ai-music/dist/media/",list:["bass-electric","bassoon","cello","clarinet","contrabass","flute","french-horn","guitar-acoustic","guitar-electric","guitar-nylon","harmonium","harp","organ","piano","saxophone","trombone","trumpet","tuba","violin","xylophone"],onload:null,setExt:function(t){var e;for(e=0;e<=this.list.length-1;e++)for(var n in this[this.list[e]])this[this.list[e]][n]=this[this.list[e]][n].replace(this.ext,t);this.ext=t},load:function(t){var e,n,s;if(t?e=t:e={},e.instruments=e.instruments||this.list,e.baseUrl=e.baseUrl||this.baseUrl,e.onload=e.onload||this.onload,e.ext&&(e.ext!=this.ext&&this.setExt(e.ext),e.ext=this.ext),n={},Array.isArray(e.instruments)){for(s=0;s<=e.instruments.length-1;s++){var r=this[e.instruments[s]];if(this.minify===!0||e.minify===!0){var i=1;Object.keys(r).length>=17&&(i=2),Object.keys(r).length>=33&&(i=4),Object.keys(r).length>=49&&(i=6);var o=Object.keys(r).filter(function(c,l){return l%i!=0});o.forEach(function(c){delete r[c]})}n[e.instruments[s]]=new Pn(r,{baseUrl:e.baseUrl+e.instruments[s]+"/",onload:e.onload})}return n}else{r=this[e.instruments],(this.minify===!0||e.minify===!0)&&(i=1,Object.keys(r).length>=17&&(i=2),Object.keys(r).length>=33&&(i=4),Object.keys(r).length>=49&&(i=6),o=Object.keys(r).filter(function(c,l){return l%i!=0}),o.forEach(function(c){delete r[c]}));var a=new Pn(r,{baseUrl:e.baseUrl+e.instruments+"/",onload:e.onload});return a}},"bass-electric":{"A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]"},bassoon:{A3:"A3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",E3:"E3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]"},cello:{E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]"},clarinet:{D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",D2:"D2.[mp3|ogg]"},contrabass:{C1:"C1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]",D1:"D1.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]",G0:"G0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]",A1:"A1.[mp3|ogg]","A#0":"As0.[mp3|ogg]",B2:"B2.[mp3|ogg]"},flute:{A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]"},"french-horn":{D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",G1:"G1.[mp3|ogg]",A0:"A0.[mp3|ogg]",A2:"A2.[mp3|ogg]",C1:"C1.[mp3|ogg]",C3:"C3.[mp3|ogg]"},"guitar-acoustic":{F3:"F3.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]"},"guitar-electric":{"D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]"},"guitar-nylon":{"F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G3.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]","A#5":"As5.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]"},harmonium:{C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]"},harp:{C5:"C5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]",D6:"D6.[mp3|ogg]",D7:"D7.[mp3|ogg]",E1:"E1.[mp3|ogg]",E3:"E3.[mp3|ogg]",E5:"E5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",F6:"F6.[mp3|ogg]",F7:"F7.[mp3|ogg]",G1:"G1.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]",A6:"A6.[mp3|ogg]",B1:"B1.[mp3|ogg]",B3:"B3.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C3:"C3.[mp3|ogg]"},organ:{C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]"},piano:{A2:Z.A2,A3:Z.A3,A4:Z.A4,A5:Z.A5,A6:Z.A6,"A#3":Z["A#3"],"A#4":Z["A#4"],"A#5":Z["A#5"],"A#6":Z["A#6"],B2:Z.B2,B3:Z.B3,B4:Z.B4,B5:Z.B5,B6:Z.B6,C2:Z.C2,C3:Z.C3,C4:Z.C4,C5:Z.C5,C6:Z.C6,C7:Z.C7,"C#2":Z["C#2"],"C#3":Z["C#3"],"C#4":Z["C#4"],"C#5":Z["C#5"],"C#6":Z["C#6"],D0:Z.D0,D1:Z.D1,D2:Z.D2,D3:Z.D3,D4:Z.D4,D5:Z.D5,D6:Z.D6,"D#2":Z["D#2"],"D#3":Z["D#3"],"D#4":Z["D#4"],"D#5":Z["D#5"],"D#6":Z["D#6"],E2:Z.E2,E3:Z.E3,E4:Z.E4,E5:Z.E5,E6:Z.E6,F2:Z.F2,F3:Z.F3,F4:Z.F4,F5:Z.F5,F6:Z.F6,"F#2":Z["F#2"],"F#3":Z["F#3"],"F#4":Z["F#4"],"F#5":Z["F#5"],"F#6":Z["F#6"],G2:Z.G2,G3:Z.G3,G4:Z.G4,G5:Z.G5,G6:Z.G6,"G#2":Z["G#2"],"G#3":Z["G#3"],"G#4":Z["G#4"],"G#5":Z["G#5"],"G#6":Z["G#6"]},saxophone:{"D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]"},trombone:{"A#2":"As2.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]"},trumpet:{C5:"C5.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",G3:"G3.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#3":"As3.[mp3|ogg]",C3:"C3.[mp3|ogg]"},tuba:{"A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]","A#0":"As0.[mp3|ogg]"},violin:{A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]"},xylophone:{C7:"C7.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]"}},Ob={total:21,tone:4,notes:["C","D","E","F","G","A","B"]},Nb=pt({components:{Tap:Rm},data(){return{currentStep:0,currentMusic:1,toPlayingAI:!1,list:Mb(Ob),musicArr:[[["5","1+","2+","3+","2+","1+","1+"],["5","1+","2+","3+","2+","1+","2+","3+","3+"],["5","1+","2+","3+","2+","1+","1+"],["5","1+","2+","3+","2+","1+","2+","5+","3+"]],[["5","5","3","4","5","6","5","4","3","2"],["3","3","1","2","3","4","3","2","1","7-"],["6-","6-","1","6","5","5","1"],["2","3","4","3","2","1","3","3","2"]]],inputArr:[]}},created(){},mounted(){this.synth=Ib.load({instruments:"piano"}).toDestination()},methods:{setAllLightOff(){for(let t=0;t<this.list.length;t++)this.list[t].isActive=!1},setIndexLightToggle(t,e){this.list[t].isActive=e},handleClick(t){},handleCancel(){},handleFinishAI(){this.toPlayingAI=!1,this.$emit("changeStatus","Normal"),this.inputArr=[],this.currentStep=0,this.$emit("changeRightNum",0),this.$emit("changeStep",0),this.currentMusic==0?this.currentMusic=1:this.currentMusic=0},handlePlayAI(t=0){this.toPlayingAI=!1,this.$emit("changeStatus","AI Playing");const e=this.musicArr[this.currentMusic];if(this.currentStep<4){const n=e[this.currentStep],s=this.numberToNote(n);let r=0;const i=o=>{o&&(this.tapDown(o),setTimeout(()=>{this.tapup(o)},200)),r++,r<s.length?setTimeout(()=>{i(s[r])},400):(setTimeout(()=>{for(let a=0;a<this.list.length;a++)if(this.list[a].note==s[0]){this.list[a].isActive=!0;return}},500),this.toPlayingAI=!0,this.$emit("changeStatus","Start play"))};i(s[0])}},handleCheckReplay(t){const n=this.musicArr[this.currentMusic][this.currentStep],s=this.numberToNote(n);if(this.inputArr.push(t),this.inputArr[this.inputArr.length-1]==s[this.inputArr.length-1])this.$emit("changeRightNum",this.inputArr.length);else{this.$emit("changeRightNum",this.inputArr.length);let r=-1,i=-1;for(let o=0;o<this.list.length;o++)this.list[o].note==s[0]&&(i=o),this.list[o].note==s[this.inputArr.length-1]&&(r=o);this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[i].isActive=!0},1600)},400)},400)},400)},400)},400),this.inputArr=[]}this.inputArr.length===s.length&&(this.toPlayingAI=!1,this.inputArr=[],this.currentStep=this.currentStep+1,this.currentStep<4?(this.$emit("changeStep",this.currentStep),setTimeout(()=>{this.handlePlayAI()},1e3)):this.handleFinishAI())},numberToNote(t){const e=["C4","D4","E4","F4","G4","A4","B4"],n=["C5","D5","E5","F5","G5","A5","B5"],s=["C6","D6","E6","F6","G6","A6","B6"];let r=[];for(let i=0;i<t.length;i++)t[i]===0?r.push(""):qt(t[i])?t[i][1]=="+"?r.push(s[Number(t[i][0])-1]):t[i][1]=="-"?r.push(e[Number(t[i][0])-1]):r.push(n[Number(t[i][0])-1]):r.push(n[Number(t[i])-1]);return r},play(t){this.synth.triggerAttackRelease(t),this.$emit("play",t)},tapDown(t,e=1){this.play(t),this.tapNote(t,"down");for(let n=0;n<this.list.length;n++)if(this.list[n].note==t){this.list[n].isActive=!0;break}this.toPlayingAI&&this.handleCheckReplay(t)},tapup(t){this.tapNote(t,"up");for(let e=0;e<this.list.length;e++)if(this.list[e].note==t){this.list[e].isActive=!1;return}},tapNote(t,e){const n=this.$refs[`n_${t}`];!n||!n[0]||(e==="down"?n[0].tapdown():n[0].tapup())},release(){this.list.forEach(t=>this.tapNote(t.note,"up"))}}});function Mb(t){const{total:e,tone:n,notes:s}=t,r=s.length;let i=n-1;return[...Array(e)].map((o,a)=>{const c=s[a%r];return c===s[0]&&i++,{note:c+i,index:a,isActive:!1}})}const Db={class:"keyboard"},Fb={class:"keyboard_wrap"},Pb=["data-tapitem"];function Rb(t,e,n,s,r,i){const o=_n("Tap");return yt(),Ut("div",Db,[ve("ul",Fb,[(yt(!0),Ut(ht,null,Yl(t.list,a=>(yt(),Ut("li",{class:Bt(["li-item",{active:a.isActive}]),"data-tapitem":a.note,key:a.index},[pe(o,{tid:a.note,onTapdown:t.tapDown,onTapup:t.tapup},null,8,["tid","onTapdown","onTapup"])],10,Pb))),128))])])}const Ma=Ln(Nb,[["render",Rb],["__scopeId","data-v-2478341b"]]),Vb=pt({props:["current","rightnumber","status","text"],components:{},data(){return{}},computed:{},methods:{}}),Bb={class:"screen"};function Lb(t,e,n,s,r,i){return yt(),Ut("div",Bb,[ve("div",null,La(t.status)+"",1),ve("div",null,""+La(t.text),1),ve("div",null,[(yt(!0),Ut(ht,null,Yl(t.rightnumber,o=>(yt(),Ut("span",{key:o,class:"right-box"}))),128))])])}const Da=Ln(Vb,[["render",Lb]]),Ub=pt({data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4}},components:{Keyboard:Ma,Screen:Da},computed:{},mounted(){},methods:{handleCancel(){this.$refs.keyboard.handleFinishAI()},changeStep(t){this.currentStep=t},changeStatus(t){this.status=t},changeRightNum(t){this.rightNumber=t},handlePlayAI(){this.$refs.keyboard.handlePlayAI()},onDropMidi(t){}}}),Wb=t=>(Wo("data-v-f55ff7af"),t=t(),$o(),t),$b={class:"main"},qb={class:"main-box"},jb={class:"menu-box"},Gb=Wb(()=>ve("div",{class:"btn-micro"},null,-1));function Hb(t,e,n,s,r,i){const o=_n("Screen"),a=_n("Keyboard");return yt(),Ut("div",$b,[ve("div",qb,[ve("div",jb,[ve("div",{class:"m-btn btn-ai",onMousedown:e[0]||(e[0]=(...c)=>t.handlePlayAI&&t.handlePlayAI(...c))},"Z",32),pe(o,{current:t.currentStep,rightnumber:t.rightNumber,status:t.status},null,8,["current","rightnumber","status"]),ve("div",{class:"m-btn",onClick:e[1]||(e[1]=(...c)=>t.handleCancel&&t.handleCancel(...c))},"Cancel"),Gb]),pe(a,{ref:"keyboard",onChangeStep:t.changeStep,onChangeStatus:t.changeStatus,onChangeRightNum:t.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const zb=Ln(Ub,[["render",Hb],["__scopeId","data-v-f55ff7af"]]);var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var Vh={},Oi={};function Zb(t){var e=new nt(t),n=e.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var s=Yb(n.data),r=[],i=0;!e.eof()&&i<s.numTracks;i++){var o=e.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=Xb(o.data);r.push(a)}return{header:s,tracks:r}}function Yb(t){var e=new nt(t),n=e.readUInt16(),s=e.readUInt16(),r={format:n,numTracks:s},i=e.readUInt16();return i&32768?(r.framesPerSecond=256-(i>>8),r.ticksPerFrame=i&255):r.ticksPerBeat=i,r}function Xb(t){for(var e=new nt(t),n=[];!e.eof();){var s=i();n.push(s)}return n;var r;function i(){var o={};o.deltaTime=e.readVarInt();var a=e.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=e.readUInt8(),l=e.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",l!==2)throw"Expected length for sequenceNumber event is 2, got "+l;return o.number=e.readUInt16(),o;case 1:return o.type="text",o.text=e.readString(l),o;case 2:return o.type="copyrightNotice",o.text=e.readString(l),o;case 3:return o.type="trackName",o.text=e.readString(l),o;case 4:return o.type="instrumentName",o.text=e.readString(l),o;case 5:return o.type="lyrics",o.text=e.readString(l),o;case 6:return o.type="marker",o.text=e.readString(l),o;case 7:return o.type="cuePoint",o.text=e.readString(l),o;case 32:if(o.type="channelPrefix",l!=1)throw"Expected length for channelPrefix event is 1, got "+l;return o.channel=e.readUInt8(),o;case 33:if(o.type="portPrefix",l!=1)throw"Expected length for portPrefix event is 1, got "+l;return o.port=e.readUInt8(),o;case 47:if(o.type="endOfTrack",l!=0)throw"Expected length for endOfTrack event is 0, got "+l;return o;case 81:if(o.type="setTempo",l!=3)throw"Expected length for setTempo event is 3, got "+l;return o.microsecondsPerBeat=e.readUInt24(),o;case 84:if(o.type="smpteOffset",l!=5)throw"Expected length for smpteOffset event is 5, got "+l;var u=e.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[u&96],o.hour=u&31,o.min=e.readUInt8(),o.sec=e.readUInt8(),o.frame=e.readUInt8(),o.subFrame=e.readUInt8(),o;case 88:if(o.type="timeSignature",l!=2&&l!=4)throw"Expected length for timeSignature event is 4 or 2, got "+l;return o.numerator=e.readUInt8(),o.denominator=1<<e.readUInt8(),l===4?(o.metronome=e.readUInt8(),o.thirtyseconds=e.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",l!=2)throw"Expected length for keySignature event is 2, got "+l;return o.key=e.readInt8(),o.scale=e.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=e.readBytes(l),o;default:return o.type="unknownMeta",o.data=e.readBytes(l),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else if(a==247){o.type="endSysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else throw"Unrecognised MIDI event type byte: "+a;else{var f;if(a&128)f=e.readUInt8(),r=a;else{if(r===null)throw"Running status byte encountered before status byte";f=a,a=r,o.running=!0}var d=a>>4;switch(o.channel=a&15,d){case 8:return o.type="noteOff",o.noteNumber=f,o.velocity=e.readUInt8(),o;case 9:var p=e.readUInt8();return o.type=p===0?"noteOff":"noteOn",o.noteNumber=f,o.velocity=p,p===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=f,o.amount=e.readUInt8(),o;case 11:return o.type="controller",o.controllerType=f,o.value=e.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=f,o;case 13:return o.type="channelAftertouch",o.amount=f,o;case 14:return o.type="pitchBend",o.value=f+(e.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+d}}}}function nt(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}nt.prototype.eof=function(){return this.pos>=this.bufferLen};nt.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};nt.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};nt.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};nt.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};nt.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8();return(t<<16)+(e<<8)+n};nt.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};nt.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8(),s=this.readUInt8();return(t<<24)+(e<<16)+(n<<8)+s};nt.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};nt.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};nt.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};nt.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}};var Jb=Zb;function Qb(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var n=t.header||{},s=t.tracks||[],r,i=s.length,o=new We;for(ew(o,n,i),r=0;r<i;r++)tw(o,s[r],e);return o.buffer}function ew(t,e,n){var s=e.format==null?1:e.format,r=128;e.timeDivision?r=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?r=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(r=e.ticksPerBeat&32767);var i=new We;i.writeUInt16(s),i.writeUInt16(n),i.writeUInt16(r),t.writeChunk("MThd",i.buffer)}function tw(t,e,n){var s=new We,r,i=e.length,o=null;for(r=0;r<i;r++)(n.running===!1||!n.running&&!e[r].running)&&(o=null),o=nw(s,e[r],o,n.useByte9ForNoteOff);t.writeChunk("MTrk",s.buffer)}function nw(t,e,n,s){var r=e.type,i=e.deltaTime,o=e.text||"",a=e.data||[],c=null;switch(t.writeVarInt(i),r){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var l={24:0,25:32,29:64,30:96},u=e.hour&31|l[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":var f=s!==!1&&e.byte9||s&&e.velocity==0?144:128;c=f|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":c=144|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":c=160|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":c=176|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":c=192|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case"channelAftertouch":c=208|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case"pitchBend":c=224|e.channel,c!==n&&t.writeUInt8(c);var d=8192+e.value,p=d&127,m=d>>7&127;t.writeUInt8(p),t.writeUInt8(m);break;default:throw"Unrecognized event type: "+r}return c}function We(){this.buffer=[]}We.prototype.writeUInt8=function(t){this.buffer.push(t&255)};We.prototype.writeInt8=We.prototype.writeUInt8;We.prototype.writeUInt16=function(t){var e=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(n)};We.prototype.writeInt16=We.prototype.writeUInt16;We.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,s=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(s)};We.prototype.writeInt24=We.prototype.writeUInt24;We.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,s=t>>8&255,r=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(s),this.writeUInt8(r)};We.prototype.writeInt32=We.prototype.writeUInt32;We.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};We.prototype.writeString=function(t){var e,n=t.length,s=[];for(e=0;e<n;e++)s.push(t.codePointAt(e));this.writeBytes(s)};We.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(e&127),e>>=7;e;){var s=e&127|128;n.push(s),e>>=7}this.writeBytes(n.reverse())}};We.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var sw=Qb;Oi.parseMidi=Jb;Oi.writeMidi=sw;var Qr={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.insert=Rn.search=void 0;function Bh(t,e,n){n===void 0&&(n="ticks");var s=0,r=t.length,i=r;if(r>0&&t[r-1][n]<=e)return r-1;for(;s<i;){var o=Math.floor(s+(i-s)/2),a=t[o],c=t[o+1];if(a[n]===e){for(var l=o;l<t.length;l++){var u=t[l];u[n]===e&&(o=l)}return o}else{if(a[n]<e&&c[n]>e)return o;a[n]>e?i=o:a[n]<e&&(s=o+1)}}return-1}Rn.search=Bh;function rw(t,e,n){if(n===void 0&&(n="ticks"),t.length){var s=Bh(t,e[n],n);t.splice(s+1,0,e)}else t.push(e)}Rn.insert=rw;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=Rn,n=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function r(i){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),i){n.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:t.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;i.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return r.prototype.update=function(){var i=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var u=l>0?i.tempos[l-1].bpm:i.tempos[0].bpm,h=c.ticks/i.ppq-a,f=60/u*h;c.time=f+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var u=l>0?i.timeSignatures[l-1]:i.timeSignatures[0],h=(c.ticks-u.ticks)/i.ppq,f=h/u.timeSignature[0]/(u.timeSignature[1]/4);u.measures=u.measures||0,c.measures=f+u.measures})},r.prototype.ticksToSeconds=function(i){var o=(0,e.search)(this.tempos,i);if(o!==-1){var a=this.tempos[o],c=a.time,l=(i-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var u=i/this.ppq;return 60/120*u}},r.prototype.ticksToMeasures=function(i){var o=(0,e.search)(this.timeSignatures,i);if(o!==-1){var a=this.timeSignatures[o],c=(i-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(r.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),r.prototype.secondsToTicks=function(i){var o=(0,e.search)(this.tempos,i,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=i-c,u=l/(60/a.bpm);return Math.round(a.ticks+u*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},r.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},r.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=i.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=i.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=i.meta.map(function(o){return Object.assign({},o)}),n.set(this,i.ppq),this.update()},r.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},r}();t.Header=s})(Qr);var Ys={},Fa={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(r,i){return r[t.controlChangeNames[i]]=i,r},{});var e=new WeakMap,n=new WeakMap,s=function(){function r(i,o){e.set(this,o),n.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(r.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){var i=e.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var o=e.get(this);this.ticks=o.secondsToTicks(i)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},r}();t.ControlChange=s})(Fa);var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.createControlChanges=void 0;var Ar=Fa;function iw(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Ar.controlChangeIds.hasOwnProperty(e))return t[Ar.controlChangeIds[e]]},set:function(t,e,n){return Ar.controlChangeIds.hasOwnProperty(e)?t[Ar.controlChangeIds[e]]=n:t[e]=n,!0}})}Ni.createControlChanges=iw;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.PitchBend=void 0;var Xi=new WeakMap,ow=function(){function t(e,n){Xi.set(this,n),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Xi.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=Xi.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();Mi.PitchBend=ow;var Di={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.DrumKitByPatchID=mn.InstrumentFamilyByID=mn.instrumentByPatchID=void 0;mn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];mn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];mn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Di,"__esModule",{value:!0});Di.Instrument=void 0;var Sr=mn,nl=new WeakMap,aw=function(){function t(e,n){if(this.number=0,nl.set(this,n),this.number=0,e){var s=e.find(function(r){return r.type==="programChange"});s&&(this.number=s.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?Sr.DrumKitByPatchID[this.number]:Sr.instrumentByPatchID[this.number]},set:function(e){var n=Sr.instrumentByPatchID.indexOf(e);n!==-1&&(this.number=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":Sr.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=nl.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();Di.Instrument=aw;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.Note=void 0;function cw(t){var e=Math.floor(t/12)-1;return Lh(t)+e.toString()}function Lh(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function lw(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var uw=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var s=t.exec(n),r=s[1],i=s[2],o=e[r.toLowerCase()];return o+(parseInt(i,10)+1)*12}}(),jn=new WeakMap,hw=function(){function t(e,n,s){jn.set(this,s),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=n.velocity,this.ticks=e.ticks,this.durationTicks=n.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return cw(this.midi)},set:function(e){this.midi=uw(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var n=e-this.octave;this.midi+=n*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return Lh(this.midi)},set:function(e){this.midi=12*(this.octave+1)+lw(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=jn.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var n=jn.get(this),s=n.secondsToTicks(this.time+e);this.durationTicks=s-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=jn.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=jn.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=jn.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();Fi.Note=hw;Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Track=void 0;var Ji=Rn,fw=Fa,dw=Ni,pw=Mi,sl=Di,mw=Fi,xr=new WeakMap,gw=function(){function t(e,n){var s=this;if(this.name="",this.notes=[],this.controlChanges=(0,dw.createControlChanges)(),this.pitchBends=[],xr.set(this,n),e){var r=e.find(function(f){return f.type==="trackName"});this.name=r?r.text:""}if(this.instrument=new sl.Instrument(e,this),this.channel=0,e){for(var i=e.filter(function(f){return f.type==="noteOn"}),o=e.filter(function(f){return f.type==="noteOff"}),a=function(){var f=i.shift();c.channel=f.channel;var d=o.findIndex(function(m){return m.noteNumber===f.noteNumber&&m.absoluteTime>=f.absoluteTime});if(d!==-1){var p=o.splice(d,1)[0];c.addNote({durationTicks:p.absoluteTime-f.absoluteTime,midi:f.noteNumber,noteOffVelocity:p.velocity/127,ticks:f.absoluteTime,velocity:f.velocity/127})}},c=this;i.length;)a();var l=e.filter(function(f){return f.type==="controller"});l.forEach(function(f){s.addCC({number:f.controllerType,ticks:f.absoluteTime,value:f.value/127})});var u=e.filter(function(f){return f.type==="pitchBend"});u.forEach(function(f){s.addPitchBend({ticks:f.absoluteTime,value:f.value/Math.pow(2,13)})});var h=e.find(function(f){return f.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return t.prototype.addNote=function(e){var n=xr.get(this),s=new mw.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(s,e),(0,Ji.insert)(this.notes,s,"ticks"),this},t.prototype.addCC=function(e){var n=xr.get(this),s=new fw.ControlChange({controllerType:e.number},n);return delete e.number,Object.assign(s,e),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),(0,Ji.insert)(this.controlChanges[s.number],s,"ticks"),this},t.prototype.addPitchBend=function(e){var n=xr.get(this),s=new pw.PitchBend({},n);return Object.assign(s,e),(0,Ji.insert)(this.pitchBends,s,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;n<this.notes.length-1;n++){var s=this.notes[n].time+this.notes[n].duration;e<s&&(e=s)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;n<this.notes.length-1;n++){var s=this.notes[n].ticks+this.notes[n].durationTicks;e<s&&(e=s)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var n=this;this.name=e.name,this.channel=e.channel,this.instrument=new sl.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var s in e.controlChanges)e.controlChanges[s]&&e.controlChanges[s].forEach(function(r){n.addCC({number:r.number,ticks:r.ticks,value:r.value})});e.notes.forEach(function(r){n.addNote({durationTicks:r.durationTicks,midi:r.midi,ticks:r.ticks,velocity:r.velocity})})},t.prototype.toJSON=function(){for(var e={},n=0;n<127;n++)this.controlChanges.hasOwnProperty(n)&&(e[n]=this.controlChanges[n].map(function(r){return r.toJSON()}));var s={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(r){return r.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(r){return r.toJSON()})};return this.endOfTrackTicks!==void 0&&(s.endOfTrackTicks=this.endOfTrackTicks),s},t}();Ys.Track=gw;var Pi={};function _w(t){var e=[];return Uh(t,e),e}function Uh(t,e){for(var n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?Uh(s,e):e.push(s)}}const yw=Object.freeze(Object.defineProperty({__proto__:null,flatten:_w},Symbol.toStringTag,{value:"Module"})),vw=Kb(yw);var on=Qn&&Qn.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.encode=void 0;var bw=Oi,ww=Qr,Tw=vw;function Cw(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function Aw(t){return(0,Tw.flatten)(t.notes.map(function(e){return Cw(e,t.channel)}))}function Sw(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function xw(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(s){e.push(Sw(s,t.channel))});return e}function kw(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function Ew(t){var e=[];return t.pitchBends.forEach(function(n){e.push(kw(n,t.channel))}),e}function Iw(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function Ow(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function Nw(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function Mw(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function Dw(t){var e=ww.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function Fw(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function Pw(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:on([on(on(on(on([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(n){return Dw(n)}),!0),t.header.meta.map(function(n){return Fw(n)}),!0),t.header.tempos.map(function(n){return Nw(n)}),!0),t.header.timeSignatures.map(function(n){return Mw(n)}),!0)],t.tracks.map(function(n){return on(on(on([Ow(n.name),Iw(n)],Aw(n),!0),xw(n),!0),Ew(n),!0)}),!0)};return e.tracks=e.tracks.map(function(n){n=n.sort(function(r,i){return r.absoluteTime-i.absoluteTime});var s=0;return n.forEach(function(r){r.deltaTime=r.absoluteTime-s,s=r.absoluteTime,delete r.absoluteTime}),n.push({deltaTime:0,meta:!0,type:"endOfTrack"}),n}),new Uint8Array((0,bw.writeMidi)(e))}Pi.encode=Pw;(function(t){var e=Qn&&Qn.__awaiter||function(h,f,d,p){function m(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function C(b){try{A(p.next(b))}catch(T){y(T)}}function x(b){try{A(p.throw(b))}catch(T){y(T)}}function A(b){b.done?g(b.value):m(b.value).then(C,x)}A((p=p.apply(h,f||[])).next())})},n=Qn&&Qn.__generator||function(h,f){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(A){return function(b){return x([A,b])}}function x(A){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,m&&(g=A[0]&2?m.return:A[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,A[1])).done)return g;switch(m=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return d.label++,{value:A[1],done:!1};case 5:d.label++,m=A[1],A=[0];continue;case 7:A=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){d=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){d.label=A[1];break}if(A[0]===6&&d.label<g[1]){d.label=g[1],g=A;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(A);break}g[2]&&d.ops.pop(),d.trys.pop();continue}A=f.call(h,d)}catch(b){A=[6,b],m=0}finally{p=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var s=Oi,r=Qr,i=Ys,o=Pi,a=function(){function h(f){var d=this,p=null;if(f){var m=f instanceof ArrayBuffer?new Uint8Array(f):f;p=(0,s.parseMidi)(m),p.tracks.forEach(function(g){var y=0;g.forEach(function(C){y+=C.deltaTime,C.absoluteTime=y})}),p.tracks=u(p.tracks)}this.header=new r.Header(p),this.tracks=[],f&&(this.tracks=p.tracks.map(function(g){return new i.Track(g,d.header)}),p.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,p;return n(this,function(m){switch(m.label){case 0:return[4,fetch(f)];case 1:return d=m.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return p=m.sent(),[2,new h(p)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},h.prototype.fromJSON=function(f){var d=this;this.header=new r.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(p){var m=new i.Track(void 0,d.header);return m.fromJSON(p),m})},h.prototype.clone=function(){var f=new h;return f.fromJSON(this.toJSON()),f},h}();t.Midi=a;var c=Ys;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var l=Qr;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return l.Header}});function u(h){for(var f=[],d=0;d<h.length;d++)for(var p=f.length,m=new Map,g=Array(16).fill(0),y=0,C=h[d];y<C.length;y++){var x=C[y],A=p,b=x.channel;if(b!==void 0){x.type==="programChange"&&(g[b]=x.programNumber);var T=g[b],E="".concat(T," ").concat(b);m.has(E)?A=m.get(E):(A=p+m.size,m.set(E,A))}f[A]||f.push([]),f[A].push(x)}return f}})(Vh);const Rw=pt({name:"Music",data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4,musicPlayer:null,data:{},bpm:100,beats:[],loopTime:100,beatTime:0,countDivideBeatFactor:3,delayTime:1200,lastUpdateTime:0,startTime:0,currentBeat:0,count:0,loopCurrentIndex:0,timer:null,isActive1:!1,isActive2:!1,isActive3:!1,isWell1:!1,isWell2:!1,isWell3:!1,isWrong1:!1,isWrong2:!1,isWrong3:!1,isActive1Time:0,isActive2Time:0,isActive3Time:0,timer1:null,timer2:null,timer3:null,score:0,canPlay:!1}},components:{Keyboard:Ma,Screen:Da},computed:{},mounted(){this.musicPlayer=new Audio("/ai-music/dist/zhongguohua.mp3"),this.musicPlayer.addEventListener("canplaythrough",()=>{this.canPlay=!0},!1),this.musicPlayer.load(),this.getJson()},methods:{async getJson(){var t=new XMLHttpRequest;t.open("GET","/ai-music/dist/2.json",!0),t.onload=e=>{const n=JSON.parse(t.responseText);this.handleData(n)},t.send(null)},handleData(t){this.loopTime=this.delayTime/12,this.bpm=Math.floor(t.time[0].bpm),this.beatTime=6e4/this.bpm,this.countDivideBeatFactor=Math.round(this.beatTime/this.loopTime),this.beats=[],t.note.forEach(e=>{let n=Math.round((e.x-32)/64);n===1?n=0:n>1&&(n=n-1),e.beat[0]&&this.beats.push({beat:e.beat[0],offset:Number((e.beat[1]/e.beat[2]).toFixed(2)),x:n})})},setTrack1Index(t){const e=[0,1,2,3,4,5,6];this.$refs.keyboard.setIndexLightToggle(e[t],!0)},setTrack2Index(t){const e=[7,8,9,10,11,12,13];this.$refs.keyboard.setIndexLightToggle(e[t],!0)},setTrack3Index(t){const e=[14,15,16,17,18,19,20];this.$refs.keyboard.setIndexLightToggle(e[t],!0)},async handleStart(){if(!this.canPlay){alert("");return}this.musicPlayer.play(),this.loopCurrentIndex=0,this.startTime=Date.now(),this.handleLoop()},handleScore(t){const e=Date.now(),n=100;let s=t===1?this.isActive1Time:t===2?this.isActive2Time:this.isActive3Time;e-s<100&&e-s>-100?(this.score+=100,navigator.vibrate(100),t===1?(clearTimeout(this.timer1),this.isActive1=!0,this.timer1=setTimeout(()=>{this.isActive1=!1},n)):t===2?(clearTimeout(this.timer2),this.isActive2=!0,this.timer2=setTimeout(()=>{this.isActive2=!1},n)):(clearTimeout(this.timer3),this.isActive3=!0,this.timer3=setTimeout(()=>{this.isActive3=!1},n))):e-s<200&&e-s>-200?(this.score+=50,navigator.vibrate(100),t===1?(clearTimeout(this.timer1),this.isWell1=!0,this.timer1=setTimeout(()=>{this.isWell1=!1},n)):t===2?(clearTimeout(this.timer2),this.isWell2=!0,this.timer2=setTimeout(()=>{this.isWell2=!1},n)):(clearTimeout(this.timer3),this.isWell3=!0,this.timer3=setTimeout(()=>{this.isWell3=!1},n))):t===1?(clearTimeout(this.timer1),this.isWrong1=!0,this.timer1=setTimeout(()=>{this.isWrong1=!1},n)):t===2?(clearTimeout(this.timer2),this.isWrong2=!0,this.timer2=setTimeout(()=>{this.isWrong2=!1},n)):(clearTimeout(this.timer3),this.isWrong3=!0,this.timer3=setTimeout(()=>{this.isWrong3=!1},n))},handleLoop(){const t=Math.floor(this.count/this.countDivideBeatFactor),e=this.beats;this.$refs.keyboard.setAllLightOff();for(let r=this.loopCurrentIndex;r<e.length;r++){const i=e[r].beat,o=e[r].offset,a=e[r].x;let c=i*this.countDivideBeatFactor;if(o&&(c=c+Math.round(this.countDivideBeatFactor*o)),c-this.count<=12&&c-this.count>0){let l=i*this.countDivideBeatFactor-this.count;o&&(l=l+Math.round(this.countDivideBeatFactor*o)),l>=0&&l<=6&&(a===0?(this.setTrack1Index(l),l===1&&(this.isActive1Time=Date.now())):a===1?(this.setTrack2Index(l),l===1&&(this.isActive2Time=Date.now())):(this.setTrack3Index(l),l===1&&(this.isActive3Time=Date.now())))}else if(c-this.count<0)this.loopCurrentIndex=r;else if(c-this.count>12)break}this.count++;const n=this.startTime+this.count*this.loopTime,s=Date.now()-n;t>259?this.closeLoop():this.timer=setTimeout(()=>{this.handleLoop()},this.loopTime-s)},closeLoop(){clearInterval(this.timer),this.musicPlayer.pause()},handleCancel(){this.closeLoop(),location.reload(),this.$refs.keyboard.handleFinishAI()},changeStep(t){this.currentStep=t},changeStatus(t){this.status=t},changeRightNum(t){this.rightNumber=t},handlePlayAI(){this.$refs.keyboard.handlePlayAI()}}}),Vw=t=>(Wo("data-v-d8c0f294"),t=t(),$o(),t),Bw={class:"main"},Lw={class:"main-box"},Uw={class:"menu-box"},Ww=Vw(()=>ve("div",{class:"m-btn btn-ai"},"Z",-1)),$w={class:"test-block-box"};function qw(t,e,n,s,r,i){const o=_n("Screen"),a=_n("Keyboard");return yt(),Ut("div",Bw,[ve("div",Lw,[ve("div",Uw,[Ww,pe(o,{current:t.currentStep,text:t.score,status:t.status},null,8,["current","text","status"]),ve("div",{class:"m-btn",onClick:e[0]||(e[0]=(...c)=>t.handleCancel&&t.handleCancel(...c))},"Cancel"),ve("div",{class:"btn-micro",onClick:e[1]||(e[1]=(...c)=>t.handleStart&&t.handleStart(...c))})]),ve("div",$w,[ve("div",{class:Bt(["block",{perfect:t.isActive1,wrong:t.isWrong1,well:t.isWell1}]),onClick:e[2]||(e[2]=c=>t.handleScore(1))},null,2),ve("div",{class:Bt(["block",{perfect:t.isActive2,wrong:t.isWrong2,well:t.isWell2}]),onClick:e[3]||(e[3]=c=>t.handleScore(2))},null,2),ve("div",{class:Bt(["block",{perfect:t.isActive3,wrong:t.isWrong3,well:t.isWell3}]),onClick:e[4]||(e[4]=c=>t.handleScore(3))},null,2)]),pe(a,{ref:"keyboard",onChangeStep:t.changeStep,onChangeStatus:t.changeStatus,onChangeRightNum:t.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const rl=Ln(Rw,[["render",qw],["__scopeId","data-v-d8c0f294"]]);let il;const jw=pt({name:"game",data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4,gameArr:[],gameOver:!1,firstClick:!0,samplerLoaded:!1,score:0,currentNote:0,gameTimer:null,notes:[],gameTime:30,isWrong1:!1,isWrong2:!1,isWrong3:!1}},components:{Keyboard:Ma,Screen:Da},computed:{},mounted(){this.initGameArr(),this.initTone(),this.drawLight()},methods:{startCountDown(){clearTimeout(this.gameTimer),this.gameTime=30,this.handleCountDown()},handleCountDown(){this.gameTimer=setTimeout(()=>{this.gameTime--,this.changeStatus(""+this.gameTime+"s"),this.gameTime<=0?this.gameOver=!0:this.handleCountDown()},1e3)},async initTone(){(await Vh.Midi.fromUrl("/ai-music/dist/3.mid")).tracks.forEach(e=>{e.notes.forEach(n=>{this.notes.push({name:n.name,duration:n.duration,time:n.time+1})})}),await Oh(),il=new Pn({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{this.samplerLoaded=!0}}).toDestination()},playMusic(){if(!this.samplerLoaded)return;const t=this.notes[this.currentNote],e=Eb();il.triggerAttackRelease(t.name,t.duration,e),this.currentNote=(this.currentNote+1)%this.notes.length},generateRandom(){return Math.floor(Math.random()*3)},initGameArr(){for(let t=0;t<7;t++)this.gameArr.push(this.generateRandom())},offsetArr(){for(let t=0;t<6;t++)this.gameArr[t]=this.gameArr[t+1];this.gameArr[6]=this.generateRandom()},drawLight(){this.$refs.keyboard.setAllLightOff();for(let t=0;t<7;t++){const e=this.gameArr[t];for(let n=0;n<3;n++)if(n!=e){const s=t+n*7;this.$refs.keyboard.setIndexLightToggle(s,!0)}}},handleClick(t){this.gameOver||(this.firstClick&&(this.firstClick=!1,this.startCountDown()),this.gameArr[0]===t?(this.score++,this.offsetArr(),this.drawLight(),this.playMusic()):(clearTimeout(this.gameTimer),t===0&&(this.isWrong1=!0),t===1&&(this.isWrong2=!0),t===2&&(this.isWrong3=!0),this.gameOver=!0,setTimeout(()=>{this.status="Game Over"},1e3)))},async handleStart(){},handleScore(t){},handleLoop(){},closeLoop(){},handleCancel(){location.reload(),this.$refs.keyboard.handleFinishAI()},changeStep(t){this.currentStep=t},changeStatus(t){this.status=t},changeRightNum(t){this.rightNumber=t},handlePlayAI(){this.$refs.keyboard.handlePlayAI()}}}),Gw=t=>(Wo("data-v-6b510933"),t=t(),$o(),t),Hw={class:"main"},zw={class:"main-box"},Kw={class:"menu-box"},Zw=Gw(()=>ve("div",{class:"m-btn btn-ai"},"Z",-1)),Yw={class:"test-block-box"};function Xw(t,e,n,s,r,i){const o=_n("Screen"),a=_n("Keyboard");return yt(),Ut("div",Hw,[ve("div",zw,[ve("div",Kw,[Zw,pe(o,{current:t.currentStep,text:t.score,status:t.status},null,8,["current","text","status"]),ve("div",{class:"m-btn",onClick:e[0]||(e[0]=(...c)=>t.handleCancel&&t.handleCancel(...c))},"Cancel"),ve("div",{class:"btn-micro",onClick:e[1]||(e[1]=(...c)=>t.handleStart&&t.handleStart(...c))})]),ve("div",Yw,[ve("div",{class:Bt(["block",{wrong:t.isWrong1}]),onClick:e[2]||(e[2]=c=>t.handleClick(0))},null,2),ve("div",{class:Bt(["block",{wrong:t.isWrong2}]),onClick:e[3]||(e[3]=c=>t.handleClick(1))},null,2),ve("div",{class:Bt(["block",{wrong:t.isWrong3}]),onClick:e[4]||(e[4]=c=>t.handleClick(2))},null,2)]),pe(a,{ref:"keyboard",onChangeStep:t.changeStep,onChangeStatus:t.changeStatus,onChangeRightNum:t.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const Jw=Ln(jw,[["render",Xw],["__scopeId","data-v-6b510933"]]),Qw=Im({history:sm("/ai-music/dist/"),routes:[{path:"/",name:"home",component:zb},{path:"/music",name:"music",component:rl},{path:"/music1",name:"music1",component:rl},{path:"/game",name:"game",component:Jw},{path:"/test",name:"test",component:()=>Sp(()=>import("./AboutView-L_MLAny4.js"),__vite__mapDeps([0,1]))}]}),Wh=Object.assign,eT=typeof window<"u",$h=t=>t!==null&&typeof t=="object",Xs=t=>t!=null,tT=t=>typeof t=="function",qh=t=>typeof t=="number"||/^\d+(\.\d+)?$/.test(t),nT=()=>eT?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function ol(t,e){const n=e.split(".");let s=t;return n.forEach(r=>{var i;s=$h(s)&&(i=s[r])!=null?i:""}),s}const Vn=[Number,String],sT={type:Boolean,default:!0},Zt=t=>({type:String,default:t});var rT=typeof window<"u",kr,Qi;function iT(){if(!kr&&(kr=Ws(0),Qi=Ws(0),rT)){const t=()=>{kr.value=window.innerWidth,Qi.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:kr,height:Qi}}nT();function oT(t,e){(typeof t.cancelable!="boolean"||t.cancelable)&&t.preventDefault()}iT();function At(t){if(Xs(t))return qh(t)?`${t}px`:String(t)}function aT(t){if(Xs(t)){if(Array.isArray(t))return{width:At(t[0]),height:At(t[1])};const e=At(t);return{width:e,height:e}}}const cT=/-(\w)/g,jh=t=>t.replace(cT,(e,n)=>n.toUpperCase()),{hasOwnProperty:lT}=Object.prototype;function uT(t,e,n){const s=e[n];Xs(s)&&(!lT.call(t,n)||!$h(s)?t[n]=s:t[n]=Gh(Object(t[n]),s))}function Gh(t,e){return Object.keys(e).forEach(n=>{uT(t,e,n)}),t}var hT={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(t,e)=>`${t}${e}`,rangePrompt:t=>` ${t} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:t=>`${t}`,condition:t=>`${t}`},vanCouponCell:{title:"",count:t=>`${t}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const al=Ws("zh-CN"),cl=Js({"zh-CN":hT}),fT={messages(){return cl[al.value]},use(t,e){al.value=t,this.add({[t]:e})},add(t={}){Gh(cl,t)}};var dT=fT;function pT(t){const e=jh(t)+".";return(n,...s)=>{const r=dT.messages(),i=ol(r,e+n)||ol(r,n);return tT(i)?i(...s):i}}function xo(t,e){return e?typeof e=="string"?` ${t}--${e}`:Array.isArray(e)?e.reduce((n,s)=>n+xo(t,s),""):Object.keys(e).reduce((n,s)=>n+(e[s]?xo(t,s):""),""):""}function mT(t){return(e,n)=>(e&&typeof e!="string"&&(n=e,e=""),e=e?`${t}__${e}`:t,`${e}${xo(e,n)}`)}function fr(t){const e=`van-${t}`;return[e,mT(e),pT(e)]}const gT="van-hairline",_T=`${gT}--surround`;function Ri(t){return t.install=e=>{const{name:n}=t;n&&(e.component(n,t),e.component(jh(`-${n}`),t))},t}const yT={to:[String,Object],url:String,replace:Boolean};function vT({to:t,url:e,replace:n,$router:s}){t&&s?s[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function bT(){const t=Dd().proxy;return()=>vT(t)}const[wT,ll]=fr("badge"),TT={dot:Boolean,max:Vn,tag:Zt("div"),color:String,offset:Array,content:Vn,showZero:sT,position:Zt("top-right")};var CT=pt({name:wT,props:TT,setup(t,{slots:e}){const n=()=>{if(e.content)return!0;const{content:a,showZero:c}=t;return Xs(a)&&a!==""&&(c||a!==0&&a!=="0")},s=()=>{const{dot:a,max:c,content:l}=t;if(!a&&n())return e.content?e.content():Xs(c)&&qh(l)&&+l>+c?`${c}+`:l},r=a=>a.startsWith("-")?a.replace("-",""):`-${a}`,i=it(()=>{const a={background:t.color};if(t.offset){const[c,l]=t.offset,{position:u}=t,[h,f]=u.split("-");e.default?(typeof l=="number"?a[h]=At(h==="top"?l:-l):a[h]=h==="top"?At(l):r(l),typeof c=="number"?a[f]=At(f==="left"?c:-c):a[f]=f==="left"?At(c):r(c)):(a.marginTop=At(l),a.marginLeft=At(c))}return a}),o=()=>{if(n()||t.dot)return pe("div",{class:ll([t.position,{dot:t.dot,fixed:!!e.default}]),style:i.value},[s()])};return()=>{if(e.default){const{tag:a}=t;return pe(a,{class:ll("wrapper")},{default:()=>[e.default(),o()]})}return o()}}});const AT=Ri(CT),[ST,yC]=fr("config-provider"),xT=Symbol(ST),[kT,ul]=fr("icon"),ET=t=>t==null?void 0:t.includes("/"),IT={dot:Boolean,tag:Zt("i"),name:String,size:Vn,badge:Vn,color:String,badgeProps:Object,classPrefix:String};var OT=pt({name:kT,props:IT,setup(t,{slots:e}){const n=Lt(xT,null),s=it(()=>t.classPrefix||(n==null?void 0:n.iconPrefix)||ul());return()=>{const{tag:r,dot:i,name:o,size:a,badge:c,color:l}=t,u=ET(o);return pe(AT,du({dot:i,tag:r,class:[s.value,u?"":`${s.value}-${o}`],style:{color:l,fontSize:At(a)},content:c},t.badgeProps),{default:()=>{var h;return[(h=e.default)==null?void 0:h.call(e),u&&pe("img",{class:ul("image"),src:o},null)]}})}}});const NT=Ri(OT),[MT,Bs]=fr("loading"),DT=Array(12).fill(null).map((t,e)=>pe("i",{class:Bs("line",String(e+1))},null)),FT=pe("svg",{class:Bs("circular"),viewBox:"25 25 50 50"},[pe("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),PT={size:Vn,type:Zt("circular"),color:String,vertical:Boolean,textSize:Vn,textColor:String};var RT=pt({name:MT,props:PT,setup(t,{slots:e}){const n=it(()=>Wh({color:t.color},aT(t.size))),s=()=>{const i=t.type==="spinner"?DT:FT;return pe("span",{class:Bs("spinner",t.type),style:n.value},[e.icon?e.icon():i])},r=()=>{var i;if(e.default)return pe("span",{class:Bs("text"),style:{fontSize:At(t.textSize),color:(i=t.textColor)!=null?i:t.color}},[e.default()])};return()=>{const{type:i,vertical:o}=t;return pe("div",{class:Bs([i,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[s(),r()])}}});const VT=Ri(RT),[BT,Gn]=fr("button"),LT=Wh({},yT,{tag:Zt("button"),text:String,icon:String,type:Zt("default"),size:Zt("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Zt("button"),loadingSize:Vn,loadingText:String,loadingType:String,iconPosition:Zt("left")});var UT=pt({name:BT,props:LT,emits:["click"],setup(t,{emit:e,slots:n}){const s=bT(),r=()=>n.loading?n.loading():pe(VT,{size:t.loadingSize,type:t.loadingType,class:Gn("loading")},null),i=()=>{if(t.loading)return r();if(n.icon)return pe("div",{class:Gn("icon")},[n.icon()]);if(t.icon)return pe(NT,{name:t.icon,class:Gn("icon"),classPrefix:t.iconPrefix},null)},o=()=>{let l;if(t.loading?l=t.loadingText:l=n.default?n.default():t.text,l)return pe("span",{class:Gn("text")},[l])},a=()=>{const{color:l,plain:u}=t;if(l){const h={color:u?l:"white"};return u||(h.background=l),l.includes("gradient")?h.border=0:h.borderColor=l,h}},c=l=>{t.loading?oT(l):t.disabled||(e("click",l),s())};return()=>{const{tag:l,type:u,size:h,block:f,round:d,plain:p,square:m,loading:g,disabled:y,hairline:C,nativeType:x,iconPosition:A}=t,b=[Gn([u,h,{plain:p,block:f,round:d,square:m,loading:g,disabled:y,hairline:C}]),{[_T]:C}];return pe(l,{type:x,class:b,style:a(),disabled:y,onClick:c},{default:()=>[pe("div",{class:Gn("content")},[A==="left"&&i(),o(),A==="right"&&i()])]})}}});const WT=Ri(UT),Vi=pp(Tp);Vi.use(vp());Vi.use(Qw);Vi.mount("#app");Vi.use(WT);export{Vh as M,_a as S,ot as T,Ln as _,Xn as a,j0 as b,Et as c,is as d,Vs as e,de as f,Nn as g,vt as h,Dn as i,pt as j,Pn as k,_C as l,gC as m,we as n,ce as o,yt as p,Ut as q,ve as r,Oh as s,Bt as t,Wo as u,$o as v};
