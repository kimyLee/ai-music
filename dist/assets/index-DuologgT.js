const __vite__fileDeps=["assets/AboutView-DK4_LMYJ.js","assets/AboutView-BANUUOot.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ro(e,t){const n=new Set(e.split(","));return s=>n.has(s)}const At={},ns=[],_e=()=>{},Xh=()=>!1,oi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Po=e=>e.startsWith("onUpdate:"),zt=Object.assign,Vo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Jh=Object.prototype.hasOwnProperty,mt=(e,t)=>Jh.call(e,t),st=Array.isArray,ss=e=>ai(e)==="[object Map]",fl=e=>ai(e)==="[object Set]",ot=e=>typeof e=="function",Wt=e=>typeof e=="string",Wn=e=>typeof e=="symbol",It=e=>e!==null&&typeof e=="object",dl=e=>(It(e)||ot(e))&&ot(e.then)&&ot(e.catch),pl=Object.prototype.toString,ai=e=>pl.call(e),Qh=e=>ai(e).slice(8,-1),ml=e=>ai(e)==="[object Object]",Bo=e=>Wt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ms=Ro(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ci=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},tf=/-(\w)/g,qe=ci(e=>e.replace(tf,(t,n)=>n?n.toUpperCase():"")),ef=/\B([A-Z])/g,vs=ci(e=>e.replace(ef,"-$1").toLowerCase()),li=ci(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gi=ci(e=>e?`on${li(e)}`:""),bn=(e,t)=>!Object.is(e,t),zi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},gl=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},nf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $a;const _l=()=>$a||($a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lo(e){if(st(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=Wt(s)?af(s):Lo(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(Wt(e)||It(e))return e}const sf=/;(?![^(]*\))/g,rf=/:([^]+)/,of=/\/\*[^]*?\*\//g;function af(e){const t={};return e.replace(of,"").split(sf).forEach(n=>{if(n){const s=n.split(rf);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Le(e){let t="";if(Wt(e))t=e;else if(st(e))for(let n=0;n<e.length;n++){const s=Le(e[n]);s&&(t+=s+" ")}else if(It(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const cf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lf=Ro(cf);function yl(e){return!!e||e===""}const Hi=e=>Wt(e)?e:e==null?"":st(e)||It(e)&&(e.toString===pl||!ot(e.toString))?JSON.stringify(e,vl,2):String(e),vl=(e,t)=>t&&t.__v_isRef?vl(e,t.value):ss(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[Ki(s,i)+" =>"]=r,n),{})}:fl(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ki(n))}:Wn(t)?Ki(t):It(t)&&!st(t)&&!ml(t)?String(t):t,Ki=(e,t="")=>{var n;return Wn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ce;class bl{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ce,!t&&Ce&&(this.index=(Ce.scopes||(Ce.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ce;try{return Ce=this,t()}finally{Ce=n}}}on(){Ce=this}off(){Ce=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function uf(e){return new bl(e)}function hf(e,t=Ce){t&&t.active&&t.effects.push(e)}function ff(){return Ce}let Fn;class Uo{constructor(t,n,s,r){this.fn=t,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,hf(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Sn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(df(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),An()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=mn,n=Fn;try{return mn=!0,Fn=this,this._runnings++,qa(this),this.fn()}finally{ja(this),this._runnings--,Fn=n,mn=t}}stop(){this.active&&(qa(this),ja(this),this.onStop&&this.onStop(),this.active=!1)}}function df(e){return e.value}function qa(e){e._trackId++,e._depsLength=0}function ja(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Tl(e.deps[t],e);e.deps.length=e._depsLength}}function Tl(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let mn=!0,co=0;const wl=[];function Sn(){wl.push(mn),mn=!1}function An(){const e=wl.pop();mn=e===void 0?!0:e}function Wo(){co++}function $o(){for(co--;!co&&lo.length;)lo.shift()()}function Cl(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const s=e.deps[e._depsLength];s!==t?(s&&Tl(s,e),e.deps[e._depsLength++]=t):e._depsLength++}}const lo=[];function Sl(e,t,n){Wo();for(const s of e.keys()){let r;s._dirtyLevel<t&&(r??(r=e.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(r??(r=e.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&lo.push(s.scheduler)))}$o()}const Al=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},uo=new WeakMap,Rn=Symbol(""),ho=Symbol("");function ce(e,t,n){if(mn&&Fn){let s=uo.get(e);s||uo.set(e,s=new Map);let r=s.get(n);r||s.set(n,r=Al(()=>s.delete(n))),Cl(Fn,r)}}function Je(e,t,n,s,r,i){const o=uo.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&st(e)){const c=Number(s);o.forEach((l,u)=>{(u==="length"||!Wn(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":st(e)?Bo(n)&&a.push(o.get("length")):(a.push(o.get(Rn)),ss(e)&&a.push(o.get(ho)));break;case"delete":st(e)||(a.push(o.get(Rn)),ss(e)&&a.push(o.get(ho)));break;case"set":ss(e)&&a.push(o.get(Rn));break}Wo();for(const c of a)c&&Sl(c,4);$o()}const pf=Ro("__proto__,__v_isRef,__isVue"),xl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Wn)),Ga=mf();function mf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=yt(this);for(let i=0,o=this.length;i<o;i++)ce(s,"get",i+"");const r=s[t](...n);return r===-1||r===!1?s[t](...n.map(yt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Sn(),Wo();const s=yt(this)[t].apply(this,n);return $o(),An(),s}}),e}function gf(e){Wn(e)||(e=String(e));const t=yt(this);return ce(t,"has",e),t.hasOwnProperty(e)}class kl{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?If:Nl:i?Ol:Il).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=st(t);if(!r){if(o&&mt(Ga,n))return Reflect.get(Ga,n,s);if(n==="hasOwnProperty")return gf}const a=Reflect.get(t,n,s);return(Wn(n)?xl.has(n):pf(n))||(r||ce(t,"get",n),i)?a:le(a)?o&&Bo(n)?a:a.value:It(a)?r?Dl(a):tr(a):a}}class El extends kl{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const c=Ws(i);if(!Lr(s)&&!Ws(s)&&(i=yt(i),s=yt(s)),!st(t)&&le(i)&&!le(s))return c?!1:(i.value=s,!0)}const o=st(t)&&Bo(n)?Number(n)<t.length:mt(t,n),a=Reflect.set(t,n,s,r);return t===yt(r)&&(o?bn(s,i)&&Je(t,"set",n,s):Je(t,"add",n,s)),a}deleteProperty(t,n){const s=mt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Je(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Wn(n)||!xl.has(n))&&ce(t,"has",n),s}ownKeys(t){return ce(t,"iterate",st(t)?"length":Rn),Reflect.ownKeys(t)}}class _f extends kl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const yf=new El,vf=new _f,bf=new El(!0);const qo=e=>e,ui=e=>Reflect.getPrototypeOf(e);function gr(e,t,n=!1,s=!1){e=e.__v_raw;const r=yt(e),i=yt(t);n||(bn(t,i)&&ce(r,"get",t),ce(r,"get",i));const{has:o}=ui(r),a=s?qo:n?zo:$s;if(o.call(r,t))return a(e.get(t));if(o.call(r,i))return a(e.get(i));e!==r&&e.get(t)}function _r(e,t=!1){const n=this.__v_raw,s=yt(n),r=yt(e);return t||(bn(e,r)&&ce(s,"has",e),ce(s,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function yr(e,t=!1){return e=e.__v_raw,!t&&ce(yt(e),"iterate",Rn),Reflect.get(e,"size",e)}function za(e){e=yt(e);const t=yt(this);return ui(t).has.call(t,e)||(t.add(e),Je(t,"add",e,e)),this}function Ha(e,t){t=yt(t);const n=yt(this),{has:s,get:r}=ui(n);let i=s.call(n,e);i||(e=yt(e),i=s.call(n,e));const o=r.call(n,e);return n.set(e,t),i?bn(t,o)&&Je(n,"set",e,t):Je(n,"add",e,t),this}function Ka(e){const t=yt(this),{has:n,get:s}=ui(t);let r=n.call(t,e);r||(e=yt(e),r=n.call(t,e)),s&&s.call(t,e);const i=t.delete(e);return r&&Je(t,"delete",e,void 0),i}function Za(){const e=yt(this),t=e.size!==0,n=e.clear();return t&&Je(e,"clear",void 0,void 0),n}function vr(e,t){return function(s,r){const i=this,o=i.__v_raw,a=yt(o),c=t?qo:e?zo:$s;return!e&&ce(a,"iterate",Rn),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function br(e,t,n){return function(...s){const r=this.__v_raw,i=yt(r),o=ss(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=r[e](...s),u=n?qo:t?zo:$s;return!t&&ce(i,"iterate",c?ho:Rn),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function on(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Tf(){const e={get(i){return gr(this,i)},get size(){return yr(this)},has:_r,add:za,set:Ha,delete:Ka,clear:Za,forEach:vr(!1,!1)},t={get(i){return gr(this,i,!1,!0)},get size(){return yr(this)},has:_r,add:za,set:Ha,delete:Ka,clear:Za,forEach:vr(!1,!0)},n={get(i){return gr(this,i,!0)},get size(){return yr(this,!0)},has(i){return _r.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:vr(!0,!1)},s={get(i){return gr(this,i,!0,!0)},get size(){return yr(this,!0)},has(i){return _r.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:vr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=br(i,!1,!1),n[i]=br(i,!0,!1),t[i]=br(i,!1,!0),s[i]=br(i,!0,!0)}),[e,n,t,s]}const[wf,Cf,Sf,Af]=Tf();function jo(e,t){const n=t?e?Af:Sf:e?Cf:wf;return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(mt(n,r)&&r in s?n:s,r,i)}const xf={get:jo(!1,!1)},kf={get:jo(!1,!0)},Ef={get:jo(!0,!1)};const Il=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,If=new WeakMap;function Of(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nf(e){return e.__v_skip||!Object.isExtensible(e)?0:Of(Qh(e))}function tr(e){return Ws(e)?e:Go(e,!1,yf,xf,Il)}function Ml(e){return Go(e,!1,bf,kf,Ol)}function Dl(e){return Go(e,!0,vf,Ef,Nl)}function Go(e,t,n,s,r){if(!It(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=r.get(e);if(i)return i;const o=Nf(e);if(o===0)return e;const a=new Proxy(e,o===2?s:n);return r.set(e,a),a}function Ds(e){return Ws(e)?Ds(e.__v_raw):!!(e&&e.__v_isReactive)}function Ws(e){return!!(e&&e.__v_isReadonly)}function Lr(e){return!!(e&&e.__v_isShallow)}function Fl(e){return e?!!e.__v_raw:!1}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function Rl(e){return Object.isExtensible(e)&&gl(e,"__v_skip",!0),e}const $s=e=>It(e)?tr(e):e,zo=e=>It(e)?Dl(e):e;class Pl{constructor(t,n,s,r){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Uo(()=>t(this._value),()=>Mr(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const t=yt(this);return(!t._cacheable||t.effect.dirty)&&bn(t._value,t._value=t.effect.run())&&Mr(t,4),Vl(t),t.effect._dirtyLevel>=2&&Mr(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Mf(e,t,n=!1){let s,r;const i=ot(e);return i?(s=e,r=_e):(s=e.get,r=e.set),new Pl(s,r,i||!r,n)}function Vl(e){var t;mn&&Fn&&(e=yt(e),Cl(Fn,(t=e.dep)!=null?t:e.dep=Al(()=>e.dep=void 0,e instanceof Pl?e:void 0)))}function Mr(e,t=4,n){e=yt(e);const s=e.dep;s&&Sl(s,t)}function le(e){return!!(e&&e.__v_isRef===!0)}function qs(e){return Bl(e,!1)}function Df(e){return Bl(e,!0)}function Bl(e,t){return le(e)?e:new Ff(e,t)}class Ff{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:yt(t),this._value=n?t:$s(t)}get value(){return Vl(this),this._value}set value(t){const n=this.__v_isShallow||Lr(t)||Ws(t);t=n?t:yt(t),bn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:$s(t),Mr(this,4))}}function rs(e){return le(e)?e.value:e}const Rf={get:(e,t,n)=>rs(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return le(r)&&!le(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function Ll(e){return Ds(e)?e:new Proxy(e,Rf)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gn(e,t,n,s){try{return s?e(...s):e()}catch(r){hi(r,t,n)}}function Ie(e,t,n,s){if(ot(e)){const r=gn(e,t,n,s);return r&&dl(r)&&r.catch(i=>{hi(i,t,n)}),r}if(st(e)){const r=[];for(let i=0;i<e.length;i++)r.push(Ie(e[i],t,n,s));return r}}function hi(e,t,n,s=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Sn(),gn(c,null,10,[e,o,a]),An();return}}}let js=!1,fo=!1;const Yt=[];let Be=0;const is=[];let un=null,Nn=0;const Ul=Promise.resolve();let Ho=null;function Wl(e){const t=Ho||Ul;return e?t.then(this?e.bind(this):e):t}function Pf(e){let t=Be+1,n=Yt.length;for(;t<n;){const s=t+n>>>1,r=Yt[s],i=Gs(r);i<e||i===e&&r.pre?t=s+1:n=s}return t}function Ko(e){(!Yt.length||!Yt.includes(e,js&&e.allowRecurse?Be+1:Be))&&(e.id==null?Yt.push(e):Yt.splice(Pf(e.id),0,e),$l())}function $l(){!js&&!fo&&(fo=!0,Ho=Ul.then(jl))}function Vf(e){const t=Yt.indexOf(e);t>Be&&Yt.splice(t,1)}function Bf(e){st(e)?is.push(...e):(!un||!un.includes(e,e.allowRecurse?Nn+1:Nn))&&is.push(e),$l()}function Ya(e,t,n=js?Be+1:0){for(;n<Yt.length;n++){const s=Yt[n];if(s&&s.pre){if(e&&s.id!==e.uid)continue;Yt.splice(n,1),n--,s()}}}function ql(e){if(is.length){const t=[...new Set(is)].sort((n,s)=>Gs(n)-Gs(s));if(is.length=0,un){un.push(...t);return}for(un=t,Nn=0;Nn<un.length;Nn++)un[Nn]();un=null,Nn=0}}const Gs=e=>e.id==null?1/0:e.id,Lf=(e,t)=>{const n=Gs(e)-Gs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function jl(e){fo=!1,js=!0,Yt.sort(Lf);try{for(Be=0;Be<Yt.length;Be++){const t=Yt[Be];t&&t.active!==!1&&gn(t,null,14)}}finally{Be=0,Yt.length=0,ql(),js=!1,Ho=null,(Yt.length||is.length)&&jl()}}function Uf(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||At;let r=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=s[u]||At;f&&(r=n.map(d=>Wt(d)?d.trim():d)),h&&(r=n.map(nf))}let a,c=s[a=Gi(t)]||s[a=Gi(qe(t))];!c&&i&&(c=s[a=Gi(vs(t))]),c&&Ie(c,e,6,r);const l=s[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ie(l,e,6,r)}}function Gl(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let o={},a=!1;if(!ot(e)){const c=l=>{const u=Gl(l,t,!0);u&&(a=!0,zt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(It(e)&&s.set(e,null),null):(st(i)?i.forEach(c=>o[c]=null):zt(o,i),It(e)&&s.set(e,o),o)}function fi(e,t){return!e||!oi(t)?!1:(t=t.slice(2).replace(/Once$/,""),mt(e,t[0].toLowerCase()+t.slice(1))||mt(e,vs(t))||mt(e,t))}let Ut=null,di=null;function Ur(e){const t=Ut;return Ut=e,di=e&&e.type.__scopeId||null,t}function zl(e){di=e}function Hl(){di=null}function Wf(e,t=Ut,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&ac(-1);const i=Ur(t);let o;try{o=e(...r)}finally{Ur(i),s._d&&ac(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Zi(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:f,setupState:d,ctx:p,inheritAttrs:m}=e,g=Ur(e);let y,C;try{if(n.shapeFlag&4){const S=r||s,b=S;y=Ve(l.call(b,S,u,h,d,f,p)),C=a}else{const S=t;y=Ve(S.length>1?S(h,{attrs:a,slots:o,emit:c}):S(h,null)),C=t.props?a:$f(a)}}catch(S){Vs.length=0,hi(S,e,1),y=pt(cs)}let x=y;if(C&&m!==!1){const S=Object.keys(C),{shapeFlag:b}=x;S.length&&b&7&&(i&&S.some(Po)&&(C=qf(C,i)),x=ls(x,C,!1,!0))}return n.dirs&&(x=ls(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),y=x,Ur(g),y}const $f=e=>{let t;for(const n in e)(n==="class"||n==="style"||oi(n))&&((t||(t={}))[n]=e[n]);return t},qf=(e,t)=>{const n={};for(const s in e)(!Po(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function jf(e,t,n){const{props:s,children:r,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Xa(s,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!fi(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Xa(s,o,l):!0:!!o;return!1}function Xa(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!fi(n,i))return!0}return!1}function Gf({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const zf="components";function Tn(e,t){return Kf(zf,e,!0,t)||e}const Hf=Symbol.for("v-ndc");function Kf(e,t,n=!0,s=!1){const r=Ut||Kt;if(r){const i=r.type;{const a=jd(i,!1);if(a&&(a===t||a===qe(t)||a===li(qe(t))))return i}const o=Ja(r[e]||i[e],t)||Ja(r.appContext[e],t);return!o&&s?i:o}}function Ja(e,t){return e&&(e[t]||e[qe(t)]||e[li(qe(t))])}const Zf=e=>e.__isSuspense;function Yf(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):Bf(e)}const Xf=Symbol.for("v-scx"),Jf=()=>Ue(Xf),Tr={};function Dr(e,t,n){return Kl(e,t,n)}function Kl(e,t,{immediate:n,deep:s,flush:r,once:i,onTrack:o,onTrigger:a}=At){if(t&&i){const w=t;t=(...E)=>{w(...E),b()}}const c=Kt,l=w=>s===!0?w:Mn(w,s===!1?1:void 0);let u,h=!1,f=!1;if(le(e)?(u=()=>e.value,h=Lr(e)):Ds(e)?(u=()=>l(e),h=!0):st(e)?(f=!0,h=e.some(w=>Ds(w)||Lr(w)),u=()=>e.map(w=>{if(le(w))return w.value;if(Ds(w))return l(w);if(ot(w))return gn(w,c,2)})):ot(e)?t?u=()=>gn(e,c,2):u=()=>(d&&d(),Ie(e,c,3,[p])):u=_e,t&&s){const w=u;u=()=>Mn(w())}let d,p=w=>{d=x.onStop=()=>{gn(w,c,4),d=x.onStop=void 0}},m;if(gi)if(p=_e,t?n&&Ie(t,c,3,[u(),f?[]:void 0,p]):u(),r==="sync"){const w=Jf();m=w.__watcherHandles||(w.__watcherHandles=[])}else return _e;let g=f?new Array(e.length).fill(Tr):Tr;const y=()=>{if(!(!x.active||!x.dirty))if(t){const w=x.run();(s||h||(f?w.some((E,A)=>bn(E,g[A])):bn(w,g)))&&(d&&d(),Ie(t,c,3,[w,g===Tr?void 0:f&&g[0]===Tr?[]:g,p]),g=w)}else x.run()};y.allowRecurse=!!t;let C;r==="sync"?C=y:r==="post"?C=()=>ie(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),C=()=>Ko(y));const x=new Uo(u,_e,C),S=ff(),b=()=>{x.stop(),S&&Vo(S.effects,x)};return t?n?y():g=x.run():r==="post"?ie(x.run.bind(x),c&&c.suspense):x.run(),m&&m.push(b),b}function Qf(e,t,n){const s=this.proxy,r=Wt(e)?e.includes(".")?Zl(s,e):()=>s[e]:e.bind(s,s);let i;ot(t)?i=t:(i=t.handler,n=t);const o=er(this),a=Kl(r,i.bind(s),n);return o(),a}function Zl(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Mn(e,t=1/0,n){if(t<=0||!It(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,le(e))Mn(e.value,t,n);else if(st(e))for(let s=0;s<e.length;s++)Mn(e[s],t,n);else if(fl(e)||ss(e))e.forEach(s=>{Mn(s,t,n)});else if(ml(e))for(const s in e)Mn(e[s],t,n);return e}function td(e,t){if(Ut===null)return e;const n=_i(Ut)||Ut.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,a,c=At]=t[r];i&&(ot(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function In(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Sn(),Ie(c,n,8,[e.el,a,e,t]),An())}}/*! #__NO_SIDE_EFFECTS__ */function ge(e,t){return ot(e)?zt({name:e.name},t,{setup:e}):e}const Fs=e=>!!e.type.__asyncLoader,Yl=e=>e.type.__isKeepAlive;function ed(e,t){Xl(e,"a",t)}function nd(e,t){Xl(e,"da",t)}function Xl(e,t,n=Kt){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(pi(t,s,n),n){let r=n.parent;for(;r&&r.parent;)Yl(r.parent.vnode)&&sd(s,t,n,r),r=r.parent}}function sd(e,t,n,s){const r=pi(t,e,s,!0);Jl(()=>{Vo(s[t],r)},n)}function pi(e,t,n=Kt,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Sn();const a=er(n),c=Ie(t,n,e,o);return a(),An(),c});return s?r.unshift(i):r.push(i),i}}const en=e=>(t,n=Kt)=>(!gi||e==="sp")&&pi(e,(...s)=>t(...s),n),rd=en("bm"),id=en("m"),od=en("bu"),ad=en("u"),cd=en("bum"),Jl=en("um"),ld=en("sp"),ud=en("rtg"),hd=en("rtc");function fd(e,t=Kt){pi("ec",e,t)}function Ql(e,t,n,s){let r;const i=n;if(st(e)||Wt(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,i)}else if(It(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,i));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=t(e[l],l,a,i)}}else r=[];return r}function dd(e,t,n={},s,r){if(Ut.isCE||Ut.parent&&Fs(Ut.parent)&&Ut.parent.isCE)return pt("slot",n,s);let i=e[t];i&&i._c&&(i._d=!1),ve();const o=i&&tu(i(n)),a=pu(fe,{key:n.key||o&&o.key||`_${t}`},o||[],o&&e._===1?64:-2);return i&&i._c&&(i._d=!0),a}function tu(e){return e.some(t=>$r(t)?!(t.type===cs||t.type===fe&&!tu(t.children)):!0)?e:null}const po=e=>e?_u(e)?_i(e)||e.proxy:po(e.parent):null,Rs=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>po(e.parent),$root:e=>po(e.root),$emit:e=>e.emit,$options:e=>Zo(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Ko(e.update)}),$nextTick:e=>e.n||(e.n=Wl.bind(e.proxy)),$watch:e=>Qf.bind(e)}),Yi=(e,t)=>e!==At&&!e.__isScriptSetup&&mt(e,t),pd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(Yi(s,t))return o[t]=1,s[t];if(r!==At&&mt(r,t))return o[t]=2,r[t];if((l=e.propsOptions[0])&&mt(l,t))return o[t]=3,i[t];if(n!==At&&mt(n,t))return o[t]=4,n[t];mo&&(o[t]=0)}}const u=Rs[t];let h,f;if(u)return t==="$attrs"&&ce(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==At&&mt(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,mt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return Yi(r,t)?(r[t]=n,!0):s!==At&&mt(s,t)?(s[t]=n,!0):mt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||e!==At&&mt(e,o)||Yi(t,o)||(a=i[0])&&mt(a,o)||mt(s,o)||mt(Rs,o)||mt(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:mt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Qa(e){return st(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let mo=!0;function md(e){const t=Zo(e),n=e.proxy,s=e.ctx;mo=!1,t.beforeCreate&&tc(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:C,destroyed:x,unmounted:S,render:b,renderTracked:w,renderTriggered:E,errorCaptured:A,serverPrefetch:L,expose:R,inheritAttrs:V,components:M,directives:j,filters:G}=t;if(l&&gd(l,s,null),o)for(const W in o){const H=o[W];ot(H)&&(s[W]=H.bind(n))}if(r){const W=r.call(n,n);It(W)&&(e.data=tr(W))}if(mo=!0,i)for(const W in i){const H=i[W],Y=ot(H)?H.bind(n,n):ot(H.get)?H.get.bind(n,n):_e,et=!ot(H)&&ot(H.set)?H.set.bind(n):_e,Q=ae({get:Y,set:et});Object.defineProperty(s,W,{enumerable:!0,configurable:!0,get:()=>Q.value,set:rt=>Q.value=rt})}if(a)for(const W in a)eu(a[W],s,n,W);if(c){const W=ot(c)?c.call(n):c;Reflect.ownKeys(W).forEach(H=>{Fr(H,W[H])})}u&&tc(u,e,"c");function q(W,H){st(H)?H.forEach(Y=>W(Y.bind(n))):H&&W(H.bind(n))}if(q(rd,h),q(id,f),q(od,d),q(ad,p),q(ed,m),q(nd,g),q(fd,A),q(hd,w),q(ud,E),q(cd,C),q(Jl,S),q(ld,L),st(R))if(R.length){const W=e.exposed||(e.exposed={});R.forEach(H=>{Object.defineProperty(W,H,{get:()=>n[H],set:Y=>n[H]=Y})})}else e.exposed||(e.exposed={});b&&e.render===_e&&(e.render=b),V!=null&&(e.inheritAttrs=V),M&&(e.components=M),j&&(e.directives=j)}function gd(e,t,n=_e){st(e)&&(e=go(e));for(const s in e){const r=e[s];let i;It(r)?"default"in r?i=Ue(r.from||s,r.default,!0):i=Ue(r.from||s):i=Ue(r),le(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function tc(e,t,n){Ie(st(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function eu(e,t,n,s){const r=s.includes(".")?Zl(n,s):()=>n[s];if(Wt(e)){const i=t[e];ot(i)&&Dr(r,i)}else if(ot(e))Dr(r,e.bind(n));else if(It(e))if(st(e))e.forEach(i=>eu(i,t,n,s));else{const i=ot(e.handler)?e.handler.bind(n):t[e.handler];ot(i)&&Dr(r,i,e)}}function Zo(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!r.length&&!n&&!s?c=t:(c={},r.length&&r.forEach(l=>Wr(c,l,o,!0)),Wr(c,t,o)),It(t)&&i.set(t,c),c}function Wr(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&Wr(e,i,n,!0),r&&r.forEach(o=>Wr(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=_d[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const _d={data:ec,props:nc,emits:nc,methods:Ns,computed:Ns,beforeCreate:te,created:te,beforeMount:te,mounted:te,beforeUpdate:te,updated:te,beforeDestroy:te,beforeUnmount:te,destroyed:te,unmounted:te,activated:te,deactivated:te,errorCaptured:te,serverPrefetch:te,components:Ns,directives:Ns,watch:vd,provide:ec,inject:yd};function ec(e,t){return t?e?function(){return zt(ot(e)?e.call(this,this):e,ot(t)?t.call(this,this):t)}:t:e}function yd(e,t){return Ns(go(e),go(t))}function go(e){if(st(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function te(e,t){return e?[...new Set([].concat(e,t))]:t}function Ns(e,t){return e?zt(Object.create(null),e,t):t}function nc(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:zt(Object.create(null),Qa(e),Qa(t??{})):t}function vd(e,t){if(!e)return t;if(!t)return e;const n=zt(Object.create(null),e);for(const s in t)n[s]=te(e[s],t[s]);return n}function nu(){return{app:null,config:{isNativeTag:Xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bd=0;function Td(e,t){return function(s,r=null){ot(s)||(s=zt({},s)),r!=null&&!It(r)&&(r=null);const i=nu(),o=new WeakSet;let a=!1;const c=i.app={_uid:bd++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:zd,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&ot(l.install)?(o.add(l),l.install(c,...u)):ot(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=pt(s,r);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,l):e(f,l,h),a=!0,c._container=l,l.__vue_app__=c,_i(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){const u=Ps;Ps=c;try{return l()}finally{Ps=u}}};return c}}let Ps=null;function Fr(e,t){if(Kt){let n=Kt.provides;const s=Kt.parent&&Kt.parent.provides;s===n&&(n=Kt.provides=Object.create(s)),n[e]=t}}function Ue(e,t,n=!1){const s=Kt||Ut;if(s||Ps){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ps._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ot(t)?t.call(s&&s.proxy):t}}const su={},ru=()=>Object.create(su),iu=e=>Object.getPrototypeOf(e)===su;function wd(e,t,n,s=!1){const r={},i=ru();e.propsDefaults=Object.create(null),ou(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=s?r:Ml(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function Cd(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,a=yt(r),[c]=e.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(fi(e.emitsOptions,f))continue;const d=t[f];if(c)if(mt(i,f))d!==i[f]&&(i[f]=d,l=!0);else{const p=qe(f);r[p]=_o(c,a,p,d,e,!1)}else d!==i[f]&&(i[f]=d,l=!0)}}}else{ou(e,t,r,i)&&(l=!0);let u;for(const h in a)(!t||!mt(t,h)&&((u=vs(h))===h||!mt(t,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=_o(c,a,h,void 0,e,!0)):delete r[h]);if(i!==a)for(const h in i)(!t||!mt(t,h))&&(delete i[h],l=!0)}l&&Je(e.attrs,"set","")}function ou(e,t,n,s){const[r,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Ms(c))continue;const l=t[c];let u;r&&mt(r,u=qe(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:fi(e.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=yt(n),l=a||At;for(let u=0;u<i.length;u++){const h=i[u];n[h]=_o(r,c,h,l[h],e,!mt(l,h))}}return o}function _o(e,t,n,s,r,i){const o=e[n];if(o!=null){const a=mt(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ot(c)){const{propsDefaults:l}=r;if(n in l)s=l[n];else{const u=er(r);s=l[n]=c.call(null,t),u()}}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===vs(n))&&(s=!0))}return s}function au(e,t,n=!1){const s=t.propsCache,r=s.get(e);if(r)return r;const i=e.props,o={},a=[];let c=!1;if(!ot(e)){const u=h=>{c=!0;const[f,d]=au(h,t,!0);zt(o,f),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return It(e)&&s.set(e,ns),ns;if(st(i))for(let u=0;u<i.length;u++){const h=qe(i[u]);sc(h)&&(o[h]=At)}else if(i)for(const u in i){const h=qe(u);if(sc(h)){const f=i[u],d=o[h]=st(f)||ot(f)?{type:f}:zt({},f);if(d){const p=oc(Boolean,d.type),m=oc(String,d.type);d[0]=p>-1,d[1]=m<0||p<m,(p>-1||mt(d,"default"))&&a.push(h)}}}const l=[o,a];return It(e)&&s.set(e,l),l}function sc(e){return e[0]!=="$"&&!Ms(e)}function rc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function ic(e,t){return rc(e)===rc(t)}function oc(e,t){return st(t)?t.findIndex(n=>ic(n,e)):ot(t)&&ic(t,e)?0:-1}const cu=e=>e[0]==="_"||e==="$stable",Yo=e=>st(e)?e.map(Ve):[Ve(e)],Sd=(e,t,n)=>{if(t._n)return t;const s=Wf((...r)=>Yo(t(...r)),n);return s._c=!1,s},lu=(e,t,n)=>{const s=e._ctx;for(const r in e){if(cu(r))continue;const i=e[r];if(ot(i))t[r]=Sd(r,i,s);else if(i!=null){const o=Yo(i);t[r]=()=>o}}},uu=(e,t)=>{const n=Yo(t);e.slots.default=()=>n},Ad=(e,t)=>{const n=e.slots=ru();if(e.vnode.shapeFlag&32){const s=t._;s?(zt(n,t),gl(n,"_",s,!0)):lu(t,n)}else t&&uu(e,t)},xd=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,o=At;if(s.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(zt(r,t),!n&&a===1&&delete r._):(i=!t.$stable,lu(t,r)),o=t}else t&&(uu(e,t),o={default:1});if(i)for(const a in r)!cu(a)&&o[a]==null&&delete r[a]};function yo(e,t,n,s,r=!1){if(st(e)){e.forEach((f,d)=>yo(f,t&&(st(t)?t[d]:t),n,s,r));return}if(Fs(s)&&!r)return;const i=s.shapeFlag&4?_i(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===At?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Wt(l)?(u[l]=null,mt(h,l)&&(h[l]=null)):le(l)&&(l.value=null)),ot(c))gn(c,a,12,[o,u]);else{const f=Wt(c),d=le(c);if(f||d){const p=()=>{if(e.f){const m=f?mt(h,c)?h[c]:u[c]:c.value;r?st(m)&&Vo(m,i):st(m)?m.includes(i)||m.push(i):f?(u[c]=[i],mt(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else f?(u[c]=o,mt(h,c)&&(h[c]=o)):d&&(c.value=o,e.k&&(u[e.k]=o))};o?(p.id=-1,ie(p,n)):p()}}}const ie=Yf;function kd(e){return Ed(e)}function Ed(e,t){const n=_l();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=_e,insertStaticContent:p}=e,m=(_,v,T,k=null,I=null,F=null,P=void 0,D=null,U=!!v.dynamicChildren)=>{if(_===v)return;_&&!Es(_,v)&&(k=O(_),rt(_,I,F,!0),_=null),v.patchFlag===-2&&(U=!1,v.dynamicChildren=null);const{type:B,ref:z,shapeFlag:tt}=v;switch(B){case mi:g(_,v,T,k);break;case cs:y(_,v,T,k);break;case Ji:_==null&&C(v,T,k,P);break;case fe:M(_,v,T,k,I,F,P,D,U);break;default:tt&1?b(_,v,T,k,I,F,P,D,U):tt&6?j(_,v,T,k,I,F,P,D,U):(tt&64||tt&128)&&B.process(_,v,T,k,I,F,P,D,U,K)}z!=null&&I&&yo(z,_&&_.ref,F,v||_,!v)},g=(_,v,T,k)=>{if(_==null)s(v.el=a(v.children),T,k);else{const I=v.el=_.el;v.children!==_.children&&l(I,v.children)}},y=(_,v,T,k)=>{_==null?s(v.el=c(v.children||""),T,k):v.el=_.el},C=(_,v,T,k)=>{[_.el,_.anchor]=p(_.children,v,T,k,_.el,_.anchor)},x=({el:_,anchor:v},T,k)=>{let I;for(;_&&_!==v;)I=f(_),s(_,T,k),_=I;s(v,T,k)},S=({el:_,anchor:v})=>{let T;for(;_&&_!==v;)T=f(_),r(_),_=T;r(v)},b=(_,v,T,k,I,F,P,D,U)=>{v.type==="svg"?P="svg":v.type==="math"&&(P="mathml"),_==null?w(v,T,k,I,F,P,D,U):L(_,v,I,F,P,D,U)},w=(_,v,T,k,I,F,P,D)=>{let U,B;const{props:z,shapeFlag:tt,transition:J,dirs:nt}=_;if(U=_.el=o(_.type,F,z&&z.is,z),tt&8?u(U,_.children):tt&16&&A(_.children,U,null,k,I,Xi(_,F),P,D),nt&&In(_,null,k,"created"),E(U,_,_.scopeId,P,k),z){for(const Tt in z)Tt!=="value"&&!Ms(Tt)&&i(U,Tt,null,z[Tt],F,_.children,k,I,ct);"value"in z&&i(U,"value",null,z.value,F),(B=z.onVnodeBeforeMount)&&Pe(B,k,_)}nt&&In(_,null,k,"beforeMount");const dt=Id(I,J);dt&&J.beforeEnter(U),s(U,v,T),((B=z&&z.onVnodeMounted)||dt||nt)&&ie(()=>{B&&Pe(B,k,_),dt&&J.enter(U),nt&&In(_,null,k,"mounted")},I)},E=(_,v,T,k,I)=>{if(T&&d(_,T),k)for(let F=0;F<k.length;F++)d(_,k[F]);if(I){let F=I.subTree;if(v===F){const P=I.vnode;E(_,P,P.scopeId,P.slotScopeIds,I.parent)}}},A=(_,v,T,k,I,F,P,D,U=0)=>{for(let B=U;B<_.length;B++){const z=_[B]=D?hn(_[B]):Ve(_[B]);m(null,z,v,T,k,I,F,P,D)}},L=(_,v,T,k,I,F,P)=>{const D=v.el=_.el;let{patchFlag:U,dynamicChildren:B,dirs:z}=v;U|=_.patchFlag&16;const tt=_.props||At,J=v.props||At;let nt;if(T&&On(T,!1),(nt=J.onVnodeBeforeUpdate)&&Pe(nt,T,v,_),z&&In(v,_,T,"beforeUpdate"),T&&On(T,!0),B?R(_.dynamicChildren,B,D,T,k,Xi(v,I),F):P||H(_,v,D,null,T,k,Xi(v,I),F,!1),U>0){if(U&16)V(D,v,tt,J,T,k,I);else if(U&2&&tt.class!==J.class&&i(D,"class",null,J.class,I),U&4&&i(D,"style",tt.style,J.style,I),U&8){const dt=v.dynamicProps;for(let Tt=0;Tt<dt.length;Tt++){const kt=dt[Tt],jt=tt[kt],we=J[kt];(we!==jt||kt==="value")&&i(D,kt,jt,we,I,_.children,T,k,ct)}}U&1&&_.children!==v.children&&u(D,v.children)}else!P&&B==null&&V(D,v,tt,J,T,k,I);((nt=J.onVnodeUpdated)||z)&&ie(()=>{nt&&Pe(nt,T,v,_),z&&In(v,_,T,"updated")},k)},R=(_,v,T,k,I,F,P)=>{for(let D=0;D<v.length;D++){const U=_[D],B=v[D],z=U.el&&(U.type===fe||!Es(U,B)||U.shapeFlag&70)?h(U.el):T;m(U,B,z,null,k,I,F,P,!0)}},V=(_,v,T,k,I,F,P)=>{if(T!==k){if(T!==At)for(const D in T)!Ms(D)&&!(D in k)&&i(_,D,T[D],null,P,v.children,I,F,ct);for(const D in k){if(Ms(D))continue;const U=k[D],B=T[D];U!==B&&D!=="value"&&i(_,D,B,U,P,v.children,I,F,ct)}"value"in k&&i(_,"value",T.value,k.value,P)}},M=(_,v,T,k,I,F,P,D,U)=>{const B=v.el=_?_.el:a(""),z=v.anchor=_?_.anchor:a("");let{patchFlag:tt,dynamicChildren:J,slotScopeIds:nt}=v;nt&&(D=D?D.concat(nt):nt),_==null?(s(B,T,k),s(z,T,k),A(v.children||[],T,z,I,F,P,D,U)):tt>0&&tt&64&&J&&_.dynamicChildren?(R(_.dynamicChildren,J,T,I,F,P,D),(v.key!=null||I&&v===I.subTree)&&hu(_,v,!0)):H(_,v,T,z,I,F,P,D,U)},j=(_,v,T,k,I,F,P,D,U)=>{v.slotScopeIds=D,_==null?v.shapeFlag&512?I.ctx.activate(v,T,k,P,U):G(v,T,k,I,F,P,U):X(_,v,U)},G=(_,v,T,k,I,F,P)=>{const D=_.component=Bd(_,k,I);if(Yl(_)&&(D.ctx.renderer=K),Ud(D),D.asyncDep){if(I&&I.registerDep(D,q),!_.el){const U=D.subTree=pt(cs);y(null,U,v,T)}}else q(D,_,v,T,I,F,P)},X=(_,v,T)=>{const k=v.component=_.component;if(jf(_,v,T))if(k.asyncDep&&!k.asyncResolved){W(k,v,T);return}else k.next=v,Vf(k.update),k.effect.dirty=!0,k.update();else v.el=_.el,k.vnode=v},q=(_,v,T,k,I,F,P)=>{const D=()=>{if(_.isMounted){let{next:z,bu:tt,u:J,parent:nt,vnode:dt}=_;{const zn=fu(_);if(zn){z&&(z.el=dt.el,W(_,z,P)),zn.asyncDep.then(()=>{_.isUnmounted||D()});return}}let Tt=z,kt;On(_,!1),z?(z.el=dt.el,W(_,z,P)):z=dt,tt&&zi(tt),(kt=z.props&&z.props.onVnodeBeforeUpdate)&&Pe(kt,nt,z,dt),On(_,!0);const jt=Zi(_),we=_.subTree;_.subTree=jt,m(we,jt,h(we.el),O(we),_,I,F),z.el=jt.el,Tt===null&&Gf(_,jt.el),J&&ie(J,I),(kt=z.props&&z.props.onVnodeUpdated)&&ie(()=>Pe(kt,nt,z,dt),I)}else{let z;const{el:tt,props:J}=v,{bm:nt,m:dt,parent:Tt}=_,kt=Fs(v);if(On(_,!1),nt&&zi(nt),!kt&&(z=J&&J.onVnodeBeforeMount)&&Pe(z,Tt,v),On(_,!0),tt&&gt){const jt=()=>{_.subTree=Zi(_),gt(tt,_.subTree,_,I,null)};kt?v.type.__asyncLoader().then(()=>!_.isUnmounted&&jt()):jt()}else{const jt=_.subTree=Zi(_);m(null,jt,T,k,_,I,F),v.el=jt.el}if(dt&&ie(dt,I),!kt&&(z=J&&J.onVnodeMounted)){const jt=v;ie(()=>Pe(z,Tt,jt),I)}(v.shapeFlag&256||Tt&&Fs(Tt.vnode)&&Tt.vnode.shapeFlag&256)&&_.a&&ie(_.a,I),_.isMounted=!0,v=T=k=null}},U=_.effect=new Uo(D,_e,()=>Ko(B),_.scope),B=_.update=()=>{U.dirty&&U.run()};B.id=_.uid,On(_,!0),B()},W=(_,v,T)=>{v.component=_;const k=_.vnode.props;_.vnode=v,_.next=null,Cd(_,v.props,k,T),xd(_,v.children,T),Sn(),Ya(_),An()},H=(_,v,T,k,I,F,P,D,U=!1)=>{const B=_&&_.children,z=_?_.shapeFlag:0,tt=v.children,{patchFlag:J,shapeFlag:nt}=v;if(J>0){if(J&128){et(B,tt,T,k,I,F,P,D,U);return}else if(J&256){Y(B,tt,T,k,I,F,P,D,U);return}}nt&8?(z&16&&ct(B,I,F),tt!==B&&u(T,tt)):z&16?nt&16?et(B,tt,T,k,I,F,P,D,U):ct(B,I,F,!0):(z&8&&u(T,""),nt&16&&A(tt,T,k,I,F,P,D,U))},Y=(_,v,T,k,I,F,P,D,U)=>{_=_||ns,v=v||ns;const B=_.length,z=v.length,tt=Math.min(B,z);let J;for(J=0;J<tt;J++){const nt=v[J]=U?hn(v[J]):Ve(v[J]);m(_[J],nt,T,null,I,F,P,D,U)}B>z?ct(_,I,F,!0,!1,tt):A(v,T,k,I,F,P,D,U,tt)},et=(_,v,T,k,I,F,P,D,U)=>{let B=0;const z=v.length;let tt=_.length-1,J=z-1;for(;B<=tt&&B<=J;){const nt=_[B],dt=v[B]=U?hn(v[B]):Ve(v[B]);if(Es(nt,dt))m(nt,dt,T,null,I,F,P,D,U);else break;B++}for(;B<=tt&&B<=J;){const nt=_[tt],dt=v[J]=U?hn(v[J]):Ve(v[J]);if(Es(nt,dt))m(nt,dt,T,null,I,F,P,D,U);else break;tt--,J--}if(B>tt){if(B<=J){const nt=J+1,dt=nt<z?v[nt].el:k;for(;B<=J;)m(null,v[B]=U?hn(v[B]):Ve(v[B]),T,dt,I,F,P,D,U),B++}}else if(B>J)for(;B<=tt;)rt(_[B],I,F,!0),B++;else{const nt=B,dt=B,Tt=new Map;for(B=dt;B<=J;B++){const he=v[B]=U?hn(v[B]):Ve(v[B]);he.key!=null&&Tt.set(he.key,B)}let kt,jt=0;const we=J-dt+1;let zn=!1,La=0;const ks=new Array(we);for(B=0;B<we;B++)ks[B]=0;for(B=nt;B<=tt;B++){const he=_[B];if(jt>=we){rt(he,I,F,!0);continue}let Re;if(he.key!=null)Re=Tt.get(he.key);else for(kt=dt;kt<=J;kt++)if(ks[kt-dt]===0&&Es(he,v[kt])){Re=kt;break}Re===void 0?rt(he,I,F,!0):(ks[Re-dt]=B+1,Re>=La?La=Re:zn=!0,m(he,v[Re],T,null,I,F,P,D,U),jt++)}const Ua=zn?Od(ks):ns;for(kt=Ua.length-1,B=we-1;B>=0;B--){const he=dt+B,Re=v[he],Wa=he+1<z?v[he+1].el:k;ks[B]===0?m(null,Re,T,Wa,I,F,P,D,U):zn&&(kt<0||B!==Ua[kt]?Q(Re,T,Wa,2):kt--)}}},Q=(_,v,T,k,I=null)=>{const{el:F,type:P,transition:D,children:U,shapeFlag:B}=_;if(B&6){Q(_.component.subTree,v,T,k);return}if(B&128){_.suspense.move(v,T,k);return}if(B&64){P.move(_,v,T,K);return}if(P===fe){s(F,v,T);for(let tt=0;tt<U.length;tt++)Q(U[tt],v,T,k);s(_.anchor,v,T);return}if(P===Ji){x(_,v,T);return}if(k!==2&&B&1&&D)if(k===0)D.beforeEnter(F),s(F,v,T),ie(()=>D.enter(F),I);else{const{leave:tt,delayLeave:J,afterLeave:nt}=D,dt=()=>s(F,v,T),Tt=()=>{tt(F,()=>{dt(),nt&&nt()})};J?J(F,dt,Tt):Tt()}else s(F,v,T)},rt=(_,v,T,k=!1,I=!1)=>{const{type:F,props:P,ref:D,children:U,dynamicChildren:B,shapeFlag:z,patchFlag:tt,dirs:J}=_;if(D!=null&&yo(D,null,T,_,!0),z&256){v.ctx.deactivate(_);return}const nt=z&1&&J,dt=!Fs(_);let Tt;if(dt&&(Tt=P&&P.onVnodeBeforeUnmount)&&Pe(Tt,v,_),z&6)at(_.component,T,k);else{if(z&128){_.suspense.unmount(T,k);return}nt&&In(_,null,v,"beforeUnmount"),z&64?_.type.remove(_,v,T,I,K,k):B&&(F!==fe||tt>0&&tt&64)?ct(B,v,T,!1,!0):(F===fe&&tt&384||!I&&z&16)&&ct(U,v,T),k&&Ft(_)}(dt&&(Tt=P&&P.onVnodeUnmounted)||nt)&&ie(()=>{Tt&&Pe(Tt,v,_),nt&&In(_,null,v,"unmounted")},T)},Ft=_=>{const{type:v,el:T,anchor:k,transition:I}=_;if(v===fe){Rt(T,k);return}if(v===Ji){S(_);return}const F=()=>{r(T),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(_.shapeFlag&1&&I&&!I.persisted){const{leave:P,delayLeave:D}=I,U=()=>P(T,F);D?D(_.el,F,U):U()}else F()},Rt=(_,v)=>{let T;for(;_!==v;)T=f(_),r(_),_=T;r(v)},at=(_,v,T)=>{const{bum:k,scope:I,update:F,subTree:P,um:D}=_;k&&zi(k),I.stop(),F&&(F.active=!1,rt(P,_,v,T)),D&&ie(D,v),ie(()=>{_.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},ct=(_,v,T,k=!1,I=!1,F=0)=>{for(let P=F;P<_.length;P++)rt(_[P],v,T,k,I)},O=_=>_.shapeFlag&6?O(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el);let N=!1;const $=(_,v,T)=>{_==null?v._vnode&&rt(v._vnode,null,null,!0):m(v._vnode||null,_,v,null,null,null,T),N||(N=!0,Ya(),ql(),N=!1),v._vnode=_},K={p:m,um:rt,m:Q,r:Ft,mt:G,mc:A,pc:H,pbc:R,n:O,o:e};let ft,gt;return{render:$,hydrate:ft,createApp:Td($,ft)}}function Xi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function On({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Id(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hu(e,t,n=!1){const s=e.children,r=t.children;if(st(s)&&st(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=hn(r[i]),a.el=o.el),n||hu(o,a)),a.type===mi&&(a.el=o.el)}}function Od(e){const t=e.slice(),n=[0];let s,r,i,o,a;const c=e.length;for(s=0;s<c;s++){const l=e[s];if(l!==0){if(r=n[n.length-1],e[r]<l){t[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function fu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:fu(t)}const Nd=e=>e.__isTeleport,fe=Symbol.for("v-fgt"),mi=Symbol.for("v-txt"),cs=Symbol.for("v-cmt"),Ji=Symbol.for("v-stc"),Vs=[];let xe=null;function ve(e=!1){Vs.push(xe=e?null:[])}function Md(){Vs.pop(),xe=Vs[Vs.length-1]||null}let zs=1;function ac(e){zs+=e}function du(e){return e.dynamicChildren=zs>0?xe||ns:null,Md(),zs>0&&xe&&xe.push(e),e}function We(e,t,n,s,r,i){return du(_t(e,t,n,s,r,i,!0))}function pu(e,t,n,s,r){return du(pt(e,t,n,s,r,!0))}function $r(e){return e?e.__v_isVNode===!0:!1}function Es(e,t){return e.type===t.type&&e.key===t.key}const mu=({key:e})=>e??null,Rr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Wt(e)||le(e)||ot(e)?{i:Ut,r:e,k:t,f:!!n}:e:null);function _t(e,t=null,n=null,s=0,r=null,i=e===fe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&mu(t),ref:t&&Rr(t),scopeId:di,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ut};return a?(Xo(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Wt(n)?8:16),zs>0&&!o&&xe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&xe.push(c),c}const pt=Dd;function Dd(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===Hf)&&(e=cs),$r(e)){const a=ls(e,t,!0);return n&&Xo(a,n),zs>0&&!i&&xe&&(a.shapeFlag&6?xe[xe.indexOf(e)]=a:xe.push(a)),a.patchFlag|=-2,a}if(Gd(e)&&(e=e.__vccOpts),t){t=Fd(t);let{class:a,style:c}=t;a&&!Wt(a)&&(t.class=Le(a)),It(c)&&(Fl(c)&&!st(c)&&(c=zt({},c)),t.style=Lo(c))}const o=Wt(e)?1:Zf(e)?128:Nd(e)?64:It(e)?4:ot(e)?2:0;return _t(e,t,n,s,r,o,i,!0)}function Fd(e){return e?Fl(e)||iu(e)?zt({},e):e:null}function ls(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=e,l=t?gu(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&mu(l),ref:t&&t.ref?n&&i?st(i)?i.concat(Rr(t)):[i,Rr(t)]:Rr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ls(e.ssContent),ssFallback:e.ssFallback&&ls(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&(u.transition=c.clone(u)),u}function Rd(e=" ",t=0){return pt(mi,null,e,t)}function Ve(e){return e==null||typeof e=="boolean"?pt(cs):st(e)?pt(fe,null,e.slice()):typeof e=="object"?hn(e):pt(mi,null,String(e))}function hn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ls(e)}function Xo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(st(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Xo(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!iu(t)?t._ctx=Ut:r===3&&Ut&&(Ut.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ot(t)?(t={default:t,_ctx:Ut},n=32):(t=String(t),s&64?(n=16,t=[Rd(t)]):n=8);e.children=t,e.shapeFlag|=n}function gu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=Le([t.class,s.class]));else if(r==="style")t.style=Lo([t.style,s.style]);else if(oi(r)){const i=t[r],o=s[r];o&&i!==o&&!(st(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function Pe(e,t,n,s=null){Ie(e,t,7,[n,s])}const Pd=nu();let Vd=0;function Bd(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||Pd,i={uid:Vd++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new bl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:au(s,r),emitsOptions:Gl(s,r),emit:null,emitted:null,propsDefaults:At,inheritAttrs:s.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Uf.bind(null,i),e.ce&&e.ce(i),i}let Kt=null;const Ld=()=>Kt||Ut;let qr,vo;{const e=_l(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};qr=t("__VUE_INSTANCE_SETTERS__",n=>Kt=n),vo=t("__VUE_SSR_SETTERS__",n=>gi=n)}const er=e=>{const t=Kt;return qr(e),e.scope.on(),()=>{e.scope.off(),qr(t)}},cc=()=>{Kt&&Kt.scope.off(),qr(null)};function _u(e){return e.vnode.shapeFlag&4}let gi=!1;function Ud(e,t=!1){t&&vo(t);const{props:n,children:s}=e.vnode,r=_u(e);wd(e,n,r,t),Ad(e,s);const i=r?Wd(e,t):void 0;return t&&vo(!1),i}function Wd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pd);const{setup:s}=n;if(s){const r=e.setupContext=s.length>1?qd(e):null,i=er(e);Sn();const o=gn(s,e,0,[e.props,r]);if(An(),i(),dl(o)){if(o.then(cc,cc),t)return o.then(a=>{lc(e,a,t)}).catch(a=>{hi(a,e,0)});e.asyncDep=o}else lc(e,o,t)}else yu(e,t)}function lc(e,t,n){ot(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:It(t)&&(e.setupState=Ll(t)),yu(e,n)}let uc;function yu(e,t,n){const s=e.type;if(!e.render){if(!t&&uc&&!s.render){const r=s.template||Zo(e).template;if(r){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=s,l=zt(zt({isCustomElement:i,delimiters:a},o),c);s.render=uc(r,l)}}e.render=s.render||_e}{const r=er(e);Sn();try{md(e)}finally{An(),r()}}}const $d={get(e,t){return ce(e,"get",""),e[t]}};function qd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,$d),slots:e.slots,emit:e.emit,expose:t}}function _i(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ll(Rl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rs)return Rs[n](e)},has(t,n){return n in t||n in Rs}}))}function jd(e,t=!0){return ot(e)?e.displayName||e.name:e.name||t&&e.__name}function Gd(e){return ot(e)&&"__vccOpts"in e}const ae=(e,t)=>Mf(e,t,gi);function vu(e,t,n){const s=arguments.length;return s===2?It(t)&&!st(t)?$r(t)?pt(e,null,[t]):pt(e,t):pt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&$r(n)&&(n=[n]),pt(e,t,n))}const zd="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Hd="http://www.w3.org/2000/svg",Kd="http://www.w3.org/1998/Math/MathML",fn=typeof document<"u"?document:null,hc=fn&&fn.createElement("template"),Zd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?fn.createElementNS(Hd,e):t==="mathml"?fn.createElementNS(Kd,e):fn.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>fn.createTextNode(e),createComment:e=>fn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>fn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const o=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{hc.innerHTML=s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e;const a=hc.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yd=Symbol("_vtc");function Xd(e,t,n){const s=e[Yd];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const jr=Symbol("_vod"),bu=Symbol("_vsh"),Jd={beforeMount(e,{value:t},{transition:n}){e[jr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Is(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Is(e,!0),s.enter(e)):s.leave(e,()=>{Is(e,!1)}):Is(e,t))},beforeUnmount(e,{value:t}){Is(e,t)}};function Is(e,t){e.style.display=t?e[jr]:"none",e[bu]=!t}const Qd=Symbol(""),tp=/(^|;)\s*display\s*:/;function ep(e,t,n){const s=e.style,r=Wt(n);let i=!1;if(n&&!r){if(t)if(Wt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Pr(s,a,"")}else for(const o in t)n[o]==null&&Pr(s,o,"");for(const o in n)o==="display"&&(i=!0),Pr(s,o,n[o])}else if(r){if(t!==n){const o=s[Qd];o&&(n+=";"+o),s.cssText=n,i=tp.test(n)}}else t&&e.removeAttribute("style");jr in e&&(e[jr]=i?s.display:"",e[bu]&&(s.display="none"))}const fc=/\s*!important$/;function Pr(e,t,n){if(st(n))n.forEach(s=>Pr(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=np(e,t);fc.test(n)?e.setProperty(vs(s),n.replace(fc,""),"important"):e[s]=n}}const dc=["Webkit","Moz","ms"],Qi={};function np(e,t){const n=Qi[t];if(n)return n;let s=qe(t);if(s!=="filter"&&s in e)return Qi[t]=s;s=li(s);for(let r=0;r<dc.length;r++){const i=dc[r]+s;if(i in e)return Qi[t]=i}return t}const pc="http://www.w3.org/1999/xlink";function sp(e,t,n,s,r){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(pc,t.slice(6,t.length)):e.setAttributeNS(pc,t,n);else{const i=lf(t);n==null||i&&!yl(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function rp(e,t,n,s,r,i,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,r,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=yl(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function ip(e,t,n,s){e.addEventListener(t,n,s)}function op(e,t,n,s){e.removeEventListener(t,n,s)}const mc=Symbol("_vei");function ap(e,t,n,s,r=null){const i=e[mc]||(e[mc]={}),o=i[t];if(s&&o)o.value=s;else{const[a,c]=cp(t);if(s){const l=i[t]=hp(s,r);ip(e,a,l,c)}else o&&(op(e,a,o,c),i[t]=void 0)}}const gc=/(?:Once|Passive|Capture)$/;function cp(e){let t;if(gc.test(e)){t={};let s;for(;s=e.match(gc);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):vs(e.slice(2)),t]}let to=0;const lp=Promise.resolve(),up=()=>to||(lp.then(()=>to=0),to=Date.now());function hp(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ie(fp(s,n.value),t,5,[s])};return n.value=e,n.attached=up(),n}function fp(e,t){if(st(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const _c=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,dp=(e,t,n,s,r,i,o,a,c)=>{const l=r==="svg";t==="class"?Xd(e,s,l):t==="style"?ep(e,n,s):oi(t)?Po(t)||ap(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pp(e,t,s,l))?rp(e,t,s,i,o,a,c):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),sp(e,t,s,l))};function pp(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&_c(t)&&ot(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return _c(t)&&Wt(n)?!1:t in e}const mp=["ctrl","shift","alt","meta"],gp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>mp.some(n=>e[`${n}Key`]&&!t.includes(n))},_p=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<t.length;o++){const a=gp[t[o]];if(a&&a(r,t))return}return e(r,...i)})},yp=zt({patchProp:dp},Zd);let yc;function vp(){return yc||(yc=kd(yp))}const bp=(...e)=>{const t=vp().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=wp(s);if(!r)return;const i=t._component;!ot(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,Tp(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Tp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function wp(e){return Wt(e)?document.querySelector(e):e}var Cp=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const Sp=Symbol();var vc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(vc||(vc={}));function Ap(){const e=uf(!0),t=e.run(()=>qs({}));let n=[],s=[];const r=Rl({install(i){r._a=i,i.provide(Sp,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return!this._a&&!Cp?s.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const xp=ge({}),$n=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n};function kp(e,t,n,s,r,i){const o=Tn("RouterView");return ve(),pu(o)}const Ep=$n(xp,[["render",kp]]),Ip="modulepreload",Op=function(e){return"/ai-music/dist/"+e},bc={},Np=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Op(a),a in bc)return;bc[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Ip,c||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Zn=typeof document<"u";function Mp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const vt=Object.assign;function eo(e,t){const n={};for(const s in t){const r=t[s];n[s]=Oe(r)?r.map(e):e(r)}return n}const Bs=()=>{},Oe=Array.isArray,Tu=/#/g,Dp=/&/g,Fp=/\//g,Rp=/=/g,Pp=/\?/g,wu=/\+/g,Vp=/%5B/g,Bp=/%5D/g,Cu=/%5E/g,Lp=/%60/g,Su=/%7B/g,Up=/%7C/g,Au=/%7D/g,Wp=/%20/g;function Jo(e){return encodeURI(""+e).replace(Up,"|").replace(Vp,"[").replace(Bp,"]")}function $p(e){return Jo(e).replace(Su,"{").replace(Au,"}").replace(Cu,"^")}function bo(e){return Jo(e).replace(wu,"%2B").replace(Wp,"+").replace(Tu,"%23").replace(Dp,"%26").replace(Lp,"`").replace(Su,"{").replace(Au,"}").replace(Cu,"^")}function qp(e){return bo(e).replace(Rp,"%3D")}function jp(e){return Jo(e).replace(Tu,"%23").replace(Pp,"%3F")}function Gp(e){return e==null?"":jp(e).replace(Fp,"%2F")}function Hs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const zp=/\/$/,Hp=e=>e.replace(zp,"");function no(e,t,n="/"){let s,r={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),r=e(i)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=Xp(s??t,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Hs(o)}}function Kp(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Tc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Zp(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&us(t.matched[s],n.matched[r])&&xu(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function us(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function xu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Yp(e[n],t[n]))return!1;return!0}function Yp(e,t){return Oe(e)?wc(e,t):Oe(t)?wc(t,e):e===t}function wc(e,t){return Oe(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Xp(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}var Ks;(function(e){e.pop="pop",e.push="push"})(Ks||(Ks={}));var Ls;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ls||(Ls={}));function Jp(e){if(!e)if(Zn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Hp(e)}const Qp=/^[^#]+#/;function tm(e,t){return e.replace(Qp,"#")+t}function em(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const yi=()=>({left:window.scrollX,top:window.scrollY});function nm(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=em(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Cc(e,t){return(history.state?history.state.position-t:-1)+e}const To=new Map;function sm(e,t){To.set(e,t)}function rm(e){const t=To.get(e);return To.delete(e),t}let im=()=>location.protocol+"//"+location.host;function ku(e,t){const{pathname:n,search:s,hash:r}=t,i=e.indexOf("#");if(i>-1){let a=r.includes(e.slice(i))?e.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),Tc(c,"")}return Tc(n,e)+s+r}function om(e,t,n,s){let r=[],i=[],o=null;const a=({state:f})=>{const d=ku(e,location),p=n.value,m=t.value;let g=0;if(f){if(n.value=d,t.value=f,o&&o===p){o=null;return}g=m?f.position-m.position:0}else s(d);r.forEach(y=>{y(n.value,p,{delta:g,type:Ks.pop,direction:g?g>0?Ls.forward:Ls.back:Ls.unknown})})};function c(){o=n.value}function l(f){r.push(f);const d=()=>{const p=r.indexOf(f);p>-1&&r.splice(p,1)};return i.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(vt({},f.state,{scroll:yi()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Sc(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?yi():null}}function am(e){const{history:t,location:n}=window,s={value:ku(e,n)},r={value:t.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:im()+e+c;try{t[u?"replaceState":"pushState"](l,"",f),r.value=l}catch{n[u?"replace":"assign"](f)}}function o(c,l){const u=vt({},t.state,Sc(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=vt({},r.value,t.state,{forward:c,scroll:yi()});i(u.current,u,!0);const h=vt({},Sc(s.value,c,null),{position:u.position+1},l);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function cm(e){e=Jp(e);const t=am(e),n=om(e,t.state,t.location,t.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=vt({location:"",base:e,go:s,createHref:tm.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function lm(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),cm(e)}function um(e){return typeof e=="string"||e&&typeof e=="object"}function Eu(e){return typeof e=="string"||typeof e=="symbol"}const an={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Iu=Symbol("");var Ac;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ac||(Ac={}));function hs(e,t){return vt(new Error,{type:e,[Iu]:!0},t)}function Ze(e,t){return e instanceof Error&&Iu in e&&(t==null||!!(e.type&t))}const xc="[^/]+?",hm={sensitive:!1,strict:!1,start:!0,end:!0},fm=/[.+*?^${}()[\]/\\]/g;function dm(e,t){const n=vt({},hm,t),s=[];let r=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let h=0;h<l.length;h++){const f=l[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(fm,"\\$&"),d+=40;else if(f.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=f;i.push({name:p,repeatable:m,optional:g});const C=y||xc;if(C!==xc){d+=10;try{new RegExp(`(${C})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${p}" (${C}): `+S.message)}}let x=m?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;h||(x=g&&l.length<2?`(?:/${x})`:"/"+x),g&&(x+="?"),r+=x,d+=20,g&&(d+=-8),m&&(d+=-20),C===".*"&&(d+=-50)}u.push(d)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",p=i[f-1];h[p.name]=d&&p.repeatable?d.split("/"):d}return h}function c(l){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:p,repeatable:m,optional:g}=d,y=p in l?l[p]:"";if(Oe(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const C=Oe(y)?y.join("/"):y;if(!C)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function pm(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ou(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const i=pm(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(kc(s))return 1;if(kc(r))return-1}return r.length-s.length}function kc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const mm={type:0,value:""},gm=/[a-zA-Z0-9_]/;function _m(e){if(!e)return[[]];if(e==="/")return[[mm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${l}": ${d}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=s;break;case 1:c==="("?n=2:gm.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),r}function ym(e,t,n){const s=dm(_m(e.path),n),r=vt(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function vm(e,t){const n=[],s=new Map;t=Oc({strict:!1,end:!0,sensitive:!1},t);function r(u){return s.get(u)}function i(u,h,f){const d=!f,p=bm(u);p.aliasOf=f&&f.record;const m=Oc(t,u),g=[p];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of x)g.push(vt({},p,{components:f?f.record.components:p.components,path:S,aliasOf:f?f.record:p}))}let y,C;for(const x of g){const{path:S}=x;if(h&&S[0]!=="/"){const b=h.record.path,w=b[b.length-1]==="/"?"":"/";x.path=h.record.path+(S&&w+S)}if(y=ym(x,h,m),f?f.alias.push(y):(C=C||y,C!==y&&C.alias.push(y),d&&u.name&&!Ic(y)&&o(u.name)),Nu(y)&&c(y),p.children){const b=p.children;for(let w=0;w<b.length;w++)i(b[w],y,f&&f.children[w])}f=f||y}return C?()=>{o(C)}:Bs}function o(u){if(Eu(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){const h=Cm(u,n);n.splice(h,0,u),u.record.name&&!Ic(u)&&s.set(u.record.name,u)}function l(u,h){let f,d={},p,m;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw hs(1,{location:u});m=f.record.name,d=vt(Ec(h.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&Ec(u.params,f.keys.map(C=>C.name))),p=f.stringify(d)}else if(u.path!=null)p=u.path,f=n.find(C=>C.re.test(p)),f&&(d=f.parse(p),m=f.record.name);else{if(f=h.name?s.get(h.name):n.find(C=>C.re.test(h.path)),!f)throw hs(1,{location:u,currentLocation:h});m=f.record.name,d=vt({},h.params,u.params),p=f.stringify(d)}const g=[];let y=f;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:d,matched:g,meta:wm(g)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Ec(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function bm(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Tm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Tm(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Ic(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wm(e){return e.reduce((t,n)=>vt(t,n.meta),{})}function Oc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Cm(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;Ou(e,t[i])<0?s=i:n=i+1}const r=Sm(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function Sm(e){let t=e;for(;t=t.parent;)if(Nu(t)&&Ou(e,t)===0)return t}function Nu({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Am(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(wu," "),o=i.indexOf("="),a=Hs(o<0?i:i.slice(0,o)),c=o<0?null:Hs(i.slice(o+1));if(a in t){let l=t[a];Oe(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Nc(e){let t="";for(let n in e){const s=e[n];if(n=qp(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Oe(s)?s.map(i=>i&&bo(i)):[s&&bo(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function xm(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Oe(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const km=Symbol(""),Mc=Symbol(""),Qo=Symbol(""),Mu=Symbol(""),wo=Symbol("");function Os(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function dn(e,t,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(hs(4,{from:n,to:t})):f instanceof Error?c(f):um(f)?c(hs(2,{from:t,to:f})):(o&&s.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>e.call(s&&s.instances[r],t,n,l));let h=Promise.resolve(u);e.length<3&&(h=h.then(l)),h.catch(f=>c(f))})}function so(e,t,n,s,r=i=>i()){const i=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Em(c)){const u=(c.__vccOpts||c)[t];u&&i.push(dn(u,n,s,o,a,r))}else{let l=c();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Mp(u)?u.default:u;o.components[a]=h;const d=(h.__vccOpts||h)[t];return d&&dn(d,n,s,o,a,r)()}))}}return i}function Em(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Dc(e){const t=Ue(Qo),n=Ue(Mu),s=ae(()=>{const c=rs(e.to);return t.resolve(c)}),r=ae(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(us.bind(null,u));if(f>-1)return f;const d=Fc(c[l-2]);return l>1&&Fc(u)===d&&h[h.length-1].path!==d?h.findIndex(us.bind(null,c[l-2])):f}),i=ae(()=>r.value>-1&&Mm(n.params,s.value.params)),o=ae(()=>r.value>-1&&r.value===n.matched.length-1&&xu(n.params,s.value.params));function a(c={}){return Nm(c)?t[rs(e.replace)?"replace":"push"](rs(e.to)).catch(Bs):Promise.resolve()}return{route:s,href:ae(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const Im=ge({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dc,setup(e,{slots:t}){const n=tr(Dc(e)),{options:s}=Ue(Qo),r=ae(()=>({[Rc(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Rc(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:vu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Om=Im;function Nm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Mm(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Oe(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Fc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Rc=(e,t,n)=>e??t??n,Dm=ge({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ue(wo),r=ae(()=>e.route||s.value),i=Ue(Mc,0),o=ae(()=>{let l=rs(i);const{matched:u}=r.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=ae(()=>r.value.matched[o.value]);Fr(Mc,ae(()=>o.value+1)),Fr(km,a),Fr(wo,r);const c=qs();return Dr(()=>[c.value,a.value,e.name],([l,u,h],[f,d,p])=>{u&&(u.instances[h]=l,d&&d!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!us(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=r.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Pc(n.default,{Component:f,route:l});const d=h.props[u],p=d?d===!0?l.params:typeof d=="function"?d(l):d:null,g=vu(f,vt({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Pc(n.default,{Component:g,route:l})||g}}});function Pc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Fm=Dm;function Rm(e){const t=vm(e.routes,e),n=e.parseQuery||Am,s=e.stringifyQuery||Nc,r=e.history,i=Os(),o=Os(),a=Os(),c=Df(an);let l=an;Zn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=eo.bind(null,O=>""+O),h=eo.bind(null,Gp),f=eo.bind(null,Hs);function d(O,N){let $,K;return Eu(O)?($=t.getRecordMatcher(O),K=N):K=O,t.addRoute(K,$)}function p(O){const N=t.getRecordMatcher(O);N&&t.removeRoute(N)}function m(){return t.getRoutes().map(O=>O.record)}function g(O){return!!t.getRecordMatcher(O)}function y(O,N){if(N=vt({},N||c.value),typeof O=="string"){const v=no(n,O,N.path),T=t.resolve({path:v.path},N),k=r.createHref(v.fullPath);return vt(v,T,{params:f(T.params),hash:Hs(v.hash),redirectedFrom:void 0,href:k})}let $;if(O.path!=null)$=vt({},O,{path:no(n,O.path,N.path).path});else{const v=vt({},O.params);for(const T in v)v[T]==null&&delete v[T];$=vt({},O,{params:h(v)}),N.params=h(N.params)}const K=t.resolve($,N),ft=O.hash||"";K.params=u(f(K.params));const gt=Kp(s,vt({},O,{hash:$p(ft),path:K.path})),_=r.createHref(gt);return vt({fullPath:gt,hash:ft,query:s===Nc?xm(O.query):O.query||{}},K,{redirectedFrom:void 0,href:_})}function C(O){return typeof O=="string"?no(n,O,c.value.path):vt({},O)}function x(O,N){if(l!==O)return hs(8,{from:N,to:O})}function S(O){return E(O)}function b(O){return S(vt(C(O),{replace:!0}))}function w(O){const N=O.matched[O.matched.length-1];if(N&&N.redirect){const{redirect:$}=N;let K=typeof $=="function"?$(O):$;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=C(K):{path:K},K.params={}),vt({query:O.query,hash:O.hash,params:K.path!=null?{}:O.params},K)}}function E(O,N){const $=l=y(O),K=c.value,ft=O.state,gt=O.force,_=O.replace===!0,v=w($);if(v)return E(vt(C(v),{state:typeof v=="object"?vt({},ft,v.state):ft,force:gt,replace:_}),N||$);const T=$;T.redirectedFrom=N;let k;return!gt&&Zp(s,K,$)&&(k=hs(16,{to:T,from:K}),Q(K,K,!0,!1)),(k?Promise.resolve(k):R(T,K)).catch(I=>Ze(I)?Ze(I,2)?I:et(I):H(I,T,K)).then(I=>{if(I){if(Ze(I,2))return E(vt({replace:_},C(I.to),{state:typeof I.to=="object"?vt({},ft,I.to.state):ft,force:gt}),N||T)}else I=M(T,K,!0,_,ft);return V(T,K,I),I})}function A(O,N){const $=x(O,N);return $?Promise.reject($):Promise.resolve()}function L(O){const N=Rt.values().next().value;return N&&typeof N.runWithContext=="function"?N.runWithContext(O):O()}function R(O,N){let $;const[K,ft,gt]=Pm(O,N);$=so(K.reverse(),"beforeRouteLeave",O,N);for(const v of K)v.leaveGuards.forEach(T=>{$.push(dn(T,O,N))});const _=A.bind(null,O,N);return $.push(_),ct($).then(()=>{$=[];for(const v of i.list())$.push(dn(v,O,N));return $.push(_),ct($)}).then(()=>{$=so(ft,"beforeRouteUpdate",O,N);for(const v of ft)v.updateGuards.forEach(T=>{$.push(dn(T,O,N))});return $.push(_),ct($)}).then(()=>{$=[];for(const v of gt)if(v.beforeEnter)if(Oe(v.beforeEnter))for(const T of v.beforeEnter)$.push(dn(T,O,N));else $.push(dn(v.beforeEnter,O,N));return $.push(_),ct($)}).then(()=>(O.matched.forEach(v=>v.enterCallbacks={}),$=so(gt,"beforeRouteEnter",O,N,L),$.push(_),ct($))).then(()=>{$=[];for(const v of o.list())$.push(dn(v,O,N));return $.push(_),ct($)}).catch(v=>Ze(v,8)?v:Promise.reject(v))}function V(O,N,$){a.list().forEach(K=>L(()=>K(O,N,$)))}function M(O,N,$,K,ft){const gt=x(O,N);if(gt)return gt;const _=N===an,v=Zn?history.state:{};$&&(K||_?r.replace(O.fullPath,vt({scroll:_&&v&&v.scroll},ft)):r.push(O.fullPath,ft)),c.value=O,Q(O,N,$,_),et()}let j;function G(){j||(j=r.listen((O,N,$)=>{if(!at.listening)return;const K=y(O),ft=w(K);if(ft){E(vt(ft,{replace:!0}),K).catch(Bs);return}l=K;const gt=c.value;Zn&&sm(Cc(gt.fullPath,$.delta),yi()),R(K,gt).catch(_=>Ze(_,12)?_:Ze(_,2)?(E(_.to,K).then(v=>{Ze(v,20)&&!$.delta&&$.type===Ks.pop&&r.go(-1,!1)}).catch(Bs),Promise.reject()):($.delta&&r.go(-$.delta,!1),H(_,K,gt))).then(_=>{_=_||M(K,gt,!1),_&&($.delta&&!Ze(_,8)?r.go(-$.delta,!1):$.type===Ks.pop&&Ze(_,20)&&r.go(-1,!1)),V(K,gt,_)}).catch(Bs)}))}let X=Os(),q=Os(),W;function H(O,N,$){et(O);const K=q.list();return K.length&&K.forEach(ft=>ft(O,N,$)),Promise.reject(O)}function Y(){return W&&c.value!==an?Promise.resolve():new Promise((O,N)=>{X.add([O,N])})}function et(O){return W||(W=!O,G(),X.list().forEach(([N,$])=>O?$(O):N()),X.reset()),O}function Q(O,N,$,K){const{scrollBehavior:ft}=e;if(!Zn||!ft)return Promise.resolve();const gt=!$&&rm(Cc(O.fullPath,0))||(K||!$)&&history.state&&history.state.scroll||null;return Wl().then(()=>ft(O,N,gt)).then(_=>_&&nm(_)).catch(_=>H(_,O,N))}const rt=O=>r.go(O);let Ft;const Rt=new Set,at={currentRoute:c,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:e,push:S,replace:b,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:q.add,isReady:Y,install(O){const N=this;O.component("RouterLink",Om),O.component("RouterView",Fm),O.config.globalProperties.$router=N,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>rs(c)}),Zn&&!Ft&&c.value===an&&(Ft=!0,S(r.location).catch(ft=>{}));const $={};for(const ft in an)Object.defineProperty($,ft,{get:()=>c.value[ft],enumerable:!0});O.provide(Qo,N),O.provide(Mu,Ml($)),O.provide(wo,c);const K=O.unmount;Rt.add(O),O.unmount=function(){Rt.delete(O),Rt.size<1&&(l=an,j&&j(),j=null,c.value=an,Ft=!1,W=!1),K()}}};function ct(O){return O.reduce((N,$)=>N.then(()=>L($)),Promise.resolve())}return at}function Pm(e,t){const n=[],s=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>us(l,a))?s.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>us(l,c))||r.push(c))}return[n,s,r]}function Vm(e,t,n){let s=document.elementFromPoint(e,t);for(;s;){const r=n(s);if(r)return r;s=s.parentNode}}function Bm(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}let Yn=!1,wr=!1;window.addEventListener("mouseup",()=>Yn=!1);const Lm=ge({props:["tid"],data(){return{touches:[],pressMap:{}}},mounted(){},methods:{press(e){this.$emit("tapdown",e)},release(e){this.$emit("tapup",e)},mouseDown(e){if(wr)return;const t=this.tid;this.pressMap[t]||(this.press(t),Yn=!0,this.pressMap[t]="M")},mouseUp(e){if(wr)return;const t=this.tid;Yn&&this.pressMap[t]=="M"&&(this.release(t),delete this.pressMap[t],Yn=!1)},mouseOver(e){const t=this.tid;Yn&&!this.pressMap[t]&&(this.press(t),this.pressMap[t]="M")},mouseOut(e){const t=this.tid;Yn&&this.pressMap[t]=="M"&&!Bm(e.relatedTarget,this.$el)&&(this.release(t),delete this.pressMap[t])},touchHandle(e){wr?e.preventDefault():e.type==="touchend"&&(wr=!0);const t=this.getTouchTargets(e.touches);return this.releaseTouches(t),this.touches=this.markTouches(t),!0},markTouches(e){const t=n=>this.touches.indexOf(n)>-1;return e.map(n=>{if(t(n))return n;if(!this.pressMap[n])return this.press(n),this.pressMap[n]="T",n}).filter(Boolean)},releaseTouches(e){const t=n=>e.indexOf(n)>-1;this.touches.forEach(n=>{t(n)||(this.release(n),delete this.pressMap[n])})},getTouchTargets(e){const t=n=>n.dataset&&n.dataset.tapitem;return[...e].map(n=>Vm(n.clientX,n.clientY,t)).filter(Boolean)},click(){}}}),Um=["data-tapitem"];function Wm(e,t,n,s,r,i){return ve(),We("div",{class:"tap","data-tapitem":e.tid,onMousedown:t[0]||(t[0]=(...o)=>e.mouseDown&&e.mouseDown(...o)),onMouseover:t[1]||(t[1]=(...o)=>e.mouseOver&&e.mouseOver(...o)),onMouseout:t[2]||(t[2]=(...o)=>e.mouseOut&&e.mouseOut(...o)),onMouseup:t[3]||(t[3]=(...o)=>e.mouseUp&&e.mouseUp(...o)),onTouchstart:t[4]||(t[4]=(...o)=>e.touchHandle&&e.touchHandle(...o)),onTouchmove:t[5]||(t[5]=_p((...o)=>e.touchHandle&&e.touchHandle(...o),["prevent"])),onTouchend:t[6]||(t[6]=(...o)=>e.touchHandle&&e.touchHandle(...o))},[dd(e.$slots,"default",{},void 0)],40,Um)}const $m=$n(Lm,[["render",Wm],["__scopeId","data-v-d1f3e89f"]]),Du="15.1.2",Vc=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),Bc=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),Co=(e,t)=>({startTime:t,type:"setValue",value:e}),Fu=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),Ru=(e,t,{startTime:n,target:s,timeConstant:r})=>s+(t-s)*Math.exp((n-e)/r),Jn=e=>e.type==="exponentialRampToValue",Gr=e=>e.type==="linearRampToValue",pn=e=>Jn(e)||Gr(e),ta=e=>e.type==="setValue",Ye=e=>e.type==="setValueCurve",zr=(e,t,n,s)=>{const r=e[t];return r===void 0?s:pn(r)||ta(r)?r.value:Ye(r)?r.values[r.values.length-1]:Ru(n,zr(e,t-1,r.startTime,s),r)},Lc=(e,t,n,s,r)=>n===void 0?[s.insertTime,r]:pn(n)?[n.endTime,n.value]:ta(n)?[n.startTime,n.value]:Ye(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,zr(e,t-1,n.startTime,r)],So=e=>e.type==="cancelAndHold",Ao=e=>e.type==="cancelScheduledValues",cn=e=>So(e)||Ao(e)?e.cancelTime:Jn(e)||Gr(e)?e.endTime:e.startTime,Uc=(e,t,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((e-t)/(s-t)):0,Wc=(e,t,n,{endTime:s,value:r})=>n+(e-t)/(s-t)*(r-n),qm=(e,t)=>{const n=Math.floor(t),s=Math.ceil(t);return n===s?e[n]:(1-(t-n))*e[n]+(1-(s-t))*e[s]},jm=(e,{duration:t,startTime:n,values:s})=>{const r=(e-n)/t*(s.length-1);return qm(s,r)},Cr=e=>e.type==="setTarget";class Gm{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=cn(t);if(So(t)||Ao(t)){const s=this._automationEvents.findIndex(i=>Ao(t)&&Ye(i)?i.startTime+i.duration>=n:cn(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),So(t)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&pn(r)){if(i!==void 0&&Cr(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Ye(i)?i.startTime+i.duration:cn(i),a=i===void 0?this._defaultValue:Ye(i)?i.values[i.values.length-1]:i.value,c=Jn(r)?Uc(n,o,a,r):Wc(n,o,a,r),l=Jn(r)?Vc(c,n,this._currenTime):Bc(c,n,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&Cr(i)&&this._automationEvents.push(Co(this.getValue(n),n)),i!==void 0&&Ye(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const f=l*h%1;u[h]=i.values[h-1]*(1-f)+i.values[h]*f}this._automationEvents[this._automationEvents.length-1]=Fu(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>cn(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Ye(r)&&cn(r)+r.duration>n)return!1;const i=Jn(t)?Vc(t.value,t.endTime,this._currenTime):Gr(t)?Bc(t.value,n,this._currenTime):t;if(s===-1)this._automationEvents.push(i);else{if(Ye(t)&&n+t.duration>cn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(t){const n=this._automationEvents.findIndex(s=>cn(s)>t);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];Cr(r)&&s.unshift(Co(zr(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>cn(o)>t),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&Cr(i)&&(s===void 0||!pn(s)||s.insertTime>t))return Ru(t,zr(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&ta(i)&&(s===void 0||!pn(s)))return i.value;if(i!==void 0&&Ye(i)&&(s===void 0||!pn(s)||i.startTime+i.duration>t))return t<i.startTime+i.duration?jm(t,i):i.values[i.values.length-1];if(i!==void 0&&pn(i)&&(s===void 0||!pn(s)))return i.value;if(s!==void 0&&Jn(s)){const[o,a]=Lc(this._automationEvents,r,i,s,this._defaultValue);return Uc(t,o,a,s)}if(s!==void 0&&Gr(s)){const[o,a]=Lc(this._automationEvents,r,i,s,this._defaultValue);return Wc(t,o,a,s)}return this._defaultValue}}const zm=e=>({cancelTime:e,type:"cancelAndHold"}),Hm=e=>({cancelTime:e,type:"cancelScheduledValues"}),Km=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),Zm=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),Ym=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),Xm=()=>new DOMException("","AbortError"),Jm=e=>(t,n,[s,r,i],o)=>{e(t[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},Qm=e=>(t,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);e.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},tg=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},fs=new WeakSet,Pu=new WeakMap,ea=new WeakMap,Vu=new WeakMap,na=new WeakMap,vi=new WeakMap,Bu=new WeakMap,xo=new WeakMap,ko=new WeakMap,Eo=new WeakMap,Lu={construct(){return Lu}},eg=e=>{try{const t=new Proxy(e,Lu);new t}catch{return!1}return!0},$c=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,qc=(e,t)=>{const n=[];let s=e.replace(/^[\s]+/,""),r=s.match($c);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match($c)}return[n.join(";"),s]},jc=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Gc=e=>{if(!eg(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},ng=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>{let d=0;return(p,m,g={credentials:"omit"})=>{const y=u.get(p);if(y!==void 0&&y.has(m))return Promise.resolve();const C=l.get(p);if(C!==void 0){const b=C.get(m);if(b!==void 0)return b}const x=i(p),S=x.audioWorklet===void 0?r(m).then(([b,w])=>{const[E,A]=qc(b,w),L=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${A}
})})(window,'_AWGS')`;return n(L)}).then(()=>{const b=f._AWGS.pop();if(b===void 0)throw new SyntaxError;s(x.currentTime,x.sampleRate,()=>b(class{},void 0,(w,E)=>{if(w.trim()==="")throw t();const A=ko.get(x);if(A!==void 0){if(A.has(w))throw t();Gc(E),jc(E.parameterDescriptors),A.set(w,E)}else Gc(E),jc(E.parameterDescriptors),ko.set(x,new Map([[w,E]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(e(h,h))]).then(([[b,w],E])=>{const A=d+1;d=A;const[L,R]=qc(b,w),G=`${L};((AudioWorkletProcessor,registerProcessor)=>{${R}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${A}',class extends AudioWorkletProcessor{process(){return !1}})`,X=new Blob([G],{type:"application/javascript; charset=utf-8"}),q=URL.createObjectURL(X);return x.audioWorklet.addModule(q,g).then(()=>{if(a(x))return x;const W=o(x);return W.audioWorklet.addModule(q,g).then(()=>W)}).then(W=>{if(c===null)throw new SyntaxError;try{new c(W,`__sac${A}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(q))});return C===void 0?l.set(p,new Map([[m,S]])):C.set(m,S),S.then(()=>{const b=u.get(p);b===void 0?u.set(p,new Set([m])):b.add(m)}).finally(()=>{const b=l.get(p);b!==void 0&&b.delete(m)}),S}},Ne=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},bi=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return e.delete(s),s},Uu=(e,t,n,s)=>{const r=Ne(e,t),i=bi(r,o=>o[0]===n&&o[1]===s);return r.size===0&&e.delete(t),i},nr=e=>Ne(Bu,e),ds=e=>{if(fs.has(e))throw new Error("The AudioNode is already stored.");fs.add(e),nr(e).forEach(t=>t(!0))},Wu=e=>"port"in e,sr=e=>{if(!fs.has(e))throw new Error("The AudioNode is not stored.");fs.delete(e),nr(e).forEach(t=>t(!1))},Io=(e,t)=>{!Wu(e)&&t.every(n=>n.size===0)&&sr(e)},sg=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>{const d=new WeakMap;return(p,m,g,y,C)=>{const{activeInputs:x,passiveInputs:S}=i(m),{outputs:b}=i(p),w=a(p),E=A=>{const L=c(m),R=c(p);if(A){const V=Uu(S,p,g,y);e(x,p,V,!1),!C&&!h(p)&&n(R,L,g,y),f(m)&&ds(m)}else{const V=s(x,p,g,y);t(S,y,V,!1),!C&&!h(p)&&r(R,L,g,y);const M=o(m);if(M===0)u(m)&&Io(m,x);else{const j=d.get(m);j!==void 0&&clearTimeout(j),d.set(m,setTimeout(()=>{u(m)&&Io(m,x)},M*1e3))}}};return l(b,[m,g,y],A=>A[0]===m&&A[1]===g&&A[2]===y,!0)?(w.add(E),u(p)?e(x,p,[g,y,E],!0):t(S,y,[p,g,E],!0),!0):!1}},rg=e=>(t,n,[s,r,i],o)=>{const a=t.get(s);a===void 0?t.set(s,new Set([[r,n,i]])):e(a,[r,n,i],c=>c[0]===r&&c[1]===n,o)},ig=e=>(t,n)=>{const s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(t.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},og=e=>(t,n)=>{e(t).add(n)},ag={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},cg=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...ag,...c},h=s(l,u),f=i(l)?t():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Qt=(e,t)=>e.context===t,lg=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Qt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Hr=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ze=()=>new DOMException("","IndexSizeError"),sa=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(s){throw s.code===12?ze():s}})(e.getChannelData)},ug={numberOfChannels:1},hg=(e,t,n,s,r,i,o,a)=>{let c=null;return class $u{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...ug,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&t(i,i)?new s({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),sa(p)):t(Hr,()=>Hr(p))||a(p),e.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===$u.prototype||e.has(u)}}},oe=-34028234663852886e22,ee=-oe,Qe=e=>fs.has(e),fg={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},dg=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...fg,...u},d=r(h,f),p=o(h),m=p?t():null;super(l,!1,d,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,ee,oe)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){ds(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Qe(this)&&sr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},pg=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Qt(h,u);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(u,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await e(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},mg=e=>"playbackRate"in e,gg=e=>"frequency"in e&&"gain"in e,_g=e=>"offset"in e,yg=e=>!("frequency"in e)&&"gain"in e,vg=e=>"detune"in e&&"frequency"in e,bg=e=>"pan"in e,ne=e=>Ne(Pu,e),rr=e=>Ne(Vu,e),Oo=(e,t)=>{const{activeInputs:n}=ne(e);n.forEach(r=>r.forEach(([i])=>{t.includes(e)||Oo(i,[...t,e])}));const s=mg(e)?[e.playbackRate]:Wu(e)?Array.from(e.parameters.values()):gg(e)?[e.Q,e.detune,e.frequency,e.gain]:_g(e)?[e.offset]:yg(e)?[e.gain]:vg(e)?[e.detune,e.frequency]:bg(e)?[e.pan]:[];for(const r of s){const i=rr(r);i!==void 0&&i.activeInputs.forEach(([o])=>Oo(o,t))}Qe(e)&&sr(e)},qu=e=>{Oo(e.destination,[])},Tg=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),wg=(e,t,n,s,r,i,o,a,c)=>class extends e{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw s();if(!Tg(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:f}=u,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),qu(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?t():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?t():u})}},Cg=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f=o(h),d=r(h,u,f),p=f?t(a):null;super(l,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Sg=e=>{const t=new WeakMap,n=async(s,r)=>{const i=r.destination;return t.set(r,i),await e(s,r,i),i};return{render(s,r){const i=t.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},Ag=(e,t,n,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const b=new Float32Array(1),w=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(l);let A=!1,L=[0,0,-1,0,1,0],R=[0,0,0];const V=()=>{if(A)return;A=!0;const X=s(l,256,9,0);X.onaudioprocess=({inputBuffer:q})=>{const W=[i(q,b,0),i(q,b,1),i(q,b,2),i(q,b,3),i(q,b,4),i(q,b,5)];W.some((Y,et)=>Y!==L[et])&&(u.setOrientation(...W),L=W);const H=[i(q,b,6),i(q,b,7),i(q,b,8)];H.some((Y,et)=>Y!==R[et])&&(u.setPosition(...H),R=H)},w.connect(X)},M=X=>q=>{q!==L[X]&&(L[X]=q,u.setOrientation(...L))},j=X=>q=>{q!==R[X]&&(R[X]=q,u.setPosition(...R))},G=(X,q,W)=>{const H=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q});H.connect(w,0,X),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return q}});const Y=e({context:c},E,H.offset,ee,oe);return a(Y,"value",et=>()=>et.call(Y),et=>Q=>{try{et.call(Y,Q)}catch(rt){if(rt.code!==9)throw rt}V(),E&&W(Q)}),Y.cancelAndHoldAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.cancelAndHoldAtTime),Y.cancelScheduledValues=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.cancelScheduledValues),Y.exponentialRampToValueAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.exponentialRampToValueAtTime),Y.linearRampToValueAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.linearRampToValueAtTime),Y.setTargetAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.setTargetAtTime),Y.setValueAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.setValueAtTime),Y.setValueCurveAtTime=(et=>E?()=>{throw r()}:(...Q)=>{const rt=et.apply(Y,Q);return V(),rt})(Y.setValueCurveAtTime),Y};return{forwardX:G(0,0,M(0)),forwardY:G(1,0,M(1)),forwardZ:G(2,-1,M(2)),positionX:G(6,0,j(0)),positionY:G(7,0,j(1)),positionZ:G(8,0,j(2)),upX:G(3,0,M(3)),upY:G(4,1,M(4)),upZ:G(5,0,M(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:m,positionY:g,positionZ:y,upX:C,upY:x,upZ:S}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return y},get upX(){return C},get upY(){return x},get upZ(){return S}}},Kr=e=>"context"in e,ir=e=>Kr(e[0]),qn=(e,t,n,s)=>{for(const r of e)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},zc=(e,t,[n,s],r)=>{qn(e,[t,n,s],i=>i[0]===t&&i[1]===n,r)},Hc=(e,[t,n,s],r)=>{const i=e.get(t);i===void 0?e.set(t,new Set([[n,s]])):qn(i,[n,s],o=>o[0]===n,r)},bs=e=>"inputs"in e,Zr=(e,t,n,s)=>{if(bs(t)){const r=t.inputs[s];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,s),[t,n,s]},ju=(e,t,n)=>{for(const s of e)if(s[0]===t&&s[1]===n)return e.delete(s),s;return null},xg=(e,t,n)=>bi(e,s=>s[0]===t&&s[1]===n),Gu=(e,t)=>{if(!nr(e).delete(t))throw new Error("Missing the expected event listener.")},zu=(e,t,n)=>{const s=Ne(e,t),r=bi(s,i=>i[0]===n);return s.size===0&&e.delete(t),r},Yr=(e,t,n,s)=>{bs(t)?e.disconnect(t.inputs[s],n,0):e.disconnect(t,n,s)},xt=e=>Ne(ea,e),Zs=e=>Ne(na,e),Pn=e=>xo.has(e),Vr=e=>!fs.has(e),Kc=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const s=e.createScriptProcessor(256,1,1),r=e.createGain(),i=e.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=e.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(e.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(e.destination)},a.start()}}),ro=(e,t)=>{const n=new Map;for(const s of e)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>t(r,s))},Xr=e=>"context"in e,kg=e=>{const t=new Map;e.connect=(n=>(s,r=0,i=0)=>{const o=Xr(s)?n(s,r,i):n(s,r),a=t.get(s);return a===void 0?t.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(e.connect.bind(e)),e.disconnect=(n=>(s,r,i)=>{if(n.apply(e),s===void 0)t.clear();else if(typeof s=="number")for(const[o,a]of t){const c=a.filter(l=>l.output!==s);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(s))if(r===void 0)t.delete(s);else{const o=t.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?t.delete(s):t.set(s,a)}}for(const[o,a]of t)a.forEach(c=>{Xr(o)?e.connect(o,c.output,c.input):e.connect(o,c.output)})})(e.disconnect)},Eg=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=rr(t),{outputs:o}=ne(e),a=nr(e),c=l=>{const u=xt(e),h=Zs(t);if(l){const f=zu(i,e,n);zc(r,e,f,!1),!s&&!Pn(e)&&u.connect(h,n)}else{const f=xg(r,e,n);Hc(i,f,!1),!s&&!Pn(e)&&u.disconnect(h,n)}};return qn(o,[t,n],l=>l[0]===t&&l[1]===n,!0)?(a.add(c),Qe(e)?zc(r,e,[n,c],!0):Hc(i,[e,n,c],!0),!0):!1},Ig=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=ne(t),o=ju(r[s],e,n);return o===null?[Uu(i,e,n,s)[2],!1]:[o[2],!0]},Og=(e,t,n)=>{const{activeInputs:s,passiveInputs:r}=rr(t),i=ju(s,e,n);return i===null?[zu(r,e,n)[1],!1]:[i[2],!0]},ra=(e,t,n,s,r)=>{const[i,o]=Ig(e,n,s,r);if(i!==null&&(Gu(e,i),o&&!t&&!Pn(e)&&Yr(xt(e),xt(n),s,r)),Qe(n)){const{activeInputs:a}=ne(n);Io(n,a)}},ia=(e,t,n,s)=>{const[r,i]=Og(e,n,s);r!==null&&(Gu(e,r),i&&!t&&!Pn(e)&&xt(e).disconnect(Zs(n),s))},Ng=(e,t)=>{const n=ne(e),s=[];for(const r of n.outputs)ir(r)?ra(e,t,...r):ia(e,t,...r),s.push(r[0]);return n.outputs.clear(),s},Mg=(e,t,n)=>{const s=ne(e),r=[];for(const i of s.outputs)i[1]===n&&(ir(i)?ra(e,t,...i):ia(e,t,...i),r.push(i[0]),s.outputs.delete(i));return r},Dg=(e,t,n,s,r)=>{const i=ne(e);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(ir(o)?ra(e,t,...o):ia(e,t,...o),i.outputs.delete(o),o[0]))},Fg=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>class extends l{constructor(y,C,x,S){super(x),this._context=y,this._nativeAudioNode=x;const b=u(y);h(b)&&n(Kc,()=>Kc(b,m))!==!0&&kg(x),ea.set(this,x),Bu.set(this,new Set),y.state!=="closed"&&C&&ds(this),e(this,S,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,C=0,x=0){if(C<0||C>=this._nativeAudioNode.numberOfOutputs)throw r();const S=u(this._context),b=p(S);if(f(y)||d(y))throw i();if(Kr(y)){const A=xt(y);try{const R=Zr(this._nativeAudioNode,A,C,x),V=Vr(this);(b||V)&&this._nativeAudioNode.disconnect(...R),this.context.state!=="closed"&&!V&&Vr(y)&&ds(y)}catch(R){throw R.code===12?i():R}if(t(this,y,C,x,b)){const R=c([this],y);ro(R,s(b))}return y}const w=Zs(y);if(w.name==="playbackRate"&&w.maxValue===1024)throw o();try{this._nativeAudioNode.connect(w,C),(b||Vr(this))&&this._nativeAudioNode.disconnect(w,C)}catch(A){throw A.code===12?i():A}if(Eg(this,y,C,b)){const A=c([this],y);ro(A,s(b))}}disconnect(y,C,x){let S;const b=u(this._context),w=p(b);if(y===void 0)S=Ng(this,w);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw r();S=Mg(this,w,y)}else{if(C!==void 0&&(C<0||C>=this.numberOfOutputs)||Kr(y)&&x!==void 0&&(x<0||x>=y.numberOfInputs))throw r();if(S=Dg(this,w,y,C,x),S.length===0)throw i()}for(const E of S){const A=c([this],E);ro(A,a)}}},Rg=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g=null,y=null)=>{const C=m.value,x=new Gm(C),S=p?s(x):null,b={get defaultValue(){return C},get maxValue(){return g===null?m.maxValue:g},get minValue(){return y===null?m.minValue:y},get value(){return m.value},set value(w){m.value=w,b.setValueAtTime(w,d.context.currentTime)},cancelAndHoldAtTime(w){if(typeof m.cancelAndHoldAtTime=="function")S===null&&x.flush(d.context.currentTime),x.add(r(w)),m.cancelAndHoldAtTime(w);else{const E=Array.from(x).pop();S===null&&x.flush(d.context.currentTime),x.add(r(w));const A=Array.from(x).pop();m.cancelScheduledValues(w),E!==A&&A!==void 0&&(A.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(A.value,A.endTime):A.type==="linearRampToValue"?m.linearRampToValueAtTime(A.value,A.endTime):A.type==="setValue"?m.setValueAtTime(A.value,A.startTime):A.type==="setValueCurve"&&m.setValueCurveAtTime(A.values,A.startTime,A.duration))}return b},cancelScheduledValues(w){return S===null&&x.flush(d.context.currentTime),x.add(i(w)),m.cancelScheduledValues(w),b},exponentialRampToValueAtTime(w,E){if(w===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const A=d.context.currentTime;return S===null&&x.flush(A),Array.from(x).length===0&&(x.add(l(C,A)),m.setValueAtTime(C,A)),x.add(o(w,E)),m.exponentialRampToValueAtTime(w,E),b},linearRampToValueAtTime(w,E){const A=d.context.currentTime;return S===null&&x.flush(A),Array.from(x).length===0&&(x.add(l(C,A)),m.setValueAtTime(C,A)),x.add(a(w,E)),m.linearRampToValueAtTime(w,E),b},setTargetAtTime(w,E,A){return S===null&&x.flush(d.context.currentTime),x.add(c(w,E,A)),m.setTargetAtTime(w,E,A),b},setValueAtTime(w,E){return S===null&&x.flush(d.context.currentTime),x.add(l(w,E)),m.setValueAtTime(w,E),b},setValueCurveAtTime(w,E,A){const L=w instanceof Float32Array?w:new Float32Array(w);if(h!==null&&h.name==="webkitAudioContext"){const R=E+A,V=d.context.sampleRate,M=Math.ceil(E*V),j=Math.floor(R*V),G=j-M,X=new Float32Array(G);for(let W=0;W<G;W+=1){const H=(L.length-1)/A*((M+W)/V-E),Y=Math.floor(H),et=Math.ceil(H);X[W]=Y===et?L[Y]:(1-(H-Y))*L[Y]+(1-(et-H))*L[et]}S===null&&x.flush(d.context.currentTime),x.add(u(X,E,A)),m.setValueCurveAtTime(X,E,A);const q=j/V;q<R&&f(b,X[X.length-1],q),f(b,L[L.length-1],R)}else S===null&&x.flush(d.context.currentTime),x.add(u(L,E,A)),m.setValueCurveAtTime(L,E,A);return b}};return n.set(b,m),t.set(b,d),e(b,S),b},Pg=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;t.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;t.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;t.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;t.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;t.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Hu{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((s,r)=>t.call(n,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Vg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Bg=(e,t,n,s,r,i,o,a,c,l,u,h,f,d)=>class extends t{constructor(m,g,y){var C;const x=a(m),S=c(x),b=u({...Vg,...y});f(b);const w=ko.get(x),E=w==null?void 0:w.get(g),A=S||x.state!=="closed"?x:(C=o(x))!==null&&C!==void 0?C:x,L=r(A,S?null:m.baseLatency,l,g,E,b),R=S?s(g,b,E):null;super(m,!0,L,R);const V=[];L.parameters.forEach((j,G)=>{const X=n(this,S,j);V.push([G,X])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new Hu(V),S&&e(x,this);const{activeInputs:M}=i(this);h(L,M)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===g?m:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Jr(e,t,n,s,r){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],s,r);else{const i=e.getChannelData(s);if(t[n].byteLength===0)t[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(o)}}}const Ku=(e,t,n,s,r)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],s,r):t[n].byteLength!==0&&e.getChannelData(s).set(t[n],r)},Qr=(e,t)=>{const n=[];for(let s=0;s<e;s+=1){const r=[],i=typeof t=="number"?t:t[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},Lg=(e,t)=>{const n=Ne(Eo,e),s=xt(t);return Ne(n,s)},Ug=async(e,t,n,s,r,i,o)=>{const a=t===null?Math.ceil(e.context.length/128)*128:t.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,y)=>g+y,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=ne(e),f=await Lg(n,e),d=Qr(s.numberOfInputs,s.channelCount),p=Qr(s.numberOfOutputs,r),m=Array.from(e.parameters.keys()).reduce((g,y)=>({...g,[y]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&t!==null)for(let y=0;y<s.numberOfInputs;y+=1)for(let C=0;C<s.channelCount;C+=1)Jr(t,d[y],C,C,g);i.parameterDescriptors!==void 0&&t!==null&&i.parameterDescriptors.forEach(({name:y},C)=>{Jr(t,m,y,c+C,g)});for(let y=0;y<s.numberOfInputs;y+=1)for(let C=0;C<r[y];C+=1)p[y][C].byteLength===0&&(p[y][C]=new Float32Array(128));try{const y=d.map((x,S)=>h.activeInputs[S].size===0?[]:x),C=o(g/n.sampleRate,n.sampleRate,()=>f.process(y,p,m));if(u!==null)for(let x=0,S=0;x<s.numberOfOutputs;x+=1){for(let b=0;b<r[x];b+=1)Ku(u,p[x],b,S+b,g);S+=r[x]}if(!C)break}catch(y){e.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},Wg=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>(g,y,C)=>{const x=new WeakMap;let S=null;const b=async(w,E)=>{let A=u(w),L=null;const R=Qt(A,E),V=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const M=V.reduce((q,W)=>q+W,0),j=r(E,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),G=[];for(let q=0;q<w.numberOfOutputs;q+=1)G.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[q]}));const X=o(E,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});X.connect=t.bind(null,G),X.disconnect=c.bind(null,G),L=[j,G,X]}else R||(A=new h(E,g));if(x.set(E,L===null?A:L[2]),L!==null){if(S===null){if(C===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=w.channelCount*w.numberOfInputs,H=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length,Y=W+H;S=Ug(w,Y===0?null:await(async()=>{const Q=new f(Y,Math.ceil(w.context.length/128)*128,E.sampleRate),rt=[],Ft=[];for(let ct=0;ct<y.numberOfInputs;ct+=1)rt.push(o(Q,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),Ft.push(r(Q,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const Rt=await Promise.all(Array.from(w.parameters.values()).map(async ct=>{const O=i(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ct.value});return await d(Q,ct,O.offset),O})),at=s(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+H)});for(let ct=0;ct<y.numberOfInputs;ct+=1){rt[ct].connect(Ft[ct]);for(let O=0;O<y.channelCount;O+=1)Ft[ct].connect(at,O,ct*y.channelCount+O)}for(const[ct,O]of Rt.entries())O.connect(at,0,W+ct),O.start(0);return at.connect(Q.destination),await Promise.all(rt.map(ct=>p(w,Q,ct))),m(Q)})(),E,y,V,C,l)}const M=await S,j=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,X,q]=L;M!==null&&(j.buffer=M,j.start(0)),j.connect(G);for(let W=0,H=0;W<w.numberOfOutputs;W+=1){const Y=X[W];for(let et=0;et<V[W];et+=1)G.connect(Y,H+et,et);H+=V[W]}return q}if(R)for(const[M,j]of w.parameters.entries())await e(E,j,A.parameters.get(M));else for(const[M,j]of w.parameters.entries())await d(E,j,A.parameters.get(M));return await p(w,E,A),A};return{render(w,E){a(E,w);const A=x.get(E);return A!==void 0?Promise.resolve(A):b(w,E)}}},$g=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m,g,y,C,x)=>class extends p{constructor(b,w){super(b,w),this._nativeContext=b,this._audioWorklet=e===void 0?void 0:{addModule:(E,A)=>e(this,E,A)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(b,w,E){return new n({length:w,numberOfChannels:b,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(b=6){return new i(this,{numberOfInputs:b})}createChannelSplitter(b=6){return new o(this,{numberOfOutputs:b})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(b=1){return new u(this,{maxDelayTime:b})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(b,w){return new d(this,{feedback:w,feedforward:b})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(b,w,E={disableNormalization:!1}){return new y(this,{...E,imag:w,real:b})}createStereoPanner(){return new C(this)}createWaveShaper(){return new x(this)}decodeAudioData(b,w,E){return l(this._nativeContext,b).then(A=>(typeof w=="function"&&w(A),A),A=>{throw typeof E=="function"&&E(A),A})}},qg={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},jg=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...qg,...u},d=r(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._Q=t(this,p,d.Q,ee,oe),this._detune=t(this,p,d.detune,1200*Math.log2(ee),-1200*Math.log2(ee)),this._frequency=t(this,p,d.frequency,l.sampleRate/2,0),this._gain=t(this,p,d.gain,40*Math.log10(ee),oe),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?s():f}if(l.length!==u.length||u.length!==h.length)throw s()}},Gg=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(c,h)}return i.set(c,l),u?(await e(c,a.Q,l.Q),await e(c,a.detune,l.detune),await e(c,a.frequency,l.frequency),await e(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},zg=(e,t)=>(n,s)=>{const r=t.get(n);if(r!==void 0)return r;const i=e.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(e.set(n,o),o.catch(()=>!1).then(a=>(e.delete(n),t.set(n,a),a))):(t.set(n,o),o)}catch{return t.set(n,!1),!1}},Hg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Kg=(e,t,n,s,r)=>class extends e{constructor(o,a){const c=s(o),l={...Hg,...a},u=n(c,l),h=r(c)?t():null;super(o,!1,u,h)}},Zg=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Qt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Yg={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Xg=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u=i({...Yg,...c}),h=n(l,u),f=r(l)?t():null;super(a,!1,h,f)}},Jg=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Qt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Qg=e=>(t,n,s)=>e(n,t,s),t_=e=>(t,n,s=0,r=0)=>{const i=t[s];if(i===void 0)throw e();return Xr(n)?i.connect(n,0,r):i.connect(n,0)},e_=e=>(t,n)=>{const s=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},n_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},s_=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...n_,...l},f=s(u,h),d=i(u),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=t(this,d,f.offset,ee,oe),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){ds(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Qe(this)&&sr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},r_=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Qt(h,u);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(u,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await e(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},i_=e=>t=>(e[0]=t,e[0]),o_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},a_=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u={...o_,...c},h=n(l,u),d=r(l)?t():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},c_=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Qt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(o,l)}return s.set(o,a),bs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},l_=(e,t)=>(n,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,s,r)}catch(i){throw i.name==="SyntaxError"?e():i}},u_=()=>new DOMException("","DataCloneError"),Zc=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,t.close(),n.close(),s()};n.onmessage=()=>r();try{t.postMessage(e,[e])}catch{}finally{r()}})},h_=(e,t,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=o(h)?h:i(h);if(r.has(f)){const p=n();return Promise.reject(p)}try{r.add(f)}catch{}return t(c,()=>c(d))?d.decodeAudioData(f).then(p=>(Zc(f).catch(()=>{}),t(a,()=>a(p))||u(p),e.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await Zc(f)}catch{}},y=C=>{m(C),g()};try{d.decodeAudioData(f,C=>{typeof C.copyFromChannel!="function"&&(l(C),sa(C)),e.add(C),g().then(()=>p(C))},C=>{y(C===null?s():C)})}catch(C){y(C)}})},f_=(e,t,n,s,r,i,o,a)=>(c,l)=>{const u=t.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(t.delete(c),!f&&o(c)){const d=s(c),{outputs:p}=n(c);for(const m of p)if(ir(m)){const g=s(m[0]);e(d,g,m[1],m[2])}else{const g=r(m[0]);d.connect(g,m[1])}}}else t.set(c,u-l)},d_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},p_=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...d_,...l},f=s(u,h),d=i(u),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=t(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},m_=(e,t,n,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const h=Qt(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=t(l,f)}return o.set(l,u),h?await e(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},g_=e=>(t,n,s,r)=>e(t[r],i=>i[0]===n&&i[1]===s),__=e=>(t,n)=>{e(t).delete(n)},y_=e=>"delayTime"in e,v_=(e,t,n)=>function s(r,i){const o=Kr(i)?i:n(e,i);if(y_(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Sr=(e,t,n)=>{const s=t[n];if(s===void 0)throw e();return s},b_=e=>(t,n=void 0,s=void 0,r=0)=>n===void 0?t.forEach(i=>i.disconnect()):typeof n=="number"?Sr(e,t,n).disconnect():Xr(n)?s===void 0?t.forEach(i=>i.disconnect(n)):r===void 0?Sr(e,t,s).disconnect(n,0):Sr(e,t,s).disconnect(n,0,r):s===void 0?t.forEach(i=>i.disconnect(n)):Sr(e,t,s).disconnect(n,0),T_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},w_=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...T_,...u},d=s(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._attack=t(this,p,d.attack),this._knee=t(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=t(this,p,d.ratio),this._release=t(this,p,d.release),this._threshold=t(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},C_=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(c,h)}return i.set(c,l),u?(await e(c,a.attack,l.attack),await e(c,a.knee,l.knee),await e(c,a.ratio,l.ratio),await e(c,a.release,l.release),await e(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},S_=()=>new DOMException("","EncodingError"),A_=e=>t=>new Promise((n,s)=>{if(e===null){s(new SyntaxError);return}const r=e.document.head;if(r===null)s(new SyntaxError);else{const i=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=e.onerror,l=()=>{e.onerror=c,URL.revokeObjectURL(a)};e.onerror=(u,h,f,d,p)=>{if(h===a||h===e.location.href&&f===1&&d===1)return l(),s(p),!1;if(c!==null)return c(u,h,f,d,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",r.appendChild(i)}}),x_=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=e(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},k_=e=>(t,n,s)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},E_=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},I_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},O_=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...I_,...c},h=s(l,u),f=i(l),d=f?n():null;super(a,!1,h,d),this._gain=t(this,f,h.gain,ee,oe)}get gain(){return this._gain}},N_=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(c,h)}return i.set(c,l),u?await e(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},M_=(e,t)=>n=>t(e,n),D_=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},F_=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},R_=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},P_=e=>t=>e.get(t),Gt=()=>new DOMException("","InvalidStateError"),V_=e=>t=>{const n=e.get(t);if(n===void 0)throw Gt();return n},B_=(e,t)=>n=>{let s=e.get(n);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),e.set(n,s),s},L_=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Ti=()=>new DOMException("","InvalidAccessError"),U_=e=>{e.getFrequencyResponse=(t=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw Ti();return t.call(e,n,s,r)})(e.getFrequencyResponse)},W_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$_=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u=r(l),h={...W_,...c},f=t(l,u?null:a.baseLatency,h),d=u?n(h.feedback,h.feedforward):null;super(a,!1,f,d),U_(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Zu=(e,t,n,s,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*l[d];for(let m=1;m<r;m+=1){const g=f-m&c-1;p+=n[m]*i[g],p-=e[m]*o[g]}for(let m=r;m<s;m+=1)p+=n[m]*i[f-m&c-1];for(let m=r;m<t;m+=1)p-=e[m]*o[f-m&c-1];i[f]=l[d],o[f]=p,f=f+1&c-1,u[d]=p}return f},q_=(e,t,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const m=e.getChannelData(p),g=f.getChannelData(p);u.fill(0),h.fill(0),Zu(r,o,i,a,c,u,h,0,l,m,g)}return f},j_=(e,t,n,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,d=t(u);const p=Qt(d,h);if(h.createIIRFilter===void 0?f=e(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const y=await r(g);return q_(y,h,i,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await s(u,h,d),d};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},G_=(e,t,n,s,r,i)=>o=>(a,c)=>{const l=e.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=n(a);for(const f of h)if(ir(f)){const d=s(f[0]);t(u,d,f[1],f[2])}else{const d=r(f[0]);u.disconnect(d,f[1])}}e.set(a,c)}else e.set(a,l+c)},z_=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},H_=(e,t)=>n=>e.has(n)||t(n),K_=(e,t)=>n=>e.has(n)||t(n),Z_=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},Y_=e=>t=>e!==null&&t instanceof e,X_=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,J_=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,Q_=(e,t)=>n=>e(n)||t(n),ty=e=>t=>e!==null&&t instanceof e,ey=e=>e!==null&&e.isSecureContext,ny=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},sy={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ry=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const c={...sy,...o},l=t(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},iy=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},oy=(e,t,n)=>class extends e{constructor(r,i){const o=n(r),a=t(o,i);super(r,!0,a,null)}},ay=(e,t,n,s,r,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,vi.set(this,a),s(a)&&r.set(a,new Set),this._destination=new e(this,c),this._listener=t(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ys=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},cy=(e,t)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(t(a))return o.call(n,a,c,l),e(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(n,a,c),e(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{t(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(n.disconnect),n},Et=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n]&&(e[n]=s)},$t=(e,t)=>{Et(e,t,"channelCount"),Et(e,t,"channelCountMode"),Et(e,t,"channelInterpretation")},Yc=e=>typeof e.getFloatTimeDomainData=="function",ly=e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const s=Math.max(n.length,e.fftSize);for(let r=0;r<s;r+=1)t[r]=(n[r]-128)*.0078125;return t}},uy=(e,t)=>(n,s)=>{const r=n.createAnalyser();if($t(r,s),!(s.maxDecibels>s.minDecibels))throw t();return Et(r,s,"fftSize"),Et(r,s,"maxDecibels"),Et(r,s,"minDecibels"),Et(r,s,"smoothingTimeConstant"),e(Yc,()=>Yc(r))||ly(r),r},hy=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,Nt=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n].value&&(e[n].value=s)},fy=e=>{e.start=(t=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw Gt();t.call(e,s,r,i),n=!0}})(e.start)},oa=e=>{e.start=(t=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,s,r)})(e.start)},aa=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},dy=(e,t,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=h.createBufferSource();return $t(d,f),Nt(d,f,"playbackRate"),Et(d,f,"buffer"),Et(d,f,"loop"),Et(d,f,"loopEnd"),Et(d,f,"loopStart"),t(n,()=>n(h))||fy(d),t(s,()=>s(h))||c(d),t(r,()=>r(h))||l(d,h),t(i,()=>i(h))||oa(d),t(o,()=>o(h))||u(d,h),t(a,()=>a(h))||aa(d),e(h,d),d},py=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,my=(e,t)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=e(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},gy=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,_y=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},yy=(e,t,n,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const y=f.get(m[1]);y!==void 0?m[1]=y:(m[1]=C=>{C.type==="error"?(Object.defineProperties(C,{type:{value:"processorerror"}}),g(C)):g(new ErrorEvent(m[0],{...C}))},f.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return _y(u),t(i,o,l,u)},Yu=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),vy=e=>new Promise((t,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),t(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(e)}),by=async(e,t)=>{const n=await vy(t);return new e(n)},Ty=(e,t,n,s)=>{let r=Eo.get(e);r===void 0&&(r=new WeakMap,Eo.set(e,r));const i=by(n,s);return r.set(t,i),i},wy=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some(T=>T<1))throw c();if(y.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw c();const C=g.channelCount*g.numberOfInputs,x=y.reduce((T,k)=>T+k,0),S=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(C+S>6||x>6)throw c();const b=new MessageChannel,w=[],E=[];for(let T=0;T<g.numberOfInputs;T+=1)w.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),E.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const A=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:T,maxValue:k,minValue:I,name:F}of m.parameterDescriptors){const P=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[F]!==void 0?g.parameterData[F]:T===void 0?0:T});Object.defineProperties(P.offset,{defaultValue:{get:()=>T===void 0?0:T},maxValue:{get:()=>k===void 0?ee:k},minValue:{get:()=>I===void 0?oe:I}}),A.push(P)}const L=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,C+S)}),R=Yu(p,d.sampleRate),V=a(d,R,C+S,Math.max(1,x)),M=r(d,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),j=[];for(let T=0;T<g.numberOfOutputs;T+=1)j.push(s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[T]}));for(let T=0;T<g.numberOfInputs;T+=1){w[T].connect(E[T]);for(let k=0;k<g.channelCount;k+=1)E[T].connect(L,k,T*g.channelCount+k)}const G=new Hu(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:T},k)=>{const I=A[k];return I.connect(L,0,C+k),I.start(0),[T,I.offset]}));L.connect(V);let X=g.channelInterpretation,q=null;const W=g.numberOfOutputs===0?[V]:j,H={get bufferSize(){return R},get channelCount(){return g.channelCount},set channelCount(T){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(T){throw n()},get channelInterpretation(){return X},set channelInterpretation(T){for(const k of w)k.channelInterpretation=T;X=T},get context(){return V.context},get inputs(){return w},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(T){typeof q=="function"&&H.removeEventListener("processorerror",q),q=typeof T=="function"?T:null,typeof q=="function"&&H.addEventListener("processorerror",q)},get parameters(){return G},get port(){return b.port2},addEventListener(...T){return V.addEventListener(T[0],T[1],T[2])},connect:e.bind(null,W),disconnect:l.bind(null,W),dispatchEvent(...T){return V.dispatchEvent(T[0])},removeEventListener(...T){return V.removeEventListener(T[0],T[1],T[2])}},Y=new Map;b.port1.addEventListener=(T=>(...k)=>{if(k[0]==="message"){const I=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(I!==null){const F=Y.get(k[1]);F!==void 0?k[1]=F:(k[1]=P=>{u(d.currentTime,d.sampleRate,()=>I(P))},Y.set(I,k[1]))}}return T.call(b.port1,k[0],k[1],k[2])})(b.port1.addEventListener),b.port1.removeEventListener=(T=>(...k)=>{if(k[0]==="message"){const I=Y.get(k[1]);I!==void 0&&(Y.delete(k[1]),k[1]=I)}return T.call(b.port1,k[0],k[1],k[2])})(b.port1.removeEventListener);let et=null;Object.defineProperty(b.port1,"onmessage",{get:()=>et,set:T=>{typeof et=="function"&&b.port1.removeEventListener("message",et),et=typeof T=="function"?T:null,typeof et=="function"&&(b.port1.addEventListener("message",et),b.port1.start())}}),m.prototype.port=b.port1;let Q=null;Ty(d,H,m,g).then(T=>Q=T);const Ft=Qr(g.numberOfInputs,g.channelCount),Rt=Qr(g.numberOfOutputs,y),at=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((T,{name:k})=>({...T,[k]:new Float32Array(128)}),{});let ct=!0;const O=()=>{g.numberOfOutputs>0&&V.disconnect(M);for(let T=0,k=0;T<g.numberOfOutputs;T+=1){const I=j[T];for(let F=0;F<y[T];F+=1)M.disconnect(I,k+F,F);k+=y[T]}},N=new Map;V.onaudioprocess=({inputBuffer:T,outputBuffer:k})=>{if(Q!==null){const I=h(H);for(let F=0;F<R;F+=128){for(let P=0;P<g.numberOfInputs;P+=1)for(let D=0;D<g.channelCount;D+=1)Jr(T,Ft[P],D,D,F);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:P},D)=>{Jr(T,at,P,C+D,F)});for(let P=0;P<g.numberOfInputs;P+=1)for(let D=0;D<y[P];D+=1)Rt[P][D].byteLength===0&&(Rt[P][D]=new Float32Array(128));try{const P=Ft.map((U,B)=>{if(I[B].size>0)return N.set(B,R/128),U;const tt=N.get(B);return tt===void 0?[]:(U.every(J=>J.every(nt=>nt===0))&&(tt===1?N.delete(B):N.set(B,tt-1)),U)});ct=u(d.currentTime+F/d.sampleRate,d.sampleRate,()=>Q.process(P,Rt,at));for(let U=0,B=0;U<g.numberOfOutputs;U+=1){for(let z=0;z<y[U];z+=1)Ku(k,Rt[U],z,B+z,F);B+=y[U]}}catch(P){ct=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:P.colno,filename:P.filename,lineno:P.lineno,message:P.message}))}if(!ct){for(let P=0;P<g.numberOfInputs;P+=1){w[P].disconnect(E[P]);for(let D=0;D<g.channelCount;D+=1)E[F].disconnect(L,D,P*g.channelCount+D)}if(m.parameterDescriptors!==void 0){const P=m.parameterDescriptors.length;for(let D=0;D<P;D+=1){const U=A[D];U.disconnect(L,0,C+D),U.stop()}}L.disconnect(V),V.onaudioprocess=null,$?O():gt();break}}}};let $=!1;const K=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ft=()=>V.connect(K).connect(d.destination),gt=()=>{V.disconnect(K),K.disconnect()},_=()=>{if(ct){gt(),g.numberOfOutputs>0&&V.connect(M);for(let T=0,k=0;T<g.numberOfOutputs;T+=1){const I=j[T];for(let F=0;F<y[T];F+=1)M.connect(I,k+F,F);k+=y[T]}}$=!0},v=()=>{ct&&(ft(),O()),$=!1};return ft(),f(H,_,v)},Xu=(e,t)=>{const n=e.createBiquadFilter();return $t(n,t),Nt(n,t,"Q"),Nt(n,t,"detune"),Nt(n,t,"frequency"),Nt(n,t,"gain"),Et(n,t,"type"),n},Cy=(e,t)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,r),$t(r,s),r},Sy=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw Gt()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Gt()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Gt()}})},or=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return $t(n,t),Sy(n),n},Ay=(e,t,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return $t(a,o),Nt(a,o,"offset"),t(s,()=>s(i))||oa(a),t(r,()=>r(i))||aa(a),e(i,a),a},Ts=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),xy=(e,t,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),d=()=>c.disconnect(l);return e(r,c),s(Ts(h,l),f,d)},ky=(e,t)=>(n,s)=>{const r=n.createConvolver();if($t(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Et(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw e();return i.call(r,o)}),s.channelCountMode==="max"))throw e();return t(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw e();return i.call(r,o)}),r},Ju=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return $t(n,t),Nt(n,t,"delayTime"),n},Ey=e=>(t,n)=>{const s=t.createDynamicsCompressor();if($t(s,n),n.channelCount>2||n.channelCountMode==="max")throw e();return Nt(s,n,"attack"),Nt(s,n,"knee"),Nt(s,n,"ratio"),Nt(s,n,"release"),Nt(s,n,"threshold"),s},ue=(e,t)=>{const n=e.createGain();return $t(n,t),Nt(n,t,"gain"),n},Iy=e=>(t,n,s)=>{if(t.createIIRFilter===void 0)return e(t,n,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return $t(r,s),r};function Oy(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function Ny(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function Xc(e,t){let n=[0,0];for(let s=e.length-1;s>=0;s-=1)n=Ny(n,t),n[0]+=e[s];return n}const My=(e,t,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Yu(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=d.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(f[0]===0)throw t();if(m===0||m>20)throw s();if(d[0]===0)throw t();if(f[0]!==1){for(let A=0;A<m;A+=1)d[A]/=f[0];for(let A=1;A<p;A+=1)f[A]/=f[0]}const y=n(r,h,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=c;const C=32,x=[],S=[],b=[];for(let A=0;A<o;A+=1){x.push(0);const L=new Float32Array(C),R=new Float32Array(C);L.fill(0),R.fill(0),S.push(L),b.push(R)}y.onaudioprocess=A=>{const L=A.inputBuffer,R=A.outputBuffer,V=L.numberOfChannels;for(let M=0;M<V;M+=1){const j=L.getChannelData(M),G=R.getChannelData(M);x[M]=Zu(f,p,d,m,g,S[M],b[M],x[M],C,j,G)}};const w=r.sampleRate/2;return Ts({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(A){y.channelCount=A},get channelCountMode(){return y.channelCountMode},set channelCountMode(A){y.channelCountMode=A},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(A){y.channelInterpretation=A},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...A){return y.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return y.dispatchEvent(A[0])},getFrequencyResponse(A,L,R){if(A.length!==L.length||L.length!==R.length)throw e();const V=A.length;for(let M=0;M<V;M+=1){const j=-Math.PI*(A[M]/w),G=[Math.cos(j),Math.sin(j)],X=Xc(d,G),q=Xc(f,G),W=Oy(X,q);L[M]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),R[M]=Math.atan2(W[1],W[0])}},removeEventListener(...A){return y.removeEventListener(A[0],A[1],A[2])}},y)},Dy=(e,t)=>e.createMediaElementSource(t.mediaElement),Fy=(e,t)=>{const n=e.createMediaStreamDestination();return $t(n,t),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Ry=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=e.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},Py=(e,t)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw e();if(t(n))throw new TypeError;return i},Vy=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,By=(e,t,n,s,r,i)=>(o,a)=>{const c=o.createOscillator();return $t(c,a),Nt(c,a,"detune"),Nt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Et(c,a,"type"),t(n,()=>n(o))||oa(c),t(s,()=>s(o))||i(c,o),t(r,()=>r(o))||aa(c),e(o,c),c},Ly=e=>(t,n)=>{const s=t.createPanner();return s.orientationX===void 0?e(t,n):($t(s,n),Nt(s,n,"orientationX"),Nt(s,n,"orientationY"),Nt(s,n,"orientationZ"),Nt(s,n,"positionX"),Nt(s,n,"positionY"),Nt(s,n,"positionZ"),Et(s,n,"coneInnerAngle"),Et(s,n,"coneOuterAngle"),Et(s,n,"coneOuterGain"),Et(s,n,"distanceModel"),Et(s,n,"maxDistance"),Et(s,n,"panningModel"),Et(s,n,"refDistance"),Et(s,n,"rolloffFactor"),s)},Uy=(e,t,n,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:m,orientationX:g,orientationY:y,orientationZ:C,panningModel:x,positionX:S,positionY:b,positionZ:w,refDistance:E,rolloffFactor:A,...L})=>{const R=u.createPanner();if(L.channelCount>2||L.channelCountMode==="max")throw o();$t(R,L);const V={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=n(u,{...V,channelInterpretation:"speakers",numberOfInputs:6}),j=s(u,{...L,gain:1}),G=s(u,{...V,gain:1}),X=s(u,{...V,gain:0}),q=s(u,{...V,gain:0}),W=s(u,{...V,gain:0}),H=s(u,{...V,gain:0}),Y=s(u,{...V,gain:0}),et=r(u,256,6,1),Q=i(u,{...V,curve:new Float32Array([1,1]),oversample:"none"});let rt=[g,y,C],Ft=[S,b,w];const Rt=new Float32Array(1);et.onaudioprocess=({inputBuffer:N})=>{const $=[c(N,Rt,0),c(N,Rt,1),c(N,Rt,2)];$.some((ft,gt)=>ft!==rt[gt])&&(R.setOrientation(...$),rt=$);const K=[c(N,Rt,3),c(N,Rt,4),c(N,Rt,5)];K.some((ft,gt)=>ft!==Ft[gt])&&(R.setPosition(...K),Ft=K)},Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const at={get bufferSize(){},get channelCount(){return R.channelCount},set channelCount(N){if(N>2)throw o();j.channelCount=N,R.channelCount=N},get channelCountMode(){return R.channelCountMode},set channelCountMode(N){if(N==="max")throw o();j.channelCountMode=N,R.channelCountMode=N},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(N){j.channelInterpretation=N,R.channelInterpretation=N},get coneInnerAngle(){return R.coneInnerAngle},set coneInnerAngle(N){R.coneInnerAngle=N},get coneOuterAngle(){return R.coneOuterAngle},set coneOuterAngle(N){R.coneOuterAngle=N},get coneOuterGain(){return R.coneOuterGain},set coneOuterGain(N){if(N<0||N>1)throw t();R.coneOuterGain=N},get context(){return R.context},get distanceModel(){return R.distanceModel},set distanceModel(N){R.distanceModel=N},get inputs(){return[j]},get maxDistance(){return R.maxDistance},set maxDistance(N){if(N<0)throw new RangeError;R.maxDistance=N},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},get orientationX(){return G.gain},get orientationY(){return X.gain},get orientationZ(){return q.gain},get panningModel(){return R.panningModel},set panningModel(N){R.panningModel=N},get positionX(){return W.gain},get positionY(){return H.gain},get positionZ(){return Y.gain},get refDistance(){return R.refDistance},set refDistance(N){if(N<0)throw new RangeError;R.refDistance=N},get rolloffFactor(){return R.rolloffFactor},set rolloffFactor(N){if(N<0)throw new RangeError;R.rolloffFactor=N},addEventListener(...N){return j.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return j.dispatchEvent(N[0])},removeEventListener(...N){return j.removeEventListener(N[0],N[1],N[2])}};h!==at.coneInnerAngle&&(at.coneInnerAngle=h),f!==at.coneOuterAngle&&(at.coneOuterAngle=f),d!==at.coneOuterGain&&(at.coneOuterGain=d),p!==at.distanceModel&&(at.distanceModel=p),m!==at.maxDistance&&(at.maxDistance=m),g!==at.orientationX.value&&(at.orientationX.value=g),y!==at.orientationY.value&&(at.orientationY.value=y),C!==at.orientationZ.value&&(at.orientationZ.value=C),x!==at.panningModel&&(at.panningModel=x),S!==at.positionX.value&&(at.positionX.value=S),b!==at.positionY.value&&(at.positionY.value=b),w!==at.positionZ.value&&(at.positionZ.value=w),E!==at.refDistance&&(at.refDistance=E),A!==at.rolloffFactor&&(at.rolloffFactor=A),(rt[0]!==1||rt[1]!==0||rt[2]!==0)&&R.setOrientation(...rt),(Ft[0]!==0||Ft[1]!==0||Ft[2]!==0)&&R.setPosition(...Ft);const ct=()=>{j.connect(R),e(j,Q,0,0),Q.connect(G).connect(M,0,0),Q.connect(X).connect(M,0,1),Q.connect(q).connect(M,0,2),Q.connect(W).connect(M,0,3),Q.connect(H).connect(M,0,4),Q.connect(Y).connect(M,0,5),M.connect(et).connect(u.destination)},O=()=>{j.disconnect(R),a(j,Q,0,0),Q.disconnect(G),G.disconnect(M),Q.disconnect(X),X.disconnect(M),Q.disconnect(q),q.disconnect(M),Q.disconnect(W),W.disconnect(M),Q.disconnect(H),H.disconnect(M),Q.disconnect(Y),Y.disconnect(M),M.disconnect(et),et.disconnect(u.destination)};return l(Ts(at,R),ct,O)},Wy=e=>(t,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=t.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw e();return a},ar=(e,t,n,s)=>e.createScriptProcessor(t,n,s),$y=(e,t)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(n.createStereoPanner===void 0)return e(n,s);const i=n.createStereoPanner();return $t(i,s),Nt(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw t()}}),i},qy=(e,t,n,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,y)=>{const C=new Float32Array(16385),x=new Float32Array(16385);for(let L=0;L<16385;L+=1){const R=L/16384*c;C[L]=Math.cos(R),x[L]=Math.sin(R)}const S=n(p,{...l,gain:0}),b=s(p,{...u,curve:C}),w=s(p,{...u,curve:a}),E=n(p,{...l,gain:0}),A=s(p,{...u,curve:x});return{connectGraph(){m.connect(S),m.connect(w.inputs===void 0?w:w.inputs[0]),m.connect(E),w.connect(g),g.connect(b.inputs===void 0?b:b.inputs[0]),g.connect(A.inputs===void 0?A:A.inputs[0]),b.connect(S.gain),A.connect(E.gain),S.connect(y,0,0),E.connect(y,0,1)},disconnectGraph(){m.disconnect(S),m.disconnect(w.inputs===void 0?w:w.inputs[0]),m.disconnect(E),w.disconnect(g),g.disconnect(b.inputs===void 0?b:b.inputs[0]),g.disconnect(A.inputs===void 0?A:A.inputs[0]),b.disconnect(S.gain),A.disconnect(E.gain),S.disconnect(y,0,0),E.disconnect(y,0,1)}}},f=(p,m,g,y)=>{const C=new Float32Array(16385),x=new Float32Array(16385),S=new Float32Array(16385),b=new Float32Array(16385),w=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>w){const H=(W-w)/(16384-w)*c;C[W]=Math.cos(H),x[W]=Math.sin(H),S[W]=0,b[W]=1}else{const H=W/(16384-w)*c;C[W]=1,x[W]=0,S[W]=Math.cos(H),b[W]=Math.sin(H)}const E=t(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),A=n(p,{...l,gain:0}),L=s(p,{...u,curve:C}),R=n(p,{...l,gain:0}),V=s(p,{...u,curve:x}),M=s(p,{...u,curve:a}),j=n(p,{...l,gain:0}),G=s(p,{...u,curve:S}),X=n(p,{...l,gain:0}),q=s(p,{...u,curve:b});return{connectGraph(){m.connect(E),m.connect(M.inputs===void 0?M:M.inputs[0]),E.connect(A,0),E.connect(R,0),E.connect(j,1),E.connect(X,1),M.connect(g),g.connect(L.inputs===void 0?L:L.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),g.connect(G.inputs===void 0?G:G.inputs[0]),g.connect(q.inputs===void 0?q:q.inputs[0]),L.connect(A.gain),V.connect(R.gain),G.connect(j.gain),q.connect(X.gain),A.connect(y,0,0),j.connect(y,0,0),R.connect(y,0,1),X.connect(y,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(M.inputs===void 0?M:M.inputs[0]),E.disconnect(A,0),E.disconnect(R,0),E.disconnect(j,1),E.disconnect(X,1),M.disconnect(g),g.disconnect(L.inputs===void 0?L:L.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),g.disconnect(G.inputs===void 0?G:G.inputs[0]),g.disconnect(q.inputs===void 0?q:q.inputs[0]),L.disconnect(A.gain),V.disconnect(R.gain),G.disconnect(j.gain),q.disconnect(X.gain),A.disconnect(y,0,0),j.disconnect(y,0,0),R.disconnect(y,0,1),X.disconnect(y,0,1)}}},d=(p,m,g,y,C)=>{if(m===1)return h(p,g,y,C);if(m===2)return f(p,g,y,C);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:y,...C})=>{if(g==="max")throw r();const x=e(p,{...C,channelCount:1,channelCountMode:g,numberOfInputs:2}),S=n(p,{...C,channelCount:m,channelCountMode:g,gain:1}),b=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:w,disconnectGraph:E}=d(p,m,S,b,x);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});const A={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(M){S.channelCount!==M&&(L&&E(),{connectGraph:w,disconnectGraph:E}=d(p,M,S,b,x),L&&w()),S.channelCount=M},get channelCountMode(){return S.channelCountMode},set channelCountMode(M){if(M==="clamped-max"||M==="max")throw r();S.channelCountMode=M},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(M){S.channelInterpretation=M},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get pan(){return b.gain},addEventListener(...M){return S.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return S.dispatchEvent(M[0])},removeEventListener(...M){return S.removeEventListener(M[0],M[1],M[2])}};let L=!1;const R=()=>{w(),L=!0},V=()=>{E(),L=!1};return i(Ts(A,x),R,V)}},jy=(e,t,n,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);$t(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw t();Et(l,{curve:u},"curve"),Et(l,c,"oversample");let h=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(s(g)&&h===null?h=e(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{f=!0,s(l.curve)&&(h=e(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},Gy=(e,t,n,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();$t(l,c),$t(u,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let m=null,g=!1,y=null;const C={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(b){h.channelCount=b,f.channelCount=b,l.channelCount=b,d.channelCount=b,u.channelCount=b,p.channelCount=b},get channelCountMode(){return l.channelCountMode},set channelCountMode(b){h.channelCountMode=b,f.channelCountMode=b,l.channelCountMode=b,d.channelCountMode=b,u.channelCountMode=b,p.channelCountMode=b},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(b){h.channelInterpretation=b,f.channelInterpretation=b,l.channelInterpretation=b,d.channelInterpretation=b,u.channelInterpretation=b,p.channelInterpretation=b},get context(){return l.context},get curve(){return y},set curve(b){if(b!==null&&b.length<2)throw t();if(b===null)l.curve=b,u.curve=b;else{const w=b.length,E=new Float32Array(w+2-w%2),A=new Float32Array(w+2-w%2);E[0]=b[0],A[0]=-b[w-1];const L=Math.ceil((w+1)/2),R=(w+1)/2-1;for(let V=1;V<L;V+=1){const M=V/L*R,j=Math.floor(M),G=Math.ceil(M);E[V]=j===G?b[j]:(1-(M-j))*b[j]+(1-(G-M))*b[G],A[V]=j===G?-b[w-1-j]:-((1-(M-j))*b[w-1-j])-(1-(G-M))*b[w-1-G]}E[L]=w%2===1?b[L-1]:(b[L-2]+b[L-1])/2,l.curve=E,u.curve=A}y=b,g&&(s(y)&&m===null?m=e(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(b){l.oversample=b,u.oversample=b},addEventListener(...b){return h.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return h.dispatchEvent(b[0])},removeEventListener(...b){return h.removeEventListener(b[0],b[1],b[2])}};o!==null&&(C.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==C.oversample&&(C.oversample=a);const x=()=>{h.connect(l).connect(d),h.connect(f).connect(u).connect(p).connect(d),g=!0,s(y)&&(m=e(i,h))},S=()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(d),g=!1,m!==null&&(m(),m=null)};return r(Ts(C,d),x,S)},se=()=>new DOMException("","NotSupportedError"),zy={numberOfChannels:1},Hy=(e,t,n,s,r)=>class extends e{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...zy,...l},d=s(h,u,f);t(Ys,()=>Ys(d))||d.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(d,h),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,qu(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Ky={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Zy=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...Ky,...l},f=n(u,h),d=i(u),p=d?s():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=t(this,d,f.detune,153600,-153600),this._frequency=t(this,d,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){ds(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Qe(this)&&sr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Yy=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=n(u);const d=Qt(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=t(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await e(h,u.detune,f.detune),await e(h,u.frequency,f.frequency)):(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},Xy={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Jy=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...Xy,...l},f=n(u,h),d=i(u),p=d?s():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=t(this,d,f.orientationX,ee,oe),this._orientationY=t(this,d,f.orientationY,ee,oe),this._orientationZ=t(this,d,f.orientationZ,ee,oe),this._positionX=t(this,d,f.positionX,ee,oe),this._positionY=t(this,d,f.positionY,ee,oe),this._positionZ=t(this,d,f.positionZ,ee,oe),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Qy=(e,t,n,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(d,p)=>{let m=null,g=i(d);const y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},C={...y,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},x=Qt(g,p);if("bufferSize"in g)m=s(p,{...y,gain:1});else if(!x){const S={...C,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,S)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new o(6,d.context.length,p.sampleRate),M=t(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});M.connect(V.destination),h=(async()=>{const j=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(G,X)=>{const q=n(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X===0?1:0});return await a(V,G,q.offset),q}));for(let G=0;G<6;G+=1)j[G].connect(M,0,G),j[G].start(0);return l(V)})()}const S=await h,b=s(p,{...y,gain:1});await c(d,p,b);const w=[];for(let V=0;V<S.numberOfChannels;V+=1)w.push(S.getChannelData(V));let E=[w[0][0],w[1][0],w[2][0]],A=[w[3][0],w[4][0],w[5][0]],L=s(p,{...y,gain:1}),R=r(p,{...C,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:A[0],positionY:A[1],positionZ:A[2]});b.connect(L).connect(R.inputs[0]),R.connect(m);for(let V=128;V<S.length;V+=128){const M=[w[0][V],w[1][V],w[2][V]],j=[w[3][V],w[4][V],w[5][V]];if(M.some((G,X)=>G!==E[X])||j.some((G,X)=>G!==A[X])){E=M,A=j;const G=V/p.sampleRate;L.gain.setValueAtTime(0,G),L=s(p,{...y,gain:0}),R=r(p,{...C,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:A[0],positionY:A[1],positionZ:A[2]}),L.gain.setValueAtTime(1,G),b.connect(L).connect(R.inputs[0]),R.connect(m)}}return m}return x?(await e(p,d.orientationX,g.orientationX),await e(p,d.orientationY,g.orientationY),await e(p,d.orientationZ,g.orientationZ),await e(p,d.positionX,g.positionX),await e(p,d.positionY,g.positionY),await e(p,d.positionZ,g.positionZ)):(await a(p,d.orientationX,g.orientationX),await a(p,d.orientationY,g.orientationY),await a(p,d.orientationZ,g.orientationZ),await a(p,d.positionX,g.positionX),await a(p,d.positionY,g.positionY),await a(p,d.positionZ,g.positionZ)),bs(g)?await c(d,p,g.inputs[0]):await c(d,p,g),g};return{render(d,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):f(d,p)}}},tv={disableNormalization:!1},ev=(e,t,n,s)=>class Qu{constructor(i,o){const a=t(i),c=s({...tv,...o}),l=e(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Qu.prototype||n.has(i)}},nv=(e,t)=>(n,s,r)=>(e(s).replay(r),t(s,n,r)),sv=(e,t,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await t(l).render(l,r),d=s.context.destination;!n(l)&&(s!==d||!n(s))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},rv=(e,t,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await e(a).render(a,r);n(a)||u.connect(i,c)}))},iv=(e,t,n,s)=>r=>e(Ys,()=>Ys(r))?Promise.resolve(e(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),ov=e=>(t,n)=>{e.set(t,n)},av=e=>(t,n)=>e.set(t,n),cv=(e,t,n,s,r,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>n(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),sa(u)):t(i,()=>i(u))||a(u),e.add(u),u)),lv={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},uv=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...lv,...c},h=n(l,u),f=i(l),d=f?s():null;super(a,!1,h,d),this._pan=t(this,f,h.pan)}get pan(){return this._pan}},hv=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(c,h)}return i.set(c,l),u?await e(c,a.pan,l.pan):await s(c,a.pan,l.pan),bs(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},fv=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},dv=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new e(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},pv=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),s=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},mv=()=>new DOMException("","UnknownError"),gv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},_v=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...gv,...l},f=n(u,h),p=i(u)?s():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},yv=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Qt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(o,l)}return s.set(o,a),bs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},vv=()=>typeof window>"u"?null:window,bv=(e,t)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},Tv=e=>t=>{t.copyFromChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyFromChannel),t.copyToChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyToChannel)},wv=e=>(t,n)=>{const s=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),e(t,"buffer",r=>()=>{const i=r.call(t);return i===s?null:i},r=>i=>r.call(t,i===null?s:i))},Cv=(e,t)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=n.createBufferSource();t(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},th=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),eh=e=>{if(e===null)return!1;const t=e.length;return t%2!==0?e[Math.floor(t/2)]!==0:e[t/2-1]+e[t/2]!==0},cr=(e,t,n,s)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(i),set:s(o)})},Sv=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Av=e=>({...e,channelCount:e.numberOfOutputs}),xv=e=>{const{imag:t,real:n}=e;return t===void 0?n===void 0?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:n===void 0?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}},nh=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(s){if(s.code!==9)throw s;nh(e,t,n+1e-7)}},kv=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Ev=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},Iv=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},ca=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},sh=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},la=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Ov=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Nv=e=>{e.start=(t=>(n=0,s=0,r)=>{const i=e.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,r)})(e.start)},rh=(e,t)=>{const n=t.createGain();e.connect(n);const s=(r=>()=>{r.call(e,n),e.removeEventListener("ended",s)})(e.disconnect);e.addEventListener("ended",s),Ts(e,n),e.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(e,o),i=!0}})(e.stop)},ws=(e,t)=>n=>{const s={value:e};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Mv=Jm(qn),Dv=rg(qn),Fv=g_(bi),ih=new WeakMap,Rv=F_(ih),Me=zg(new Map,new WeakMap),je=vv(),oh=uy(Me,ze),ua=D_(ne),Zt=sv(ne,ua,Pn),Pv=lg(oh,xt,Zt),Ct=V_(vi),nn=Vy(je),wt=ty(nn),ah=new WeakMap,ch=x_(ws),lr=py(je),ha=Y_(lr),fa=X_(je),lh=J_(je),Xs=gy(je),Dt=Fg(Qm(Pu),sg(Mv,Dv,Zr,Fv,Yr,ne,Rv,nr,xt,qn,Qe,Pn,Vr),Me,G_(xo,Yr,ne,xt,Zs,Qe),ze,Ti,se,f_(Zr,xo,ne,xt,Zs,Ct,Qe,wt),v_(ah,ne,Ne),ch,Ct,ha,fa,lh,wt,Xs),Vv=cg(Dt,Pv,ze,oh,Ct,wt),da=new WeakSet,Jc=hy(je),uh=i_(new Uint32Array(1)),pa=bv(uh,ze),ma=Tv(uh),hh=hg(da,Me,se,Jc,nn,fv(Jc),pa,ma),wi=ig(ue),fh=rv(ua,rr,Pn),He=Qg(fh),Cs=dy(wi,Me,kv,Ev,Iv,ca,sh,la,Nv,wv(cr),rh),Ke=nv(R_(rr),fh),Bv=pg(He,Cs,xt,Ke,Zt),De=Rg(tg(Vu),ah,na,Pg,zm,Hm,Km,Zm,Ym,Co,Fu,lr,nh),Lv=dg(Dt,Bv,De,Gt,Cs,Ct,wt,ws),Uv=Cg(Dt,Sg,ze,Gt,my(ue,cr),Ct,wt,Zt),Wv=Gg(He,Xu,xt,Ke,Zt),jn=av(ih),$v=jg(Dt,De,Wv,Ti,Xu,Ct,wt,jn),xn=cy(qn,fa),qv=Cv(Gt,xn),kn=Cy(lr,qv),jv=Zg(kn,xt,Zt),Gv=Kg(Dt,jv,kn,Ct,wt),zv=Jg(or,xt,Zt),Hv=Xg(Dt,zv,or,Ct,wt,Av),Kv=xy(wi,Cs,ue,xn),Ss=Ay(wi,Me,Kv,ca,la),Zv=r_(He,Ss,xt,Ke,Zt),Yv=s_(Dt,De,Zv,Ss,Ct,wt,ws),dh=ky(se,cr),Xv=c_(dh,xt,Zt),Jv=a_(Dt,Xv,dh,Ct,wt,jn),Qv=m_(He,Ju,xt,Ke,Zt),t0=p_(Dt,De,Qv,Ju,Ct,wt,jn),ph=Ey(se),e0=C_(He,ph,xt,Ke,Zt),n0=w_(Dt,De,e0,ph,se,Ct,wt,jn),s0=N_(He,ue,xt,Ke,Zt),r0=O_(Dt,De,s0,ue,Ct,wt),i0=My(Ti,Gt,ar,se),Ci=iv(Me,ue,ar,pv(ue,nn)),o0=j_(Cs,xt,nn,Zt,Ci),a0=Iy(i0),c0=$_(Dt,a0,o0,Ct,wt,jn),l0=Ag(De,kn,Ss,ar,se,th,wt,cr),mh=new WeakMap,u0=ay(Uv,l0,ch,wt,mh,ws),gh=By(wi,Me,ca,sh,la,rh),h0=Yy(He,gh,xt,Ke,Zt),f0=Zy(Dt,De,gh,h0,Ct,wt,ws),_h=e_(Cs),d0=Gy(_h,Gt,ue,eh,xn),Si=jy(_h,Gt,d0,eh,xn,lr,cr),p0=Uy(Zr,Gt,kn,ue,ar,Si,se,Yr,th,xn),yh=Ly(p0),m0=Qy(He,kn,Ss,ue,yh,xt,nn,Ke,Zt,Ci),g0=Jy(Dt,De,yh,m0,Ct,wt,jn),_0=Wy(ze),y0=ev(_0,Ct,new WeakSet,xv),v0=qy(kn,or,ue,Si,se,xn),vh=$y(v0,se),b0=hv(He,vh,xt,Ke,Zt),T0=uv(Dt,De,vh,b0,Ct,wt),w0=yv(Si,xt,Zt),C0=_v(Dt,Gt,Si,w0,Ct,wt,jn),bh=ey(je),ga=k_(je),Th=new WeakMap,S0=B_(Th,nn),A0=bh?ng(Me,se,A_(je),ga,E_(Xm),Ct,S0,wt,Xs,new WeakMap,new WeakMap,dv(Xs,nn),je):void 0,x0=Q_(ha,wt),k0=h_(da,Me,u_,S_,new WeakSet,Ct,x0,Hr,Ys,pa,ma),wh=$g(A0,Vv,hh,Lv,$v,Gv,Hv,Yv,Jv,k0,t0,n0,r0,c0,u0,f0,g0,y0,T0,C0),E0=ny(Dt,Dy,Ct,wt),I0=ry(Dt,Fy,Ct,wt),O0=iy(Dt,Ry,Ct,wt),N0=Py(Gt,wt),M0=oy(Dt,N0,Ct),D0=wg(wh,Gt,se,mv,E0,I0,O0,M0,lr),_a=L_(mh),F0=og(_a),Ch=t_(ze),R0=__(_a),Sh=b_(ze),Ah=new WeakMap,P0=M_(Ah,Ne),V0=wy(Ch,ze,Gt,kn,or,Ss,ue,ar,se,Sh,ga,P0,xn),B0=yy(Gt,V0,ue,se,xn),L0=Wg(He,Ch,Cs,kn,or,Ss,ue,R0,Sh,ga,xt,Xs,nn,Ke,Zt,Ci),U0=P_(Th),W0=ov(Ah),Qc=bh?Bg(F0,Dt,De,L0,B0,ne,U0,Ct,wt,Xs,Sv,W0,Ov,ws):void 0,$0=l_(se,nn),q0=cv(da,Me,ua,_a,Ci,Hr,pa,ma),j0=Hy(wh,Me,Gt,$0,q0),G0=z_(vi,ha),z0=H_(ea,fa),H0=K_(na,lh),K0=Z_(vi,wt);function pe(e){return e===void 0}function ut(e){return e!==void 0}function Z0(e){return typeof e=="function"}function tn(e){return typeof e=="number"}function _n(e){return Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object}function xh(e){return typeof e=="boolean"}function be(e){return Array.isArray(e)}function Ge(e){return typeof e=="string"}function Ar(e){return Ge(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function lt(e,t){if(!e)throw new Error(t)}function wn(e,t,n=1/0){if(!(t<=e&&e<=n))throw new RangeError(`Value must be within [${t}, ${n}], got: ${e}`)}function kh(e){!e.isOffline&&e.state!=="running"&&ya('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Eh=!1,tl=!1;function el(e){Eh=e}function Y0(e){pe(e)&&Eh&&!tl&&(tl=!0,ya("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Ih=console;function X0(...e){Ih.log(...e)}function ya(...e){Ih.warn(...e)}function J0(e){return new D0(e)}function Q0(e,t,n){return new j0(e,t,n)}const de=typeof self=="object"?self:null,tb=de&&(de.hasOwnProperty("AudioContext")||de.hasOwnProperty("webkitAudioContext"));function eb(e,t,n){return lt(ut(Qc),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(de==null?void 0:de.BaseAudioContext)?de==null?void 0:de.AudioWorkletNode:Qc)(e,t,n)}function Fe(e,t,n,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function Bt(e,t,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(e,t||[])).next())})}class nb{constructor(t,n,s,r){this._callback=t,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(t),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var n;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Vn(e){return H0(e)}function yn(e){return z0(e)}function Br(e){return K0(e)}function Xn(e){return G0(e)}function sb(e){return e instanceof hh}function rb(e,t){return e==="value"||Vn(t)||yn(t)||sb(t)}function os(e,...t){if(!t.length)return e;const n=t.shift();if(_n(e)&&_n(n))for(const s in n)rb(s,n[s])?e[s]=n[s]:_n(n[s])?(e[s]||Object.assign(e,{[s]:{}}),os(e[s],n[s])):Object.assign(e,{[s]:n[s]});return os(e,...t)}function ib(e,t){return e.length===t.length&&e.every((n,s)=>t[s]===n)}function it(e,t,n=[],s){const r={},i=Array.from(t);if(_n(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(e,a))||(os(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&_n(i[0]))os(r,i[0]);else for(let o=0;o<n.length;o++)ut(i[o])&&(r[n[o]]=i[o]);return os(e,r)}function ob(e){return e.constructor.getDefaults()}function $e(e,t){return pe(e)?t:e}function nl(e,t){return t.forEach(n=>{Reflect.has(e,n)&&delete e[n]}),e}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class sn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||de&&this.toString()===de.TONE_DEBUG_CLASS)&&X0(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}sn.version=Du;const va=1e-6;function ps(e,t){return e>t+va}function No(e,t){return ps(e,t)||Se(e,t)}function ti(e,t){return e+va<t}function Se(e,t){return Math.abs(e-t)<va}function ab(e,t,n){return Math.max(Math.min(e,n),t)}class Te extends sn{constructor(){super(),this.name="Timeline",this._timeline=[];const t=it(Te.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(lt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];lt(No(t.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(t){const n=this._timeline.indexOf(t);return n!==-1&&this._timeline.splice(n,1),this}get(t,n="time"){const s=this._search(t,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,n="time"){const s=this._search(t,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<t)return this._timeline[n-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let n=this._search(t);if(n>=0)if(Se(this._timeline[n].time,t)){for(let s=n;s>=0&&Se(this._timeline[s].time,t);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&No(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const n=this._search(t);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(t){const n=this._timeline.indexOf(t);return n>0?this._timeline[n-1]:null}_search(t,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=t)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Se(a[n],t)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Se(u[n],t))o=l;else break}return o}else{if(ti(a[n],t)&&ps(c[n],t))return o;ps(a[n],t)?i=o:s=o+1}}return-1}_iterate(t,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,n){const s=this._search(t);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(t,n){const s=this._search(t);return this._iterate(n,s+1),this}forEachBetween(t,n,s){let r=this._search(t),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(t,n){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(n,s+1),this}forEachAtTime(t,n){const s=this._search(t);if(s!==-1&&Se(this._timeline[s].time,t)){let r=s;for(let i=s;i>=0&&Se(this._timeline[i].time,t);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Oh=[];function Ai(e){Oh.push(e)}function cb(e){Oh.forEach(t=>t(e))}const Nh=[];function xi(e){Nh.push(e)}function lb(e){Nh.forEach(t=>t(e))}class ur extends sn{constructor(){super(...arguments),this.name="Emitter"}on(t,n){return t.split(/\W+/).forEach(r=>{pe(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(t,n){const s=(...r)=>{n(...r),this.off(t,s)};return this.on(t,s),this}off(t,n){return t.split(/\W+/).forEach(r=>{if(pe(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(pe(n))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(t,...n){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(t){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(ur.prototype,n);Object.defineProperty(t.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Mh extends ur{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class hr extends Mh{constructor(){var t,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Te,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=it(hr.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=J0({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new nb(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(cb(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,n,s){return this._context.createBuffer(t,n,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,n){return this._context.createIIRFilter(t,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,n,s){return this._context.createPeriodicWave(t,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return lt(Xn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return lt(Xn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return lt(Xn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){lt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){lt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){lt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){lt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,n){return eb(this.rawContext,t,n)}addAudioWorkletModule(t){return Bt(this,void 0,void 0,function*(){lt(ut(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return Bt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Xn(this._context)?this._context.resume():Promise.resolve()}close(){return Bt(this,void 0,void 0,function*(){Xn(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&lb(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=t;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(t,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(n=>{n.id===t&&this._timeouts.remove(n)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:i+n})};return r(),s}}class ub extends Mh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,n,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,n){return{}}createPanner(){return{}}createPeriodicWave(t,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,n){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return Bt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,n){return 0}clearTimeout(t){return this}setInterval(t,n){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Mt(e,t){be(t)?t.forEach(n=>Mt(e,n)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function Dh(e,t){be(t)?t.forEach(n=>Dh(e,n)):Object.defineProperty(e,t,{writable:!0})}const bt=()=>{};class St extends sn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=bt;const t=it(St.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Ge(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:bt,onload:bt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ke().sampleRate}set(t){return t instanceof St?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Bt(this,void 0,void 0,function*(){const n=St.load(t).then(s=>{this.set(s),this.onload(this)});St.downloads.push(n);try{yield n}finally{const s=St.downloads.indexOf(n);St.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const n=be(t)&&t[0].length>0,s=n?t.length:1,r=n?t[0].length:t.length,i=ke(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[t]:t;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(tn(t))this.fromArray(this.toArray(t));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(t){if(tn(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,n=this.duration){lt(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(n*this.sampleRate);lt(s<r,"The start time must be less than the end time");const i=r-s,o=ke().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new St(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new St().fromArray(t)}static fromUrl(t){return Bt(this,void 0,void 0,function*(){return yield new St().load(t)})}static load(t){return Bt(this,void 0,void 0,function*(){const n=St.baseUrl===""||St.baseUrl.endsWith("/")?St.baseUrl:St.baseUrl+"/",s=yield fetch(n+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const r=yield s.arrayBuffer();return yield ke().decodeAudioData(r)})}static supportsType(t){const n=t.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Bt(this,void 0,void 0,function*(){for(yield Promise.resolve();St.downloads.length;)yield St.downloads[0]})}}St.baseUrl="";St.downloads=[];class ba extends hr{constructor(){super({clockSource:"offline",context:Br(arguments[0])?arguments[0]:Q0(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Br(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Br(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Bt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);t&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return Bt(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const n=yield this._context.startRendering();return new St(n)})}close(){return Promise.resolve()}}const Fh=new ub;let Dn=Fh;function ke(){return Dn===Fh&&tb&&hb(new hr),Dn}function hb(e,t=!1){t&&Dn.dispose(),Xn(e)?Dn=new hr(e):Br(e)?Dn=new ba(e):Dn=e}function Rh(){return Dn.resume()}if(de&&!de.TONE_SILENCE_LOGGING){const t=` * Tone.js v${Du} * `}function fb(e){return Math.pow(10,e/20)}function db(e){return 20*(Math.log(e)/Math.LN10)}function Ph(e){return Math.pow(2,e/12)}let ki=440;function pb(){return ki}function mb(e){ki=e}function Mo(e){return Math.round(Vh(e))}function Vh(e){return 69+12*Math.log2(e/ki)}function gb(e){return ki*Math.pow(2,(e-69)/12)}class Ta extends sn{constructor(t,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,n)=>{const s=parseInt(t,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const n=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,n,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ta&&this.fromType(this._val),pe(this._val))return this._noArg();if(Ge(this._val)&&pe(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(_n(this._val)){let t=0;for(const n in this._val)if(ut(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;t+=r}return t}if(ut(this._units)){const t=this._expressions[this._units],n=this._val.toString().trim().match(t.regexp);return n?t.method.apply(this,n.slice(1)):t.method.call(this,this._val)}else return Ge(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ee extends Ta{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const n=new Ee(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(t,n=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const t=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new Ee(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Ee(this.context,i).toSeconds();Math.abs(o-t)<Math.abs(r-t)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let n=this.valueOf()/t;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Mo(this.toFrequency())}_now(){return this.context.now()}}class ye extends Ee{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return pb()}static set A4(t){mb(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:ye.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,n){const r=_b[t.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:ye.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,n,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new ye(this.context,this.valueOf()*Ph(t))}harmonize(t){return t.map(n=>this.transpose(n))}toMidi(){return Mo(this.valueOf())}toNote(){const t=this.toFrequency(),n=Math.log2(t/ye.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),yb[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return gb(t)}static ftom(t){return Mo(t)}}const _b={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},yb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class as extends Ee{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Xt extends sn{constructor(){super();const t=it(Xt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ke()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return Y0(t),new Ee(this.context,t).toSeconds()}toFrequency(t){return new ye(this.context,t).toFrequency()}toTicks(t){return new as(this.context,t).toTicks()}_getPartialProperties(t){const n=this.get();return Object.keys(n).forEach(s=>{pe(t[s])&&delete n[s]}),n}get(){const t=ob(this);return Object.keys(t).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];ut(s)&&ut(s.value)&&ut(s.setValueAtTime)?t[n]=s.value:s instanceof Xt?t[n]=s._getPartialProperties(t[n]):be(s)||tn(s)||Ge(s)||xh(s)?t[n]=s:delete t[n]}}),t}set(t){return Object.keys(t).forEach(n=>{Reflect.has(this,n)&&ut(this[n])&&(this[n]&&ut(this[n].value)&&ut(this[n].setValueAtTime)?this[n].value!==t[n]&&(this[n].value=t[n]):this[n]instanceof Xt?this[n].set(t[n]):this[n]=t[n])}),this}}class fr extends Te{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const n=this.get(t);return n!==null?n.state:this._initial}setStateAtTime(t,n,s){return wn(n,0),this.add(Object.assign({},s,{state:t,time:n})),this}getLastState(t,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===t)return i}}getNextState(t,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===t)return i}}}class Ot extends Xt{constructor(){const t=it(Ot.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,lt(ut(t.param)&&(Vn(t.param)||t.param instanceof Ot),"param must be an AudioParam");!Vn(t.param);)t.param=t.param._param;this._swappable=ut(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Te(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,ut(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Xt.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return ut(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ut(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,n){return this.units===n}_assertRange(t){return ut(this.maxValue)&&ut(this.minValue)&&wn(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?fb(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?db(t):t}setValueAtTime(t,n){const s=this.toSeconds(n),r=this._fromType(t);return lt(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const n=Math.max(this.toSeconds(t),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let n=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,t),this}linearRampToValueAtTime(t,n){const s=this._fromType(t),r=this.toSeconds(n);return lt(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,n){let s=this._fromType(t);s=Se(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return lt(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(n)),this}linearRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(n)),this}targetRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,n),this}exponentialApproachValueAtTime(t,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(t,n+s),this}setTargetAtTime(t,n,s){const r=this._fromType(t);lt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),lt(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(t,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(t){const n=this.toSeconds(t);return lt(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(t){const n=this.toSeconds(t),s=this._fromType(this.getValueAtTime(n));lt(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&Se(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(t,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,n,s):this.linearRampTo(t,n,s),this}apply(t){const n=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){lt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(t),this._param=t,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,n,s,r,i){return s+(n-s)*Math.exp(-(i-t)/r)}_linearInterpolate(t,n,s,r,i){return n+(r-n)*((i-t)/(s-t))}_exponentialInterpolate(t,n,s,r,i){return n*Math.pow(r/n,(i-t)/(s-t))}}class ht extends Xt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ut(this.input)?Vn(this.input)||this.input instanceof Ot?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ut(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return ut(t)&&(t instanceof ht||yn(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();lt(t.length>0,"ToneAudioNode does not have any internal nodes");const n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))}connect(t,n=0,s=0){return As(this,t,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ya("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,n=0,s=0){return vb(this,t,n,s),this}chain(...t){return Do(this,...t),this}fan(...t){return t.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),ut(this.input)&&(this.input instanceof ht?this.input.dispose():yn(this.input)&&this.input.disconnect()),ut(this.output)&&(this.output instanceof ht?this.output.dispose():yn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Do(...e){const t=e.shift();e.reduce((n,s)=>(n instanceof ht?n.connect(s):yn(n)&&As(n,s),s),t)}function As(e,t,n=0,s=0){for(lt(ut(e),"Cannot connect from undefined node"),lt(ut(t),"Cannot connect to undefined node"),(t instanceof ht||yn(t))&&lt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),lt(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ht||t instanceof Ot;)ut(t.input)&&(t=t.input);for(;e instanceof ht;)ut(e.output)&&(e=e.output);Vn(t)?e.connect(t,n):e.connect(t,n,s)}function vb(e,t,n=0,s=0){if(ut(t))for(;t instanceof ht;)t=t.input;for(;!yn(e);)ut(e.output)&&(e=e.output);Vn(t)?e.disconnect(t,n):yn(t)?e.disconnect(t,n,s):e.disconnect()}class Jt extends ht{constructor(){const t=it(Jt.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ot({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Mt(this,"gain")}static getDefaults(){return Object.assign(ht.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ms extends ht{constructor(t){super(t),this.onended=bt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Jt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(ht.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:bt})}_startGain(t,n=1){lt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,t+s):this._gainNode.gain.exponentialApproachValueAtTime(n,t,s)):this._gainNode.gain.setValueAtTime(n,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){lt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==bt&&(this.onended(this),this.onended=bt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),lt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=bt,this}}class wa extends ms{constructor(){const t=it(wa.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),As(this._source,this._gainNode),this.offset=new Ot({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ms.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ht extends ht{constructor(){const t=it(Ht.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new wa({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ht.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,n=0,s=0){return Ca(this,t,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,n){return this._param.setValueAtTime(t,n),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,n){return this._param.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,n){return this._param.exponentialRampToValueAtTime(t,n),this}exponentialRampTo(t,n,s){return this._param.exponentialRampTo(t,n,s),this}linearRampTo(t,n,s){return this._param.linearRampTo(t,n,s),this}targetRampTo(t,n,s){return this._param.targetRampTo(t,n,s),this}exponentialApproachValueAtTime(t,n,s){return this._param.exponentialApproachValueAtTime(t,n,s),this}setTargetAtTime(t,n,s){return this._param.setTargetAtTime(t,n,s),this}setValueCurveAtTime(t,n,s,r){return this._param.setValueCurveAtTime(t,n,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,n,s){return this._param.rampTo(t,n,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Ca(e,t,n,s){(t instanceof Ot||Vn(t)||t instanceof Ht&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ht&&(t.overridden=!0)),As(e,t,n,s)}class Sa extends Ot{constructor(){const t=it(Sa.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Te(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ot.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(t),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+n,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(t,n){const s=this.toSeconds(n);super.setValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,n){n=this.toSeconds(n);const s=this._fromType(t),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,n,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(t,n){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pe(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const n=this.toSeconds(t),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const n=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(n&&n.ticks===t)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-t)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+n.time}else return n?n.value===0?1/0:n.time+(t-n.ticks)/n.value:t/this._initialValue}ticksToTime(t,n){return this.getDurationOfTicks(t,n)}timeToTicks(t,n){const s=this.toSeconds(n),r=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const n=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Aa extends Ht{constructor(){const t=it(Aa.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new Sa({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ht.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,n){return this._param.ticksToTime(t,n)}timeToTicks(t,n){return this._param.timeToTicks(t,n)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,n){return this._param.getDurationOfTicks(t,n)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class xa extends Xt{constructor(){const t=it(xa.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new fr,this._tickOffset=new Te,this._ticksAtTime=new Te,this._secondsAtTime=new Te,this.frequency=new Aa({context:this.context,units:t.units,value:t.frequency}),Mt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Xt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,n){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ut(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const n=this.toSeconds(t),s=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,n+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const n=this.now(),s=this.frequency.timeToTicks(t,n);this.setTicksAtTime(s,n)}getSecondsAtTime(t){t=this.toSeconds(t);const n=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let i=r||n,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,t+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(t,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,n),ticks:t,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,n,s){let r=this._state.get(t);this._state.forEachBetween(t,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Se(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ei extends Xt{constructor(){const t=it(Ei.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=bt,this._lastUpdate=0,this._state=new fr("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new xa({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Mt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Xt.getDefaults(),{callback:bt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,n){kh(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(t){const n=this.toSeconds(t);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,n){return this._tickSource.setTicksAtTime(t,n),this}getTimeOfTick(t,n=this.now()){return this._tickSource.getTimeOfTick(t,n)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",t,n),t!==n&&(this._state.forEachBetween(t,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ur.mixin(Ei);class xs extends ht{constructor(){const t=it(xs.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Jt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Mt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(ht.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ka extends ht{constructor(){const t=it(ka.getDefaults(),arguments);super(t),this.name="Destination",this.input=new xs({context:this.context}),this.output=new Jt({context:this.context}),this.volume=this.input.volume,Do(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ht.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Do(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ai(e=>{e.destination=new ka({context:e})});xi(e=>{e.destination.dispose()});class bb extends ht{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ot({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ot({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ot({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ot({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ot({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ot({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ot({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ot({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ot({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ht.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ai(e=>{e.listener=new bb({context:e})});xi(e=>{e.listener.dispose()});class Ea extends sn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=it(Ea.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(n=>{this._loadingCount++;const s=t.urls[n];this.add(n,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:bt,onload:bt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return lt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,n])=>n.loaded)}add(t,n,s=bt,r=bt){return Ge(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new St(this.baseUrl+n,s,r))):this._buffers.set(t.toString(),new St(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Lt extends as{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Tb extends Xt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Te,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,n){return this._events.add({callback:t,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const n=this._events.shift();n&&t-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ai(e=>{e.draw=new Tb({context:e})});xi(e=>{e.draw.dispose()});class wb extends sn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){lt(ut(t.time),"Events must have a time property"),lt(ut(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let n=new Cb(t.time,t.time+t.duration,t);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(t){if(this._root!==null){const n=[];this._root.search(t.time,n);for(const s of n)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,n=>this.remove(n)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,n){t.parent!==null?(t.isLeftChild()?t.parent.left=n:t.parent.right=n,this._rebalance(t.parent)):this._setRoot(n)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const n=t.getBalance();let s,r=null;if(n>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const n=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(t){const n=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(t){const n=t.getBalance();n>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):n<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const n=[];if(this._root.search(t,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(t){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,n){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(t,n){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Cb{constructor(t,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=n,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,n){t>this.max||(this.left!==null&&this.left.search(t,n),this.low<=t&&this.high>t&&n.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,n))}searchAfter(t,n){this.low>=t&&(n.push(this),this.left!==null&&this.left.searchAfter(t,n)),this.right!==null&&this.right.searchAfter(t,n)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Sb extends sn{constructor(t){super(),this.name="TimelineValue",this._timeline=new Te({memory:10}),this._initialValue=t}set(t,n){return this._timeline.add({value:t,time:n}),this}get(t){const n=this._timeline.get(t);return n?n.value:this._initialValue}}class gs extends ht{constructor(){super(it(gs.getDefaults(),arguments,["context"]))}connect(t,n=0,s=0){return Ca(this,t,n,s),this}}class dr extends gs{constructor(){const t=it(dr.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,be(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):Z0(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ht.getDefaults(),{length:1024})}setMap(t,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=t(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const n=["none","2x","4x"].some(s=>s.includes(t));lt(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ia extends gs{constructor(){const t=it(Ia.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new dr({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(gs.getDefaults(),{value:1})}_expFunc(t){return n=>Math.pow(Math.abs(n),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Cn{constructor(t,n){this.id=Cn._eventId++,this._remainderTime=0;const s=Object.assign(Cn.getDefaults(),n);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:bt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Cn._eventId=0;class Oa extends Cn{constructor(t,n){super(t,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Oa.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Cn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return ti(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Lt(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){ti(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Lt(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(t);ps(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ii extends Xt{constructor(){const t=it(Ii.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new Sb(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Te,this._repeatedEvents=new wb,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new Ei({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Mt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Xt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,n){if(this._loop.get(t)&&n>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),n=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new Lt(this.context,this._swingTicks*2/3).toSeconds()*r}el(!0),this._timeline.forEachAtTime(n,s=>s.invoke(t)),el(!1)}schedule(t,n){const s=new Cn(this,{callback:t,time:new as(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,n,s,r=1/0){const i=new Oa(this,{callback:t,duration:new Ee(this.context,r).toTicks(),interval:new Ee(this.context,n).toTicks(),time:new as(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,n){const s=new Cn(this,{callback:t,once:!0,time:new as(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const n=this._scheduledEvents[t.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,n){return this._scheduledEvents[t.id.toString()]={event:t,timeline:n},n.add(t),t.id}cancel(t=0){const n=this.toTicks(t);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,n)=>{n=new Lt(this.context,n).toSeconds(),this.emit("start",t,n)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,n){this.context.resume();let s;return ut(n)&&(s=this.toTicks(n)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){be(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Ee(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Ee(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Lt(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),n=this._clock.getTicksAtTime(t);return new Lt(this.context,n).toBarsBeatsSixteenths()}set position(t){const n=this.toTicks(t);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(t){const n=this.now(),s=this._clock.frequency.timeToTicks(t,n);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(t,n)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=t-s%t;return this._clock.nextTickTime(r,n)}}syncSignal(t,n){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(t.units==="time"){const c=.015625/i,l=new Jt(c),u=new Ia(-1),h=new Jt(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}n||(t.getValueAtTime(s)!==0?n=t.getValueAtTime(s)/i:n=0);const a=new Jt(n);return r.connect(a),a.connect(t._param),o.push(a),this._syncedSignals.push({initial:t.value,nodes:o,signal:t}),t.value=0,this}unsyncSignal(t){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Dh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ur.mixin(Ii);Ai(e=>{e.transport=new Ii({context:e})});xi(e=>{e.transport.dispose()});class me extends ht{constructor(t){super(t),this.input=void 0,this._state=new fr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=bt,this._syncedStop=bt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new xs({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Mt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(ht.getDefaults(),{mute:!1,onstop:bt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,n,s){let r=pe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")lt(ps(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds($e(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else kh(this.context),this._start(r,n,s);return this}stop(t){let n=pe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||ut(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(t,n,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,n)=>{if(ps(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=t=>{const n=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=bt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Oi extends ms{constructor(){const t=it(Oi.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,As(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ot({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new St(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ms.getDefaults(),{url:new St,loop:!1,loopEnd:0,loopStart:0,onload:bt,onerror:bt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,n,s,r=1){lt(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),this.loop?n=$e(n,this.loopStart):n=$e(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;No(o,a)&&(o=(o-c)%l+c),Se(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ti(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ut(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Gn(e,t){return Bt(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,s=new ba(1,n,e.context.sampleRate);return new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Na extends ms{constructor(){const t=it(Na.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],As(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Ot({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Ot({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Mt(this,["frequency","detune"])}static getDefaults(){return Object.assign(ms.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Vt extends me{constructor(){const t=it(Vt.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Ht({context:this.context,units:"frequency",value:t.frequency}),Mt(this,"frequency"),this.detune=new Ht({context:this.context,units:"cents",value:t.detune}),Mt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(me.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const n=this.toSeconds(t),s=new Na({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(t){const n=this.toSeconds(t);this._oscillator&&this._oscillator.stop(n)}_restart(t){const n=this.toSeconds(t);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Vt._periodicWaveCache.find(n=>n.phase===this._phase&&ib(n.partials,this._partials));{const t=Vt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const n=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(ut(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Vt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Vt._periodicWaveCache.length>100&&Vt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){wn(t,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")t===0?this.type=n:this.type=n+t.toString();else{const r=new Float32Array(t);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(t==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),t=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(t){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}u!==0?(i[c]=-u*Math.sin(n*c),o[c]=u*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(t,n,s){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[t,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(t,n,o/i*r),s);return ab(-this._inverseFFT(t,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Vt._periodicWaveCache=[];class Ab extends gs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new dr({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class _s extends Ht{constructor(){const t=it(_s.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Jt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ht.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ni extends me{constructor(){const t=it(Ni.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new Ab({context:this.context}),this._modulationNode=new Jt({context:this.context}),this._carrier=new Vt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Vt({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new _s({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Mt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Mi extends me{constructor(){const t=it(Mi.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Jt({context:this.context,gain:0}),this._carrier=new Vt({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ht({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Vt({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new _s({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new _s({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Mt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pr extends me{constructor(){const t=it(pr.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Jt({context:this.context,gain:0}),this._thresh=new dr({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new Ht({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Vt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Mt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(me.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Di extends me{constructor(){const t=it(Di.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ht({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ht({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Mt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(n=>n.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(n=>n.stop(t))}_restart(t){this._forEach(n=>n.restart(t))}_forEach(t){for(let n=0;n<this._oscillators.length;n++)t(this._oscillators[n],n)}get type(){return this._type}set type(t){this._type=t,this._forEach(n=>n.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const n=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(t){if(wn(t,1),this._oscillators.length!==t){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<t;n++){const s=new Vt({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):bt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(n=>n.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(n=>n.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(n=>n.partialCount=t),this._type=this._oscillators[0].type}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Fi extends me{constructor(){const t=it(Fi.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new _s({context:this.context,value:2}),this._pulse=new pr({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Vt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Mt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(me.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const sl={am:Ni,fat:Di,fm:Mi,oscillator:Vt,pulse:pr,pwm:Fi};class ei extends me{constructor(){const t=it(ei.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Ht({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ht({context:this.context,units:"cents",value:t.detune}),Mt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Vt.getDefaults(),Mi.getDefaults(),Ni.getDefaults(),Di.getDefaults(),pr.getDefaults(),Fi.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const n=sl[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),t==="fm"?this.type="fm"+n:t==="am"?this.type="am"+n:t==="fat"?this.type="fat"+n:t==="oscillator"?this.type=n:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,n){return t instanceof sl[n]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&tn(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&tn(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ge(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Bt(this,arguments,void 0,function*(t=1024){return Gn(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Bh(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){wn(i,e,t),n.set(this,i)}})}}function rn(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){wn(this.toSeconds(i),e,t),n.set(this,i)}})}}class Ri extends me{constructor(){const t=it(Ri.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new St({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(me.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:bt,onerror:bt,playbackRate:1,reverse:!1})}load(t){return Bt(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=bt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,n,s){return super.start(t,n,s),this}_start(t,n,s){this._loop?n=$e(n,this._loopStart):n=$e(n,0);const r=this.toSeconds(n),i=s;s=$e(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,t=this.toSeconds(t);const a=new Oi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&pe(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const n=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(n))}restart(t,n,s){return super.restart(t,n,s),this}_restart(t,n,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,n,s)}seek(t,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&wn(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&wn(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(n=>{n.loop=t}),t)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,n)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Fe([rn(0)],Ri.prototype,"fadeIn",void 0);Fe([rn(0)],Ri.prototype,"fadeOut",void 0);class En extends ht{constructor(){const t=it(En.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Ht({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(ht.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,n){if(Ge(t))return t;{let s;for(s in xr)if(xr[s][n]===t)return s;return t}}_setCurve(t,n,s){if(Ge(s)&&Reflect.has(xr,s)){const r=xr[s];_n(r)?t!=="_decayCurve"&&(this[t]=r[n]):this[t]=r}else if(be(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,n=1){this.log("triggerAttack",t,n),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(n,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,t);else{this._sig.cancelAndHoldAtTime(t);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,t,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=t+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const n=this.getValueAtTime(t);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(lt(be(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,n))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,n=0,s=0){return Ca(this,t,n,s),this}asArray(){return Bt(this,arguments,void 0,function*(t=1024){const n=t/this.context.sampleRate,s=new ba(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Fe([rn(0)],En.prototype,"attack",void 0);Fe([rn(0)],En.prototype,"decay",void 0);Fe([Bh(0,1)],En.prototype,"sustain",void 0);Fe([rn(0)],En.prototype,"release",void 0);const xr=(()=>{let t,n;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],i=6.4;for(t=0;t<127;t++){n=t/127;const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[t]=f/10+n*.83}r[127]=1;const o=[],a=5;for(t=0;t<128;t++)o[t]=Math.ceil(t/127*a)/a;const c=[];for(t=0;t<128;t++)n=t/127,c[t]=.5*(1-Math.cos(Math.PI*n));const l=[];for(t=0;t<128;t++){n=t/127;const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);l[t]=Math.abs(d*(1-n))}function u(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();let ni=class Lh extends ht{constructor(){const t=it(Lh.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new xs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Mt(this,"volume")}static getDefaults(){return Object.assign(ht.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,n){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class ys extends ni{constructor(){const t=it(ys.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ni.getDefaults(),{detune:0,onsilence:bt,portamento:0})}triggerAttack(t,n,s=1){this.log("triggerAttack",t,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const n=this.toSeconds(t);return this._triggerEnvelopeRelease(n),this}setNote(t,n){const s=this.toSeconds(n),r=t instanceof ye?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Fe([rn(0)],ys.prototype,"portamento",void 0);class Ma extends En{constructor(){super(it(Ma.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Jt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class si extends ys{constructor(){const t=it(si.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new ei(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ma(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Mt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ys.getDefaults(),{envelope:Object.assign(nl(En.getDefaults(),Object.keys(ht.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(nl(ei.getDefaults(),[...Object.keys(me.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,n){if(this.envelope.triggerAttack(t,n),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Pi extends si{constructor(){const t=it(Pi.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Mt(this,["oscillator","envelope"])}static getDefaults(){return os(ys.getDefaults(),si.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,n){const s=this.toSeconds(n),r=this.toFrequency(t instanceof ye?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Fe([Bh(0)],Pi.prototype,"octaves",void 0);Fe([rn(0)],Pi.prototype,"pitchDecay",void 0);const Uh=new Set;function Da(e){Uh.add(e)}function Wh(e,t){const n=`registerProcessor("${e}", ${t})`;Uh.add(n)}const xb=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Da(xb);const kb=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Da(kb);const Eb=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Da(Eb);const Ib="feedback-comb-filter",Ob=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Wh(Ib,Ob);class Bn extends ni{constructor(){const t=it(Bn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(lt(Ar(s)||tn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ar(s)){const i=new ye(this.context,s).toMidi();n[i]=t.urls[s]}else tn(r)&&isFinite(r)&&(n[r]=t.urls[r])}),this._buffers=new Ea({urls:n,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ni.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:bt,onerror:bt,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,n,s=1){return this.log("triggerAttack",t,n,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=Vh(new ye(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=Ph(c+a),f=new Oi({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,u.duration/h,s),be(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(t,n){return this.log("triggerRelease",t,n),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new ye(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const n=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(t,i,r),be(n)?(lt(be(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(t,i+this.toSeconds(n)),this}add(t,n,s){if(lt(Ar(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ar(t)){const r=new ye(this.context,t).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(t,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Fe([rn(0)],Bn.prototype,"attack",void 0);Fe([rn(0)],Bn.prototype,"release",void 0);class Qn extends Xt{constructor(){const t=it(Qn.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new fr("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Xt.getDefaults(),{callback:bt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,n=>{let s;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const r=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||tn(this._loop)&&this._loop>1){s=1/0,tn(this._loop)&&(s=this._loop*this._getLoopDuration());const i=this._state.getAfter(r);i!==null&&(s=Math.min(s,i.time-r)),s!==1/0&&(s=new Lt(this.context,s));const o=new Lt(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),o,new Lt(this.context,r),s)}else n.id=this.context.transport.schedule(this._tick.bind(this),new Lt(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const n=this.toTicks(t);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(t){this.cancel(t);const n=this.toTicks(t);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const s=this._state.getBefore(n);let r=n;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(t){t=$e(t,-1/0);const n=this.toTicks(t);return this._state.forEachFrom(n,s=>{this.context.transport.clear(s.id)}),this._state.cancel(n),this}_tick(t){const n=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;xh(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Lt(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Lt(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,n=this._state.get(t);if(n!==null&&n.state==="started"){const s=this._getLoopDuration();return(t-n.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ri extends Qn{constructor(){const t=it(ri.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new fr("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach(n=>{be(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(Qn.getDefaults(),{events:[]})}start(t,n){const s=this.toTicks(t);if(this._state.getValueAtTime(s)!=="started"){n=$e(n,this._loop?this._loopStart:0),this._loop?n=$e(n,this._loopStart):n=$e(n,0);const r=this.toTicks(n);this._state.add({id:-1,offset:r,state:"started",time:s}),this._forEach(i=>{this._startNote(i,s,r)})}return this}_startNote(t,n,s){n-=s,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<s&&(n+=this._getLoopDuration()),t.start(new Lt(this.context,n))):t.startOffset<this._loopStart&&t.startOffset>=s&&(t.loop=!1,t.start(new Lt(this.context,n))):t.startOffset>=s&&t.start(new Lt(this.context,n))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(t){const n=this.toTicks(t);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(s=>{s.stop(t)}),this}at(t,n){const s=new as(this.context,t).toTicks(),r=new Lt(this.context,1).toSeconds(),i=this._events.values();let o=i.next();for(;!o.done;){const a=o.value;if(Math.abs(s-a.startOffset)<r)return ut(n)&&(a.value=n),a;o=i.next()}return ut(n)?(this.add(t,n),this.at(t)):null}add(t,n){t instanceof Object&&Reflect.has(t,"time")&&(n=t,t=n.time);const s=this.toTicks(t);let r;return n instanceof Qn?(r=n,r.callback=this._tick.bind(this)):r=new Qn({callback:this._tick.bind(this),context:this.context,value:n}),r.startOffset=s,r.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(r),this._restartEvent(r),this}_restartEvent(t){this._state.forEach(n=>{n.state==="started"?this._startNote(t,n.time,n.offset):t.stop(new Lt(this.context,n.time))})}remove(t,n){return _n(t)&&t.hasOwnProperty("time")&&(n=t,t=n.time),t=this.toTicks(t),this._events.forEach(s=>{s.startOffset===t&&(pe(n)||ut(n)&&s.value===n)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(n=>n.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(n=>{n instanceof ri?n._forEach(t):t(n)}),this}_setAll(t,n){this._forEach(s=>{s[t]=n})}_tick(t,n){this.mute||this.callback(t,n)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):t.state==="stopped"&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=t,this._testLoopBoundries(n)})}get loopEnd(){return new Lt(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(n=>{n.loopEnd=t,this._testLoopBoundries(n)})}get loopStart(){return new Lt(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class Fa extends ht{constructor(){const t=it(Fa.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ot({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Mt(this,"pan")}static getDefaults(){return Object.assign(ht.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Nb="bit-crusher",Mb=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Wh(Nb,Mb);class Pt extends ht{constructor(){const t=it(Pt.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Jt({context:this.context}),Pt._allSolos.has(this.context)||Pt._allSolos.set(this.context,new Set),Pt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(ht.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Pt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Pt._soloed.has(this.context)||Pt._soloed.set(this.context,new Set),Pt._soloed.get(this.context).add(this)}_removeSolo(){Pt._soloed.has(this.context)&&Pt._soloed.get(this.context).delete(this)}_isSoloed(){return Pt._soloed.has(this.context)&&Pt._soloed.get(this.context).has(this)}_noSolos(){return!Pt._soloed.has(this.context)||Pt._soloed.has(this.context)&&Pt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Pt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Pt._allSolos=new Map;Pt._soloed=new Map;class Ra extends ht{constructor(){const t=it(Ra.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new Fa({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new xs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Mt(this,["pan","volume"])}static getDefaults(){return Object.assign(ht.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ts extends ht{constructor(){const t=it(ts.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new Pt({solo:t.solo,context:this.context}),this._panVol=this.output=new Ra({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Mt(this,["pan","volume"])}static getDefaults(){return Object.assign(ht.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ts.buses.has(t)||ts.buses.set(t,new Jt({context:this.context})),ts.buses.get(t)}send(t,n=0){const s=this._getBus(t),r=new Jt({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ts.buses=new Map;const rl=ke().transport;ke().destination;ke().destination;ke().listener;ke().draw;ke();function Db(){return St.loaded()}document.querySelector("body").addEventListener("click",()=>{Rh()},!1);const Z={C2:"a49.mp3",D2:"a50.mp3",E2:"a51.mp3",F2:"a52.mp3",G2:"a53.mp3",A2:"a54.mp3",B2:"a55.mp3",C3:"a56.mp3",D3:"a57.mp3",E3:"a48.mp3",F3:"a81.mp3",G3:"a87.mp3",A3:"a69.mp3",B3:"a82.mp3",C4:"a84.mp3",D4:"a89.mp3",E4:"a85.mp3",F4:"a73.mp3",G4:"a79.mp3",A4:"a80.mp3",B4:"a65.mp3",C5:"a83.mp3",D5:"a68.mp3",E5:"a70.mp3",F5:"a71.mp3",G5:"a72.mp3",A5:"a74.mp3",B5:"a75.mp3",C6:"a76.mp3",D6:"a90.mp3",E6:"a88.mp3",F6:"a67.mp3",G6:"a86.mp3",A6:"a66.mp3",B6:"a78.mp3",C7:"a77.mp3"},Fb={minify:!1,ext:".[mp3|ogg]",baseUrl:"/ai-music/dist/media/",list:["bass-electric","bassoon","cello","clarinet","contrabass","flute","french-horn","guitar-acoustic","guitar-electric","guitar-nylon","harmonium","harp","organ","piano","saxophone","trombone","trumpet","tuba","violin","xylophone"],onload:null,setExt:function(e){var t;for(t=0;t<=this.list.length-1;t++)for(var n in this[this.list[t]])this[this.list[t]][n]=this[this.list[t]][n].replace(this.ext,e);this.ext=e},load:function(e){var t,n,s;if(e?t=e:t={},t.instruments=t.instruments||this.list,t.baseUrl=t.baseUrl||this.baseUrl,t.onload=t.onload||this.onload,t.ext&&(t.ext!=this.ext&&this.setExt(t.ext),t.ext=this.ext),n={},Array.isArray(t.instruments)){for(s=0;s<=t.instruments.length-1;s++){var r=this[t.instruments[s]];if(this.minify===!0||t.minify===!0){var i=1;Object.keys(r).length>=17&&(i=2),Object.keys(r).length>=33&&(i=4),Object.keys(r).length>=49&&(i=6);var o=Object.keys(r).filter(function(c,l){return l%i!=0});o.forEach(function(c){delete r[c]})}n[t.instruments[s]]=new Bn(r,{baseUrl:t.baseUrl+t.instruments[s]+"/",onload:t.onload})}return n}else{r=this[t.instruments],(this.minify===!0||t.minify===!0)&&(i=1,Object.keys(r).length>=17&&(i=2),Object.keys(r).length>=33&&(i=4),Object.keys(r).length>=49&&(i=6),o=Object.keys(r).filter(function(c,l){return l%i!=0}),o.forEach(function(c){delete r[c]}));var a=new Bn(r,{baseUrl:t.baseUrl+t.instruments+"/",onload:t.onload});return a}},"bass-electric":{"A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]"},bassoon:{A3:"A3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",E3:"E3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]"},cello:{E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]"},clarinet:{D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",D2:"D2.[mp3|ogg]"},contrabass:{C1:"C1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]",D1:"D1.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]",G0:"G0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]",A1:"A1.[mp3|ogg]","A#0":"As0.[mp3|ogg]",B2:"B2.[mp3|ogg]"},flute:{A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]"},"french-horn":{D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",G1:"G1.[mp3|ogg]",A0:"A0.[mp3|ogg]",A2:"A2.[mp3|ogg]",C1:"C1.[mp3|ogg]",C3:"C3.[mp3|ogg]"},"guitar-acoustic":{F3:"F3.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]"},"guitar-electric":{"D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]"},"guitar-nylon":{"F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G3.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]","A#5":"As5.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]"},harmonium:{C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]"},harp:{C5:"C5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]",D6:"D6.[mp3|ogg]",D7:"D7.[mp3|ogg]",E1:"E1.[mp3|ogg]",E3:"E3.[mp3|ogg]",E5:"E5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",F6:"F6.[mp3|ogg]",F7:"F7.[mp3|ogg]",G1:"G1.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]",A6:"A6.[mp3|ogg]",B1:"B1.[mp3|ogg]",B3:"B3.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C3:"C3.[mp3|ogg]"},organ:{C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]"},piano:{A2:Z.A2,A3:Z.A3,A4:Z.A4,A5:Z.A5,A6:Z.A6,"A#3":Z["A#3"],"A#4":Z["A#4"],"A#5":Z["A#5"],"A#6":Z["A#6"],B2:Z.B2,B3:Z.B3,B4:Z.B4,B5:Z.B5,B6:Z.B6,C2:Z.C2,C3:Z.C3,C4:Z.C4,C5:Z.C5,C6:Z.C6,C7:Z.C7,"C#2":Z["C#2"],"C#3":Z["C#3"],"C#4":Z["C#4"],"C#5":Z["C#5"],"C#6":Z["C#6"],D0:Z.D0,D1:Z.D1,D2:Z.D2,D3:Z.D3,D4:Z.D4,D5:Z.D5,D6:Z.D6,"D#2":Z["D#2"],"D#3":Z["D#3"],"D#4":Z["D#4"],"D#5":Z["D#5"],"D#6":Z["D#6"],E2:Z.E2,E3:Z.E3,E4:Z.E4,E5:Z.E5,E6:Z.E6,F2:Z.F2,F3:Z.F3,F4:Z.F4,F5:Z.F5,F6:Z.F6,"F#2":Z["F#2"],"F#3":Z["F#3"],"F#4":Z["F#4"],"F#5":Z["F#5"],"F#6":Z["F#6"],G2:Z.G2,G3:Z.G3,G4:Z.G4,G5:Z.G5,G6:Z.G6,"G#2":Z["G#2"],"G#3":Z["G#3"],"G#4":Z["G#4"],"G#5":Z["G#5"],"G#6":Z["G#6"]},saxophone:{"D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]"},trombone:{"A#2":"As2.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]"},trumpet:{C5:"C5.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",G3:"G3.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#3":"As3.[mp3|ogg]",C3:"C3.[mp3|ogg]"},tuba:{"A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]","A#0":"As0.[mp3|ogg]"},violin:{A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]"},xylophone:{C7:"C7.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]"}},Rb={total:21,tone:4,notes:["C","D","E","F","G","A","B"]},Pb=ge({components:{Tap:$m},data(){return{currentStep:0,currentMusic:1,toPlayingAI:!1,list:Vb(Rb),musicArr:[[["5","1+","2+","3+","2+","1+","1+"],["5","1+","2+","3+","2+","1+","2+","3+","3+"],["5","1+","2+","3+","2+","1+","1+"],["5","1+","2+","3+","2+","1+","2+","5+","3+"]],[["5","5","3","4","5","6","5","4","3","2"],["3","3","1","2","3","4","3","2","1","7-"],["6-","6-","1","6","5","5","1"],["2","3","4","3","2","1","3","3","2"]]],inputArr:[]}},created(){},mounted(){this.synth=Fb.load({instruments:"piano"}).toDestination()},methods:{setAllLightOff(){for(let e=0;e<this.list.length;e++)this.list[e].isActive=!1},setIndexLightToggle(e,t){this.list[e].isActive=t},handleClick(e){},handleCancel(){},handleFinishAI(){this.toPlayingAI=!1,this.$emit("changeStatus","Normal"),this.inputArr=[],this.currentStep=0,this.$emit("changeRightNum",0),this.$emit("changeStep",0),this.currentMusic==0?this.currentMusic=1:this.currentMusic=0},handlePlayAI(e=0){this.toPlayingAI=!1,this.$emit("changeStatus","AI Playing");const t=this.musicArr[this.currentMusic];if(this.currentStep<4){const n=t[this.currentStep],s=this.numberToNote(n);let r=0;const i=o=>{o&&(this.tapDown(o),setTimeout(()=>{this.tapup(o)},200)),r++,r<s.length?setTimeout(()=>{i(s[r])},400):(setTimeout(()=>{for(let a=0;a<this.list.length;a++)if(this.list[a].note==s[0]){this.list[a].isActive=!0;return}},500),this.toPlayingAI=!0,this.$emit("changeStatus","Start play"))};i(s[0])}},handleCheckReplay(e){const n=this.musicArr[this.currentMusic][this.currentStep],s=this.numberToNote(n);if(this.inputArr.push(e),this.inputArr[this.inputArr.length-1]==s[this.inputArr.length-1])this.$emit("changeRightNum",this.inputArr.length);else{this.$emit("changeRightNum",this.inputArr.length);let r=-1,i=-1;for(let o=0;o<this.list.length;o++)this.list[o].note==s[0]&&(i=o),this.list[o].note==s[this.inputArr.length-1]&&(r=o);this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[r].isActive=!0,setTimeout(()=>{this.list[r].isActive=!1,setTimeout(()=>{this.list[i].isActive=!0},1600)},400)},400)},400)},400)},400),this.inputArr=[]}this.inputArr.length===s.length&&(this.toPlayingAI=!1,this.inputArr=[],this.currentStep=this.currentStep+1,this.currentStep<4?(this.$emit("changeStep",this.currentStep),setTimeout(()=>{this.handlePlayAI()},1e3)):this.handleFinishAI())},numberToNote(e){const t=["C4","D4","E4","F4","G4","A4","B4"],n=["C5","D5","E5","F5","G5","A5","B5"],s=["C6","D6","E6","F6","G6","A6","B6"];let r=[];for(let i=0;i<e.length;i++)e[i]===0?r.push(""):Ge(e[i])?e[i][1]=="+"?r.push(s[Number(e[i][0])-1]):e[i][1]=="-"?r.push(t[Number(e[i][0])-1]):r.push(n[Number(e[i][0])-1]):r.push(n[Number(e[i])-1]);return r},play(e){this.synth.triggerAttackRelease(e),this.$emit("play",e)},tapDown(e,t=1){this.play(e),this.tapNote(e,"down");for(let n=0;n<this.list.length;n++)if(this.list[n].note==e){this.list[n].isActive=!0;break}this.toPlayingAI&&this.handleCheckReplay(e)},tapup(e){this.tapNote(e,"up");for(let t=0;t<this.list.length;t++)if(this.list[t].note==e){this.list[t].isActive=!1;return}},tapNote(e,t){const n=this.$refs[`n_${e}`];!n||!n[0]||(t==="down"?n[0].tapdown():n[0].tapup())},release(){this.list.forEach(e=>this.tapNote(e.note,"up"))}}});function Vb(e){const{total:t,tone:n,notes:s}=e,r=s.length;let i=n-1;return[...Array(t)].map((o,a)=>{const c=s[a%r];return c===s[0]&&i++,{note:c+i,index:a,isActive:!1}})}const Bb={class:"keyboard"},Lb={class:"keyboard_wrap"},Ub=["data-tapitem"];function Wb(e,t,n,s,r,i){const o=Tn("Tap");return ve(),We("div",Bb,[_t("ul",Lb,[(ve(!0),We(fe,null,Ql(e.list,a=>(ve(),We("li",{class:Le(["li-item",{active:a.isActive}]),"data-tapitem":a.note,key:a.index},[pt(o,{tid:a.note,onTapdown:e.tapDown,onTapup:e.tapup},null,8,["tid","onTapdown","onTapup"])],10,Ub))),128))])])}const Pa=$n(Pb,[["render",Wb],["__scopeId","data-v-2478341b"]]),$b=ge({props:["current","rightnumber","status","text"],components:{},data(){return{}},computed:{},methods:{}}),qb={class:"screen"};function jb(e,t,n,s,r,i){return ve(),We("div",qb,[_t("div",null,Hi(e.status)+"···",1),_t("div",null,"得分："+Hi(e.text),1),td(_t("div",null,"第"+Hi(e.current+1)+"节 / 总4节",513),[[Jd,e.status!="Normal"]]),_t("div",null,[(ve(!0),We(fe,null,Ql(e.rightnumber,o=>(ve(),We("span",{key:o,class:"right-box"}))),128))])])}const Va=$n($b,[["render",jb]]),Gb=ge({data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4}},components:{Keyboard:Pa,Screen:Va},computed:{},mounted(){},methods:{handleCancel(){this.$refs.keyboard.handleFinishAI()},changeStep(e){this.currentStep=e},changeStatus(e){this.status=e},changeRightNum(e){this.rightNumber=e},handlePlayAI(){this.$refs.keyboard.handlePlayAI()},onDropMidi(e){}}}),zb=e=>(zl("data-v-f55ff7af"),e=e(),Hl(),e),Hb={class:"main"},Kb={class:"main-box"},Zb={class:"menu-box"},Yb=zb(()=>_t("div",{class:"btn-micro"},null,-1));function Xb(e,t,n,s,r,i){const o=Tn("Screen"),a=Tn("Keyboard");return ve(),We("div",Hb,[_t("div",Kb,[_t("div",Zb,[_t("div",{class:"m-btn btn-ai",onMousedown:t[0]||(t[0]=(...c)=>e.handlePlayAI&&e.handlePlayAI(...c))},"Z",32),pt(o,{current:e.currentStep,rightnumber:e.rightNumber,status:e.status},null,8,["current","rightnumber","status"]),_t("div",{class:"m-btn",onClick:t[1]||(t[1]=(...c)=>e.handleCancel&&e.handleCancel(...c))},"Cancel"),Yb]),pt(a,{ref:"keyboard",onChangeStep:e.changeStep,onChangeStatus:e.changeStatus,onChangeRightNum:e.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const Jb=$n(Gb,[["render",Xb],["__scopeId","data-v-f55ff7af"]]);var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}),n}var $h={},Vi={};function tT(e){var t=new re(e),n=t.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var s=eT(n.data),r=[],i=0;!t.eof()&&i<s.numTracks;i++){var o=t.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=nT(o.data);r.push(a)}return{header:s,tracks:r}}function eT(e){var t=new re(e),n=t.readUInt16(),s=t.readUInt16(),r={format:n,numTracks:s},i=t.readUInt16();return i&32768?(r.framesPerSecond=256-(i>>8),r.ticksPerFrame=i&255):r.ticksPerBeat=i,r}function nT(e){for(var t=new re(e),n=[];!t.eof();){var s=i();n.push(s)}return n;var r;function i(){var o={};o.deltaTime=t.readVarInt();var a=t.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=t.readUInt8(),l=t.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",l!==2)throw"Expected length for sequenceNumber event is 2, got "+l;return o.number=t.readUInt16(),o;case 1:return o.type="text",o.text=t.readString(l),o;case 2:return o.type="copyrightNotice",o.text=t.readString(l),o;case 3:return o.type="trackName",o.text=t.readString(l),o;case 4:return o.type="instrumentName",o.text=t.readString(l),o;case 5:return o.type="lyrics",o.text=t.readString(l),o;case 6:return o.type="marker",o.text=t.readString(l),o;case 7:return o.type="cuePoint",o.text=t.readString(l),o;case 32:if(o.type="channelPrefix",l!=1)throw"Expected length for channelPrefix event is 1, got "+l;return o.channel=t.readUInt8(),o;case 33:if(o.type="portPrefix",l!=1)throw"Expected length for portPrefix event is 1, got "+l;return o.port=t.readUInt8(),o;case 47:if(o.type="endOfTrack",l!=0)throw"Expected length for endOfTrack event is 0, got "+l;return o;case 81:if(o.type="setTempo",l!=3)throw"Expected length for setTempo event is 3, got "+l;return o.microsecondsPerBeat=t.readUInt24(),o;case 84:if(o.type="smpteOffset",l!=5)throw"Expected length for smpteOffset event is 5, got "+l;var u=t.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[u&96],o.hour=u&31,o.min=t.readUInt8(),o.sec=t.readUInt8(),o.frame=t.readUInt8(),o.subFrame=t.readUInt8(),o;case 88:if(o.type="timeSignature",l!=2&&l!=4)throw"Expected length for timeSignature event is 4 or 2, got "+l;return o.numerator=t.readUInt8(),o.denominator=1<<t.readUInt8(),l===4?(o.metronome=t.readUInt8(),o.thirtyseconds=t.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",l!=2)throw"Expected length for keySignature event is 2, got "+l;return o.key=t.readInt8(),o.scale=t.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=t.readBytes(l),o;default:return o.type="unknownMeta",o.data=t.readBytes(l),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var l=t.readVarInt();return o.data=t.readBytes(l),o}else if(a==247){o.type="endSysEx";var l=t.readVarInt();return o.data=t.readBytes(l),o}else throw"Unrecognised MIDI event type byte: "+a;else{var f;if(a&128)f=t.readUInt8(),r=a;else{if(r===null)throw"Running status byte encountered before status byte";f=a,a=r,o.running=!0}var d=a>>4;switch(o.channel=a&15,d){case 8:return o.type="noteOff",o.noteNumber=f,o.velocity=t.readUInt8(),o;case 9:var p=t.readUInt8();return o.type=p===0?"noteOff":"noteOn",o.noteNumber=f,o.velocity=p,p===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=f,o.amount=t.readUInt8(),o;case 11:return o.type="controller",o.controllerType=f,o.value=t.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=f,o;case 13:return o.type="channelAftertouch",o.amount=f,o;case 14:return o.type="pitchBend",o.value=f+(t.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+d}}}}function re(e){this.buffer=e,this.bufferLen=this.buffer.length,this.pos=0}re.prototype.eof=function(){return this.pos>=this.bufferLen};re.prototype.readUInt8=function(){var e=this.buffer[this.pos];return this.pos+=1,e};re.prototype.readInt8=function(){var e=this.readUInt8();return e&128?e-256:e};re.prototype.readUInt16=function(){var e=this.readUInt8(),t=this.readUInt8();return(e<<8)+t};re.prototype.readInt16=function(){var e=this.readUInt16();return e&32768?e-65536:e};re.prototype.readUInt24=function(){var e=this.readUInt8(),t=this.readUInt8(),n=this.readUInt8();return(e<<16)+(t<<8)+n};re.prototype.readInt24=function(){var e=this.readUInt24();return e&8388608?e-16777216:e};re.prototype.readUInt32=function(){var e=this.readUInt8(),t=this.readUInt8(),n=this.readUInt8(),s=this.readUInt8();return(e<<24)+(t<<16)+(n<<8)+s};re.prototype.readBytes=function(e){var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t};re.prototype.readString=function(e){var t=this.readBytes(e);return String.fromCharCode.apply(null,t)};re.prototype.readVarInt=function(){for(var e=0;!this.eof();){var t=this.readUInt8();if(t&128)e+=t&127,e<<=7;else return e+t}return e};re.prototype.readChunk=function(){var e=this.readString(4),t=this.readUInt32(),n=this.readBytes(t);return{id:e,length:t,data:n}};var sT=tT;function rT(e,t){if(typeof e!="object")throw"Invalid MIDI data";t=t||{};var n=e.header||{},s=e.tracks||[],r,i=s.length,o=new qt;for(iT(o,n,i),r=0;r<i;r++)oT(o,s[r],t);return o.buffer}function iT(e,t,n){var s=t.format==null?1:t.format,r=128;t.timeDivision?r=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?r=-(t.framesPerSecond&255)<<8|t.ticksPerFrame&255:t.ticksPerBeat&&(r=t.ticksPerBeat&32767);var i=new qt;i.writeUInt16(s),i.writeUInt16(n),i.writeUInt16(r),e.writeChunk("MThd",i.buffer)}function oT(e,t,n){var s=new qt,r,i=t.length,o=null;for(r=0;r<i;r++)(n.running===!1||!n.running&&!t[r].running)&&(o=null),o=aT(s,t[r],o,n.useByte9ForNoteOff);e.writeChunk("MTrk",s.buffer)}function aT(e,t,n,s){var r=t.type,i=t.deltaTime,o=t.text||"",a=t.data||[],c=null;switch(e.writeVarInt(i),r){case"sequenceNumber":e.writeUInt8(255),e.writeUInt8(0),e.writeVarInt(2),e.writeUInt16(t.number);break;case"text":e.writeUInt8(255),e.writeUInt8(1),e.writeVarInt(o.length),e.writeString(o);break;case"copyrightNotice":e.writeUInt8(255),e.writeUInt8(2),e.writeVarInt(o.length),e.writeString(o);break;case"trackName":e.writeUInt8(255),e.writeUInt8(3),e.writeVarInt(o.length),e.writeString(o);break;case"instrumentName":e.writeUInt8(255),e.writeUInt8(4),e.writeVarInt(o.length),e.writeString(o);break;case"lyrics":e.writeUInt8(255),e.writeUInt8(5),e.writeVarInt(o.length),e.writeString(o);break;case"marker":e.writeUInt8(255),e.writeUInt8(6),e.writeVarInt(o.length),e.writeString(o);break;case"cuePoint":e.writeUInt8(255),e.writeUInt8(7),e.writeVarInt(o.length),e.writeString(o);break;case"channelPrefix":e.writeUInt8(255),e.writeUInt8(32),e.writeVarInt(1),e.writeUInt8(t.channel);break;case"portPrefix":e.writeUInt8(255),e.writeUInt8(33),e.writeVarInt(1),e.writeUInt8(t.port);break;case"endOfTrack":e.writeUInt8(255),e.writeUInt8(47),e.writeVarInt(0);break;case"setTempo":e.writeUInt8(255),e.writeUInt8(81),e.writeVarInt(3),e.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":e.writeUInt8(255),e.writeUInt8(84),e.writeVarInt(5);var l={24:0,25:32,29:64,30:96},u=t.hour&31|l[t.frameRate];e.writeUInt8(u),e.writeUInt8(t.min),e.writeUInt8(t.sec),e.writeUInt8(t.frame),e.writeUInt8(t.subFrame);break;case"timeSignature":e.writeUInt8(255),e.writeUInt8(88),e.writeVarInt(4),e.writeUInt8(t.numerator);var h=Math.floor(Math.log(t.denominator)/Math.LN2)&255;e.writeUInt8(h),e.writeUInt8(t.metronome),e.writeUInt8(t.thirtyseconds||8);break;case"keySignature":e.writeUInt8(255),e.writeUInt8(89),e.writeVarInt(2),e.writeInt8(t.key),e.writeUInt8(t.scale);break;case"sequencerSpecific":e.writeUInt8(255),e.writeUInt8(127),e.writeVarInt(a.length),e.writeBytes(a);break;case"unknownMeta":t.metatypeByte!=null&&(e.writeUInt8(255),e.writeUInt8(t.metatypeByte),e.writeVarInt(a.length),e.writeBytes(a));break;case"sysEx":e.writeUInt8(240),e.writeVarInt(a.length),e.writeBytes(a);break;case"endSysEx":e.writeUInt8(247),e.writeVarInt(a.length),e.writeBytes(a);break;case"noteOff":var f=s!==!1&&t.byte9||s&&t.velocity==0?144:128;c=f|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteOn":c=144|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteAftertouch":c=160|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.amount);break;case"controller":c=176|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.controllerType),e.writeUInt8(t.value);break;case"programChange":c=192|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.programNumber);break;case"channelAftertouch":c=208|t.channel,c!==n&&e.writeUInt8(c),e.writeUInt8(t.amount);break;case"pitchBend":c=224|t.channel,c!==n&&e.writeUInt8(c);var d=8192+t.value,p=d&127,m=d>>7&127;e.writeUInt8(p),e.writeUInt8(m);break;default:throw"Unrecognized event type: "+r}return c}function qt(){this.buffer=[]}qt.prototype.writeUInt8=function(e){this.buffer.push(e&255)};qt.prototype.writeInt8=qt.prototype.writeUInt8;qt.prototype.writeUInt16=function(e){var t=e>>8&255,n=e&255;this.writeUInt8(t),this.writeUInt8(n)};qt.prototype.writeInt16=qt.prototype.writeUInt16;qt.prototype.writeUInt24=function(e){var t=e>>16&255,n=e>>8&255,s=e&255;this.writeUInt8(t),this.writeUInt8(n),this.writeUInt8(s)};qt.prototype.writeInt24=qt.prototype.writeUInt24;qt.prototype.writeUInt32=function(e){var t=e>>24&255,n=e>>16&255,s=e>>8&255,r=e&255;this.writeUInt8(t),this.writeUInt8(n),this.writeUInt8(s),this.writeUInt8(r)};qt.prototype.writeInt32=qt.prototype.writeUInt32;qt.prototype.writeBytes=function(e){this.buffer=this.buffer.concat(Array.prototype.slice.call(e,0))};qt.prototype.writeString=function(e){var t,n=e.length,s=[];for(t=0;t<n;t++)s.push(e.codePointAt(t));this.writeBytes(s)};qt.prototype.writeVarInt=function(e){if(e<0)throw"Cannot write negative variable-length integer";if(e<=127)this.writeUInt8(e);else{var t=e,n=[];for(n.push(t&127),t>>=7;t;){var s=t&127|128;n.push(s),t>>=7}this.writeBytes(n.reverse())}};qt.prototype.writeChunk=function(e,t){this.writeString(e),this.writeUInt32(t.length),this.writeBytes(t)};var cT=rT;Vi.parseMidi=sT;Vi.writeMidi=cT;var ii={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.insert=Ln.search=void 0;function qh(e,t,n){n===void 0&&(n="ticks");var s=0,r=e.length,i=r;if(r>0&&e[r-1][n]<=t)return r-1;for(;s<i;){var o=Math.floor(s+(i-s)/2),a=e[o],c=e[o+1];if(a[n]===t){for(var l=o;l<e.length;l++){var u=e[l];u[n]===t&&(o=l)}return o}else{if(a[n]<t&&c[n]>t)return o;a[n]>t?i=o:a[n]<t&&(s=o+1)}}return-1}Ln.search=qh;function lT(e,t,n){if(n===void 0&&(n="ticks"),e.length){var s=qh(e,t[n],n);e.splice(s+1,0,t)}else e.push(t)}Ln.insert=lT;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var t=Ln,n=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function r(i){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),i){n.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:e.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;i.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return r.prototype.update=function(){var i=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var u=l>0?i.tempos[l-1].bpm:i.tempos[0].bpm,h=c.ticks/i.ppq-a,f=60/u*h;c.time=f+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var u=l>0?i.timeSignatures[l-1]:i.timeSignatures[0],h=(c.ticks-u.ticks)/i.ppq,f=h/u.timeSignature[0]/(u.timeSignature[1]/4);u.measures=u.measures||0,c.measures=f+u.measures})},r.prototype.ticksToSeconds=function(i){var o=(0,t.search)(this.tempos,i);if(o!==-1){var a=this.tempos[o],c=a.time,l=(i-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var u=i/this.ppq;return 60/120*u}},r.prototype.ticksToMeasures=function(i){var o=(0,t.search)(this.timeSignatures,i);if(o!==-1){var a=this.timeSignatures[o],c=(i-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(r.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),r.prototype.secondsToTicks=function(i){var o=(0,t.search)(this.tempos,i,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=i-c,u=l/(60/a.bpm);return Math.round(a.ticks+u*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},r.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},r.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=i.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=i.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=i.meta.map(function(o){return Object.assign({},o)}),n.set(this,i.ppq),this.update()},r.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},r}();e.Header=s})(ii);var Js={},Ba={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(r,i){return r[e.controlChangeNames[i]]=i,r},{});var t=new WeakMap,n=new WeakMap,s=function(){function r(i,o){t.set(this,o),n.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(r.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){var i=t.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var o=t.get(this);this.ticks=o.secondsToTicks(i)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},r}();e.ControlChange=s})(Ba);var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.createControlChanges=void 0;var kr=Ba;function uT(){return new Proxy({},{get:function(e,t){if(e[t])return e[t];if(kr.controlChangeIds.hasOwnProperty(t))return e[kr.controlChangeIds[t]]},set:function(e,t,n){return kr.controlChangeIds.hasOwnProperty(t)?e[kr.controlChangeIds[t]]=n:e[t]=n,!0}})}Bi.createControlChanges=uT;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.PitchBend=void 0;var io=new WeakMap,hT=function(){function e(t,n){io.set(this,n),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(e.prototype,"time",{get:function(){var t=io.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var n=io.get(this);this.ticks=n.secondsToTicks(t)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},e}();Li.PitchBend=hT;var Ui={},vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.DrumKitByPatchID=vn.InstrumentFamilyByID=vn.instrumentByPatchID=void 0;vn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];vn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];vn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.Instrument=void 0;var Er=vn,il=new WeakMap,fT=function(){function e(t,n){if(this.number=0,il.set(this,n),this.number=0,t){var s=t.find(function(r){return r.type==="programChange"});s&&(this.number=s.programNumber)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.percussion?Er.DrumKitByPatchID[this.number]:Er.instrumentByPatchID[this.number]},set:function(t){var n=Er.instrumentByPatchID.indexOf(t);n!==-1&&(this.number=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"family",{get:function(){return this.percussion?"drums":Er.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"percussion",{get:function(){var t=il.get(this);return t.channel===9},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},e.prototype.fromJSON=function(t){this.number=t.number},e}();Ui.Instrument=fT;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Note=void 0;function dT(e){var t=Math.floor(e/12)-1;return jh(e)+t.toString()}function jh(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=e%12;return t[n]}function pT(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.indexOf(e)}var mT=function(){var e=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var s=e.exec(n),r=s[1],i=s[2],o=t[r.toLowerCase()];return o+(parseInt(i,10)+1)*12}}(),Hn=new WeakMap,gT=function(){function e(t,n,s){Hn.set(this,s),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=n.velocity,this.ticks=t.ticks,this.durationTicks=n.ticks-t.ticks}return Object.defineProperty(e.prototype,"name",{get:function(){return dT(this.midi)},set:function(t){this.midi=mT(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var n=t-this.octave;this.midi+=n*12},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pitch",{get:function(){return jh(this.midi)},set:function(t){this.midi=12*(this.octave+1)+pT(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var t=Hn.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var n=Hn.get(this),s=n.secondsToTicks(this.time+t);this.durationTicks=s-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){var t=Hn.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var n=Hn.get(this);this.ticks=n.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bars",{get:function(){var t=Hn.get(this);return t.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},e}();Wi.Note=gT;Object.defineProperty(Js,"__esModule",{value:!0});Js.Track=void 0;var oo=Ln,_T=Ba,yT=Bi,vT=Li,ol=Ui,bT=Wi,Ir=new WeakMap,TT=function(){function e(t,n){var s=this;if(this.name="",this.notes=[],this.controlChanges=(0,yT.createControlChanges)(),this.pitchBends=[],Ir.set(this,n),t){var r=t.find(function(f){return f.type==="trackName"});this.name=r?r.text:""}if(this.instrument=new ol.Instrument(t,this),this.channel=0,t){for(var i=t.filter(function(f){return f.type==="noteOn"}),o=t.filter(function(f){return f.type==="noteOff"}),a=function(){var f=i.shift();c.channel=f.channel;var d=o.findIndex(function(m){return m.noteNumber===f.noteNumber&&m.absoluteTime>=f.absoluteTime});if(d!==-1){var p=o.splice(d,1)[0];c.addNote({durationTicks:p.absoluteTime-f.absoluteTime,midi:f.noteNumber,noteOffVelocity:p.velocity/127,ticks:f.absoluteTime,velocity:f.velocity/127})}},c=this;i.length;)a();var l=t.filter(function(f){return f.type==="controller"});l.forEach(function(f){s.addCC({number:f.controllerType,ticks:f.absoluteTime,value:f.value/127})});var u=t.filter(function(f){return f.type==="pitchBend"});u.forEach(function(f){s.addPitchBend({ticks:f.absoluteTime,value:f.value/Math.pow(2,13)})});var h=t.find(function(f){return f.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return e.prototype.addNote=function(t){var n=Ir.get(this),s=new bT.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(s,t),(0,oo.insert)(this.notes,s,"ticks"),this},e.prototype.addCC=function(t){var n=Ir.get(this),s=new _T.ControlChange({controllerType:t.number},n);return delete t.number,Object.assign(s,t),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),(0,oo.insert)(this.controlChanges[s.number],s,"ticks"),this},e.prototype.addPitchBend=function(t){var n=Ir.get(this),s=new vT.PitchBend({},n);return Object.assign(s,t),(0,oo.insert)(this.pitchBends,s,"ticks"),this},Object.defineProperty(e.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;n<this.notes.length-1;n++){var s=this.notes[n].time+this.notes[n].duration;t<s&&(t=s)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;n<this.notes.length-1;n++){var s=this.notes[n].ticks+this.notes[n].durationTicks;t<s&&(t=s)}return t},enumerable:!1,configurable:!0}),e.prototype.fromJSON=function(t){var n=this;this.name=t.name,this.channel=t.channel,this.instrument=new ol.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),t.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=t.endOfTrackTicks);for(var s in t.controlChanges)t.controlChanges[s]&&t.controlChanges[s].forEach(function(r){n.addCC({number:r.number,ticks:r.ticks,value:r.value})});t.notes.forEach(function(r){n.addNote({durationTicks:r.durationTicks,midi:r.midi,ticks:r.ticks,velocity:r.velocity})})},e.prototype.toJSON=function(){for(var t={},n=0;n<127;n++)this.controlChanges.hasOwnProperty(n)&&(t[n]=this.controlChanges[n].map(function(r){return r.toJSON()}));var s={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(r){return r.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(r){return r.toJSON()})};return this.endOfTrackTicks!==void 0&&(s.endOfTrackTicks=this.endOfTrackTicks),s},e}();Js.Track=TT;var $i={};function wT(e){var t=[];return Gh(e,t),t}function Gh(e,t){for(var n=0;n<e.length;n++){var s=e[n];Array.isArray(s)?Gh(s,t):t.push(s)}}const CT=Object.freeze(Object.defineProperty({__proto__:null,flatten:wT},Symbol.toStringTag,{value:"Module"})),ST=Qb(CT);var ln=es&&es.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty($i,"__esModule",{value:!0});$i.encode=void 0;var AT=Vi,xT=ii,kT=ST;function ET(e,t){return[{absoluteTime:e.ticks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(e.velocity*127)},{absoluteTime:e.ticks+e.durationTicks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(e.noteOffVelocity*127)}]}function IT(e){return(0,kT.flatten)(e.notes.map(function(t){return ET(t,e.channel)}))}function OT(e,t){return{absoluteTime:e.ticks,channel:t,controllerType:e.number,deltaTime:0,type:"controller",value:Math.floor(e.value*127)}}function NT(e){for(var t=[],n=0;n<127;n++)e.controlChanges.hasOwnProperty(n)&&e.controlChanges[n].forEach(function(s){t.push(OT(s,e.channel))});return t}function MT(e,t){return{absoluteTime:e.ticks,channel:t,deltaTime:0,type:"pitchBend",value:e.value}}function DT(e){var t=[];return e.pitchBends.forEach(function(n){t.push(MT(n,e.channel))}),t}function FT(e){return{absoluteTime:0,channel:e.channel,deltaTime:0,programNumber:e.instrument.number,type:"programChange"}}function RT(e){return{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}}function PT(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/e.bpm),type:"setTempo"}}function VT(e){return{absoluteTime:e.ticks,deltaTime:0,denominator:e.timeSignature[1],meta:!0,metronome:24,numerator:e.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function BT(e){var t=xT.keySignatureKeys.indexOf(e.key);return{absoluteTime:e.ticks,deltaTime:0,key:t+7,meta:!0,scale:e.scale==="major"?0:1,type:"keySignature"}}function LT(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,text:e.text,type:e.type}}function UT(e){var t={header:{format:1,numTracks:e.tracks.length+1,ticksPerBeat:e.header.ppq},tracks:ln([ln(ln(ln(ln([{absoluteTime:0,deltaTime:0,meta:!0,text:e.header.name,type:"trackName"}],e.header.keySignatures.map(function(n){return BT(n)}),!0),e.header.meta.map(function(n){return LT(n)}),!0),e.header.tempos.map(function(n){return PT(n)}),!0),e.header.timeSignatures.map(function(n){return VT(n)}),!0)],e.tracks.map(function(n){return ln(ln(ln([RT(n.name),FT(n)],IT(n),!0),NT(n),!0),DT(n),!0)}),!0)};return t.tracks=t.tracks.map(function(n){n=n.sort(function(r,i){return r.absoluteTime-i.absoluteTime});var s=0;return n.forEach(function(r){r.deltaTime=r.absoluteTime-s,s=r.absoluteTime,delete r.absoluteTime}),n.push({deltaTime:0,meta:!0,type:"endOfTrack"}),n}),new Uint8Array((0,AT.writeMidi)(t))}$i.encode=UT;(function(e){var t=es&&es.__awaiter||function(h,f,d,p){function m(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function C(b){try{S(p.next(b))}catch(w){y(w)}}function x(b){try{S(p.throw(b))}catch(w){y(w)}}function S(b){b.done?g(b.value):m(b.value).then(C,x)}S((p=p.apply(h,f||[])).next())})},n=es&&es.__generator||function(h,f){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(S){return function(b){return x([S,b])}}function x(S){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,m&&(g=S[0]&2?m.return:S[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,S[1])).done)return g;switch(m=0,g&&(S=[S[0]&2,g.value]),S[0]){case 0:case 1:g=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,m=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(S[0]===6||S[0]===2)){d=0;continue}if(S[0]===3&&(!g||S[1]>g[0]&&S[1]<g[3])){d.label=S[1];break}if(S[0]===6&&d.label<g[1]){d.label=g[1],g=S;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(S);break}g[2]&&d.ops.pop(),d.trys.pop();continue}S=f.call(h,d)}catch(b){S=[6,b],m=0}finally{p=g=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=Vi,r=ii,i=Js,o=$i,a=function(){function h(f){var d=this,p=null;if(f){var m=f instanceof ArrayBuffer?new Uint8Array(f):f;p=(0,s.parseMidi)(m),p.tracks.forEach(function(g){var y=0;g.forEach(function(C){y+=C.deltaTime,C.absoluteTime=y})}),p.tracks=u(p.tracks)}this.header=new r.Header(p),this.tracks=[],f&&(this.tracks=p.tracks.map(function(g){return new i.Track(g,d.header)}),p.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(f){return t(this,void 0,void 0,function(){var d,p;return n(this,function(m){switch(m.label){case 0:return[4,fetch(f)];case 1:return d=m.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return p=m.sent(),[2,new h(p)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},h.prototype.fromJSON=function(f){var d=this;this.header=new r.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(p){var m=new i.Track(void 0,d.header);return m.fromJSON(p),m})},h.prototype.clone=function(){var f=new h;return f.fromJSON(this.toJSON()),f},h}();e.Midi=a;var c=Js;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return c.Track}});var l=ii;Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return l.Header}});function u(h){for(var f=[],d=0;d<h.length;d++)for(var p=f.length,m=new Map,g=Array(16).fill(0),y=0,C=h[d];y<C.length;y++){var x=C[y],S=p,b=x.channel;if(b!==void 0){x.type==="programChange"&&(g[b]=x.programNumber);var w=g[b],E="".concat(w," ").concat(b);m.has(E)?S=m.get(E):(S=p+m.size,m.set(E,S))}f[S]||f.push([]),f[S].push(x)}return f}})($h);let Or;const WT=ge({name:"Music",data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4,loopTimer:null,currentTime:0,hasInit:!1,track1Notes:[],track2Notes:[],track3Notes:[],track1:[],track2:[],track3:[],trackLoopIndex1:0,trackLoopIndex2:0,trackLoopIndex3:0,isActive1:!1,isActive2:!1,isActive3:!1,timer1:null,timer2:null,timer3:null}},components:{Keyboard:Pa,Screen:Va},computed:{},mounted(){this.initKeyNote()},methods:{async initKeyNote(){const e={};Or=await $h.Midi.fromUrl("/ai-music/dist/1.mid"),Or.tracks.forEach((i,o)=>{i.notes.forEach(a=>{e[a.name]=1})});const t=Object.keys(e);t.sort(()=>Math.random()-.5);const n=t.slice(0,Math.floor(t.length/3)),s=t.slice(Math.floor(t.length/3),Math.floor(t.length/3)*2),r=t.slice(Math.floor(t.length/3)*2);Or.tracks.forEach((i,o)=>{i.notes.forEach(a=>{n.indexOf(a.name)>=0?this.track1.push({name:a.name,time:a.time}):s.indexOf(a.name)>=0?this.track2.push({name:a.name,time:a.time}):r.indexOf(a.name)>=0&&this.track3.push({name:a.name,time:a.time})})}),this.hasInit=!0,this.track1Notes=n,this.track2Notes=s,this.track3Notes=r},initTrackNotes(){},setTrack1Index(e){const t=[0,1,2,3,4,5,6];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},setTrack2Index(e){const t=[7,8,9,10,11,12,13];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},setTrack3Index(e){const t=[14,15,16,17,18,19,20];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},async handleStart(){const e=this.track1Notes,t=this.track2Notes,n=this.track3Notes;await Rh();const s=new Bn({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"/ai-music/dist/salamander/",onload:()=>{Db().then(()=>{this.handleLoop(),new ri((i,o)=>{s.triggerAttackRelease(o.name,o.duration,i),e.indexOf(o.name)>=0?(this.trackLoopIndex1++,clearTimeout(this.timer1),this.isActive1=!0,this.timer1=setTimeout(()=>{this.isActive1=!1},100)):t.indexOf(o.name)>=0?(this.trackLoopIndex2++,clearTimeout(this.timer2),this.isActive2=!0,this.timer2=setTimeout(()=>{this.isActive2=!1},100)):n.indexOf(o.name)>=0&&(this.trackLoopIndex3++,clearTimeout(this.timer3),this.isActive3=!0,this.timer3=setTimeout(()=>{this.isActive3=!1},100))},Or.tracks.flatMap(i=>i.notes.map(o=>({time:o.time,name:o.name,duration:o.duration})))).start(0)}),rl.start()}}).toDestination()},handleLoop(){const e=this.track1,t=this.track2,n=this.track3,s=rl.seconds;if(this.currentTime=s,s>1){this.$refs.keyboard.setAllLightOff();for(let r=this.trackLoopIndex1;r<e.length;r++){const i=e[r].time;if(i>=s&&i<=s+2.4){const o=Math.floor((i-s)*10/4)+1;o>=1&&o<=6&&this.setTrack1Index(o)}else if(i>s+2.4)break}for(let r=this.trackLoopIndex2;r<t.length;r++){const i=t[r].time;if(i>=s&&i<=s+2.4){const o=Math.floor((i-s)*10/4)+1;o>=1&&o<=6&&this.setTrack2Index(o)}else if(i>s+2.4)break}for(let r=this.trackLoopIndex3;r<n.length;r++){const i=n[r].time;if(i>=s&&i<=s+2.4){const o=Math.floor((i-s)*10/4)+1;o>=1&&o<=6&&this.setTrack3Index(o)}else if(i>s+2.4)break}}this.loopTimer=setTimeout(()=>{this.handleLoop()},30)},closeLoop(){clearTimeout(this.loopTimer),location.reload()},handleCancel(){this.closeLoop(),this.$refs.keyboard.handleFinishAI()},changeStep(e){this.currentStep=e},changeStatus(e){this.status=e},changeRightNum(e){this.rightNumber=e},handlePlayAI(){this.$refs.keyboard.handlePlayAI()}}}),$T={class:"main"},qT={class:"main-box"},jT={class:"menu-box"},GT={class:"test-block-box"};function zT(e,t,n,s,r,i){const o=Tn("Screen"),a=Tn("Keyboard");return ve(),We("div",$T,[_t("div",qT,[_t("div",jT,[_t("div",{class:"m-btn btn-ai",onMousedown:t[0]||(t[0]=(...c)=>e.handlePlayAI&&e.handlePlayAI(...c))},"Z",32),pt(o,{current:e.currentStep,rightnumber:e.rightNumber,status:e.status},null,8,["current","rightnumber","status"]),_t("div",{class:"m-btn",onClick:t[1]||(t[1]=(...c)=>e.handleCancel&&e.handleCancel(...c))},"Cancel"),_t("div",{class:"btn-micro",onClick:t[2]||(t[2]=(...c)=>e.handleStart&&e.handleStart(...c))})]),_t("div",GT,[_t("div",{class:Le(["block",{active:e.isActive1}])},null,2),_t("div",{class:Le(["block",{active:e.isActive2}])},null,2),_t("div",{class:Le(["block",{active:e.isActive3}])},null,2)]),pt(a,{ref:"keyboard",onChangeStep:e.changeStep,onChangeStatus:e.changeStatus,onChangeRightNum:e.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const HT=$n(WT,[["render",zT],["__scopeId","data-v-66423241"]]),KT=ge({name:"Music",data(){return{message:"Hello!",stageSize:"",status:"Normal",currentStep:0,rightNumber:0,totalStep:4,musicPlayer:null,data:{},bpm:100,beats:[],loopTime:100,beatTime:0,countDivideBeatFactor:3,delayTime:1200,lastUpdateTime:0,currentBeat:0,count:0,loopCurrentIndex:0,timer:null,isActive1:!1,isActive2:!1,isActive3:!1,isWell1:!1,isWell2:!1,isWell3:!1,isWrong1:!1,isWrong2:!1,isWrong3:!1,isActive1Time:0,isActive2Time:0,isActive3Time:0,timer1:null,timer2:null,timer3:null,score:0}},components:{Keyboard:Pa,Screen:Va},computed:{},mounted(){this.musicPlayer=new Audio("/ai-music/dist/flowerdance.mp3"),this.getJson()},methods:{async getJson(){var e=new XMLHttpRequest;e.open("GET","/ai-music/dist/1.json",!0),e.onload=t=>{const n=JSON.parse(e.responseText);this.handleData(n)},e.send(null)},handleData(e){this.loopTime=this.delayTime/12,this.bpm=Math.floor(e.time[0].bpm),this.beatTime=6e4/this.bpm,this.countDivideBeatFactor=Math.round(this.beatTime/this.loopTime),this.beats=[],e.note.forEach(t=>{let n=Math.round((t.x-32)/64);n===1?n=0:n>1&&(n=n-1),t.beat[0]&&this.beats.push({beat:t.beat[0],offset:Number((t.beat[1]/t.beat[2]).toFixed(2)),x:n})})},setTrack1Index(e){const t=[0,1,2,3,4,5,6];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},setTrack2Index(e){const t=[7,8,9,10,11,12,13];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},setTrack3Index(e){const t=[14,15,16,17,18,19,20];this.$refs.keyboard.setIndexLightToggle(t[e],!0)},async handleStart(){this.musicPlayer.play(),this.loopCurrentIndex=0,this.timer=setInterval(()=>{this.handleLoop()},this.loopTime)},handleScore(e){const t=Date.now();let n=e===1?this.isActive1Time:e===2?this.isActive2Time:this.isActive3Time;t-n<100&&t-n>-100?(this.score+=100,e===1?(clearTimeout(this.timer1),this.isActive1=!0,this.timer1=setTimeout(()=>{this.isActive1=!1},50)):e===2?(clearTimeout(this.timer2),this.isActive2=!0,this.timer2=setTimeout(()=>{this.isActive2=!1},50)):(clearTimeout(this.timer3),this.isActive3=!0,this.timer3=setTimeout(()=>{this.isActive3=!1},50))):t-n<200&&t-n>-200?(this.score+=50,e===1?(clearTimeout(this.timer1),this.isWell1=!0,this.timer1=setTimeout(()=>{this.isWell1=!1},50)):e===2?(clearTimeout(this.timer2),this.isWell2=!0,this.timer2=setTimeout(()=>{this.isWell2=!1},50)):(clearTimeout(this.timer3),this.isWell3=!0,this.timer3=setTimeout(()=>{this.isWell3=!1},50))):e===1?(clearTimeout(this.timer1),this.isWrong1=!0,this.timer1=setTimeout(()=>{this.isWrong1=!1},50)):e===2?(clearTimeout(this.timer2),this.isWrong2=!0,this.timer2=setTimeout(()=>{this.isWrong2=!1},50)):(clearTimeout(this.timer3),this.isWrong3=!0,this.timer3=setTimeout(()=>{this.isWrong3=!1},50))},handleLoop(){const e=Math.floor(this.count/this.countDivideBeatFactor),t=this.beats;this.$refs.keyboard.setAllLightOff();for(let n=this.loopCurrentIndex;n<t.length;n++){const s=t[n].beat,r=t[n].offset,i=t[n].x;let o=s*this.countDivideBeatFactor;if(r&&(o=o+Math.round(this.countDivideBeatFactor*r)),o-this.count<=12&&o-this.count>0){let a=s*this.countDivideBeatFactor-this.count;r&&(a=a+Math.round(this.countDivideBeatFactor*r)),a>=0&&a<=6&&(i===0?(this.setTrack1Index(a),a===1&&(this.isActive1Time=Date.now())):i===1?(this.setTrack2Index(a),a===1&&(this.isActive2Time=Date.now())):(this.setTrack3Index(a),a===1&&(this.isActive3Time=Date.now())))}else if(o-this.count<0)this.loopCurrentIndex=n;else if(o-this.count>12)break}this.count++,e>227&&this.closeLoop()},closeLoop(){clearInterval(this.timer),this.musicPlayer.pause()},handleCancel(){this.closeLoop(),location.reload(),this.$refs.keyboard.handleFinishAI()},changeStep(e){this.currentStep=e},changeStatus(e){this.status=e},changeRightNum(e){this.rightNumber=e},handlePlayAI(){this.$refs.keyboard.handlePlayAI()}}}),ZT=e=>(zl("data-v-950544ff"),e=e(),Hl(),e),YT={class:"main"},XT={class:"main-box"},JT={class:"menu-box"},QT=ZT(()=>_t("div",{class:"m-btn btn-ai"},"Z",-1)),tw={class:"test-block-box"};function ew(e,t,n,s,r,i){const o=Tn("Screen"),a=Tn("Keyboard");return ve(),We("div",YT,[_t("div",XT,[_t("div",JT,[QT,pt(o,{current:e.currentStep,text:e.score,status:e.status},null,8,["current","text","status"]),_t("div",{class:"m-btn",onClick:t[0]||(t[0]=(...c)=>e.handleCancel&&e.handleCancel(...c))},"Cancel"),_t("div",{class:"btn-micro",onClick:t[1]||(t[1]=(...c)=>e.handleStart&&e.handleStart(...c))})]),_t("div",tw,[_t("div",{class:Le(["block",{perfect:e.isActive1,wrong:e.isWrong1,well:e.isWell1}]),onClick:t[2]||(t[2]=c=>e.handleScore(1))},null,2),_t("div",{class:Le(["block",{perfect:e.isActive2,wrong:e.isWrong2,well:e.isWell2}]),onClick:t[3]||(t[3]=c=>e.handleScore(2))},null,2),_t("div",{class:Le(["block",{perfect:e.isActive3,wrong:e.isWrong3,well:e.isWell3}]),onClick:t[4]||(t[4]=c=>e.handleScore(3))},null,2)]),pt(a,{ref:"keyboard",onChangeStep:e.changeStep,onChangeStatus:e.changeStatus,onChangeRightNum:e.changeRightNum},null,8,["onChangeStep","onChangeStatus","onChangeRightNum"])])])}const nw=$n(KT,[["render",ew],["__scopeId","data-v-950544ff"]]),sw=Rm({history:lm("/ai-music/dist/"),routes:[{path:"/",name:"home",component:Jb},{path:"/music",name:"music",component:HT},{path:"/music1",name:"music1",component:nw},{path:"/test",name:"test",component:()=>Np(()=>import("./AboutView-DK4_LMYJ.js"),__vite__mapDeps([0,1]))}]}),zh=Object.assign,rw=typeof window<"u",Hh=e=>e!==null&&typeof e=="object",Qs=e=>e!=null,iw=e=>typeof e=="function",Kh=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),ow=()=>rw?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function al(e,t){const n=t.split(".");let s=e;return n.forEach(r=>{var i;s=Hh(s)&&(i=s[r])!=null?i:""}),s}const Un=[Number,String],aw={type:Boolean,default:!0},Xe=e=>({type:String,default:e});var cw=typeof window<"u",Nr,ao;function lw(){if(!Nr&&(Nr=qs(0),ao=qs(0),cw)){const e=()=>{Nr.value=window.innerWidth,ao.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Nr,height:ao}}ow();function uw(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault()}lw();function Ae(e){if(Qs(e))return Kh(e)?`${e}px`:String(e)}function hw(e){if(Qs(e)){if(Array.isArray(e))return{width:Ae(e[0]),height:Ae(e[1])};const t=Ae(e);return{width:t,height:t}}}const fw=/-(\w)/g,Zh=e=>e.replace(fw,(t,n)=>n.toUpperCase()),{hasOwnProperty:dw}=Object.prototype;function pw(e,t,n){const s=t[n];Qs(s)&&(!dw.call(e,n)||!Hh(s)?e[n]=s:e[n]=Yh(Object(e[n]),s))}function Yh(e,t){return Object.keys(t).forEach(n=>{pw(e,t,n)}),e}var mw={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const cl=qs("zh-CN"),ll=tr({"zh-CN":mw}),gw={messages(){return ll[cl.value]},use(e,t){cl.value=e,this.add({[e]:t})},add(e={}){Yh(ll,e)}};var _w=gw;function yw(e){const t=Zh(e)+".";return(n,...s)=>{const r=_w.messages(),i=al(r,t+n)||al(r,n);return iw(i)?i(...s):i}}function Fo(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,s)=>n+Fo(e,s),""):Object.keys(t).reduce((n,s)=>n+(t[s]?Fo(e,s):""),""):""}function vw(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${Fo(t,n)}`)}function mr(e){const t=`van-${e}`;return[t,vw(t),yw(t)]}const bw="van-hairline",Tw=`${bw}--surround`;function qi(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Zh(`-${n}`),e))},e}const ww={to:[String,Object],url:String,replace:Boolean};function Cw({to:e,url:t,replace:n,$router:s}){e&&s?s[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function Sw(){const e=Ld().proxy;return()=>Cw(e)}const[Aw,ul]=mr("badge"),xw={dot:Boolean,max:Un,tag:Xe("div"),color:String,offset:Array,content:Un,showZero:aw,position:Xe("top-right")};var kw=ge({name:Aw,props:xw,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:a,showZero:c}=e;return Qs(a)&&a!==""&&(c||a!==0&&a!=="0")},s=()=>{const{dot:a,max:c,content:l}=e;if(!a&&n())return t.content?t.content():Qs(c)&&Kh(l)&&+l>+c?`${c}+`:l},r=a=>a.startsWith("-")?a.replace("-",""):`-${a}`,i=ae(()=>{const a={background:e.color};if(e.offset){const[c,l]=e.offset,{position:u}=e,[h,f]=u.split("-");t.default?(typeof l=="number"?a[h]=Ae(h==="top"?l:-l):a[h]=h==="top"?Ae(l):r(l),typeof c=="number"?a[f]=Ae(f==="left"?c:-c):a[f]=f==="left"?Ae(c):r(c)):(a.marginTop=Ae(l),a.marginLeft=Ae(c))}return a}),o=()=>{if(n()||e.dot)return pt("div",{class:ul([e.position,{dot:e.dot,fixed:!!t.default}]),style:i.value},[s()])};return()=>{if(t.default){const{tag:a}=e;return pt(a,{class:ul("wrapper")},{default:()=>[t.default(),o()]})}return o()}}});const Ew=qi(kw),[Iw,b1]=mr("config-provider"),Ow=Symbol(Iw),[Nw,hl]=mr("icon"),Mw=e=>e==null?void 0:e.includes("/"),Dw={dot:Boolean,tag:Xe("i"),name:String,size:Un,badge:Un,color:String,badgeProps:Object,classPrefix:String};var Fw=ge({name:Nw,props:Dw,setup(e,{slots:t}){const n=Ue(Ow,null),s=ae(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||hl());return()=>{const{tag:r,dot:i,name:o,size:a,badge:c,color:l}=e,u=Mw(o);return pt(Ew,gu({dot:i,tag:r,class:[s.value,u?"":`${s.value}-${o}`],style:{color:l,fontSize:Ae(a)},content:c},e.badgeProps),{default:()=>{var h;return[(h=t.default)==null?void 0:h.call(t),u&&pt("img",{class:hl("image"),src:o},null)]}})}}});const Rw=qi(Fw),[Pw,Us]=mr("loading"),Vw=Array(12).fill(null).map((e,t)=>pt("i",{class:Us("line",String(t+1))},null)),Bw=pt("svg",{class:Us("circular"),viewBox:"25 25 50 50"},[pt("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Lw={size:Un,type:Xe("circular"),color:String,vertical:Boolean,textSize:Un,textColor:String};var Uw=ge({name:Pw,props:Lw,setup(e,{slots:t}){const n=ae(()=>zh({color:e.color},hw(e.size))),s=()=>{const i=e.type==="spinner"?Vw:Bw;return pt("span",{class:Us("spinner",e.type),style:n.value},[t.icon?t.icon():i])},r=()=>{var i;if(t.default)return pt("span",{class:Us("text"),style:{fontSize:Ae(e.textSize),color:(i=e.textColor)!=null?i:e.color}},[t.default()])};return()=>{const{type:i,vertical:o}=e;return pt("div",{class:Us([i,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[s(),r()])}}});const Ww=qi(Uw),[$w,Kn]=mr("button"),qw=zh({},ww,{tag:Xe("button"),text:String,icon:String,type:Xe("default"),size:Xe("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Xe("button"),loadingSize:Un,loadingText:String,loadingType:String,iconPosition:Xe("left")});var jw=ge({name:$w,props:qw,emits:["click"],setup(e,{emit:t,slots:n}){const s=Sw(),r=()=>n.loading?n.loading():pt(Ww,{size:e.loadingSize,type:e.loadingType,class:Kn("loading")},null),i=()=>{if(e.loading)return r();if(n.icon)return pt("div",{class:Kn("icon")},[n.icon()]);if(e.icon)return pt(Rw,{name:e.icon,class:Kn("icon"),classPrefix:e.iconPrefix},null)},o=()=>{let l;if(e.loading?l=e.loadingText:l=n.default?n.default():e.text,l)return pt("span",{class:Kn("text")},[l])},a=()=>{const{color:l,plain:u}=e;if(l){const h={color:u?l:"white"};return u||(h.background=l),l.includes("gradient")?h.border=0:h.borderColor=l,h}},c=l=>{e.loading?uw(l):e.disabled||(t("click",l),s())};return()=>{const{tag:l,type:u,size:h,block:f,round:d,plain:p,square:m,loading:g,disabled:y,hairline:C,nativeType:x,iconPosition:S}=e,b=[Kn([u,h,{plain:p,block:f,round:d,square:m,loading:g,disabled:y,hairline:C}]),{[Tw]:C}];return pt(l,{type:x,class:b,style:a(),disabled:y,onClick:c},{default:()=>[pt("div",{class:Kn("content")},[S==="left"&&i(),o(),S==="right"&&i()])]})}}});const Gw=qi(jw),ji=bp(Ep);ji.use(Ap());ji.use(sw);ji.mount("#app");ji.use(Gw);export{$h as M,ri as P,Bn as S,rl as T,$n as _,_t as a,Hl as b,We as c,ge as d,Db as l,Le as n,ve as o,zl as p,Rh as s};
